
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/CityScript.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7f0b08Dcw5F7oWFl36ggKRC', 'CityScript');
// scripts/CityScript.js

"use strict";

var TankType = require("TankData").tankType;

var alert = require('Alert');

cc.Class({
  "extends": cc.Component,
  properties: {
    //地图
    curMap: cc.TiledMap,
    //摇杆
    yaogan: cc.Node,
    //子弹预制体
    bullet: cc.Prefab,
    //坦克预制体
    tank: {
      "default": null,
      type: cc.Prefab
    },
    //最大数量
    maxCount: 10,
    life: 3,
    //出生地
    bornPoses: {
      "default": [],
      type: cc.Vec2
    },
    //坦克皮肤
    spriteFrames: {
      "default": [],
      type: cc.SpriteFrame
    },
    //坦克移动速度
    tankSpeeds: {
      "default": [],
      type: cc.Float
    },
    //坦克子弹发射间隔时间
    tankFireTimes: {
      "default": [],
      type: cc.Float
    },
    //坦克血量
    tankBloods: {
      "default": [],
      type: cc.Integer
    },
    enemyNum: {
      type: cc.Label,
      "default": null
    },
    lifeNum: {
      type: cc.Label,
      "default": null
    },
    doubleFire: false,
    doubleFireBtn: {
      "default": null,
      type: cc.Node
    },
    doubleFireFrames: {
      "default": [],
      type: cc.SpriteFrame
    }
  },
  // use this for initialization
  onLoad: function onLoad() {
    // cc.director.setDisplayStats(true);
    //获取摇杆控制组件
    this._joystickCtrl = this.yaogan.getComponent("JoystickCtrl"); //获取地图 TiledMap 组件

    this._tiledMap = this.curMap.getComponent('cc.TiledMap');
    this.enemyNum.string = this.maxCount + "";
    this.lifeNum.string = this.life + "";
  },
  start: function start(err) {
    if (err) {
      return;
    } // alert.show.call(this, "关卡" + cc.gameData.curLevel, function () {
    // });
    //默认角度


    this.curAngle = null;
    var self = this; //注册监听事件

    this.registerInputEvent(); //引入地图数据

    this._tiledMapData = require("TiledMapData"); //获取地图尺寸

    this._curMapTileSize = this._tiledMap.getTileSize();
    this._curMapSize = cc.v2(this._tiledMap.node.width, this._tiledMap.node.height);
    cc.log("this._curMapTileSize =" + this._curMapTileSize);
    cc.log("this._curMapSize =" + this._curMapSize); //地图墙层

    this.mapLayer0 = this._tiledMap.getLayer("layer_0"); //初始化对象池(参数必须为对应脚本的文件名)

    this.bulletPool = new cc.NodePool("BulletScript");
    var initBulletCount = 20;

    for (var i = 0; i < initBulletCount; ++i) {
      var bullet = cc.instantiate(this.bullet);
      this.bulletPool.put(bullet);
    }

    this.tankPool = new cc.NodePool("TankScript");

    for (var i = 0; i < this.maxCount; ++i) {
      var tank = cc.instantiate(this.tank);
      this.tankPool.put(tank);
    }

    if (!cc.gameData) {
      cc.gameData = {};
    } //初始化


    cc.gameData.teamId = 0; //临时

    cc.gameData.single = true; //地图内坦克列表

    cc.gameData.tankList = []; //地图内子弹列表

    cc.gameData.bulletList = []; //获取组件

    this.tankNode = cc.find("/Canvas/Map"); //this.tankNode = cc.find("/Canvas/map1/layer0");
    //加入player

    this.player = this.addPlayerTank(); //获取坦克控制组件

    this._playerTankCtrl = this.player.getComponent("TankScript"); //启动定时器，添加坦克

    this.schedule(this.addAITank, 3, cc.macro.REPEAT_FOREVER, 1);
  },
  // called every frame, uncomment this function to activate update callback
  update: function update(dt) {
    if (this.doubleFire) {
      if (this._playerTankCtrl.startFire(this.bulletPool)) {//播放射击音效
        //cc.audioEngine.play(this._playerTankCtrl.shootAudio, false, 1);
      }
    }
  },
  setDoubleFire: function setDoubleFire() {
    this.doubleFire = !this.doubleFire;

    if (this.doubleFire) {
      this.doubleFireBtn.opacity = 240; //this.doubleFireBtn.getComponent(cc.Sprite).spriteFrame = this.doubleFireFrames[1];
    } else {
      this.doubleFireBtn.opacity = 255; //this.doubleFireBtn.getComponent(cc.Sprite).spriteFrame = this.doubleFireFrames[0];
    }
  },
  //注册输入事件
  registerInputEvent: function registerInputEvent() {
    var self = this;

    this._joystickCtrl.addJoyStickTouchChangeListener(function (angle) {
      if (angle == self.curAngle && !self._playerTankCtrl.stopMove) {
        return;
      }

      self.curAngle = angle;

      if (angle != null) {
        //开始前进
        self._playerTankCtrl.tankMoveStart(angle);
      } else {
        //停止前进
        self._playerTankCtrl.tankMoveStop();
      }
    }); //按键按下


    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, function (event) {
      var angle = null;

      switch (event.keyCode) {
        case cc.macro.KEY.w:
          angle = 90;
          break;

        case cc.macro.KEY.s:
          angle = 270;
          break;

        case cc.macro.KEY.a:
          angle = 180;
          break;

        case cc.macro.KEY.d:
          angle = 0;
          break;
      }

      if (event.keyCode == cc.macro.KEY.k) {
        this.fireBtnClick();
      } else {
        self._playerTankCtrl.tankMoveStop();
      }

      if (angle != null) {
        //开始前进
        self._playerTankCtrl.tankMoveStart(angle);
      }
    }, this); //按键抬起

    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, function (event) {
      //停止前进
      if (event.keyCode != cc.macro.KEY.k) {
        self._playerTankCtrl.tankMoveStop();
      }
    }, this);
  },
  //碰撞检测
  collisionTest: function collisionTest(rect, bullet) {
    //判断是否碰到地图边界
    if (rect.xMin <= -this._curMapSize.x / 2 || rect.xMax >= this._curMapSize.x / 2 || rect.yMin <= -this._curMapSize.y / 2 || rect.yMax >= this._curMapSize.y / 2) {
      return true;
    } //判断是否撞墙
    //将坐标转换为地图坐标系


    var MinY = this._curMapSize.y / 2 - rect.yMin;
    var MaxY = this._curMapSize.y / 2 - rect.yMax;
    var MinX = this._curMapSize.x / 2 + rect.xMin;
    var MaxX = this._curMapSize.x / 2 + rect.xMax; //获取四个角的顶点

    var LeftDown = cc.v2(MinX, MinY);
    var RightDown = cc.v2(MaxX, MinY);
    var LeftUp = cc.v2(MinX, MaxY);
    var RightUp = cc.v2(MaxX, MaxY); //获取四条边的中心点

    var MidDown = cc.v2(MinX + (MaxX - MinX) / 2, MinY);
    var MidUp = cc.v2(MinX + (MaxX - MinX) / 2, MaxY);
    var MidLeft = cc.v2(MinX, MinY + (MaxY - MinY) / 2);
    var MidRight = cc.v2(MaxX, MinY + (MaxY - MinY) / 2); //检测碰撞

    return this._collisionTest([LeftDown, RightDown, LeftUp, RightUp, MidDown, MidUp, MidLeft, MidRight], bullet);
  },
  //内部碰撞检测方法
  _collisionTest: function _collisionTest(points, bullet) {
    var point = points.shift();
    var gid = this.mapLayer0.getTileGIDAt(cc.v2(parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height)));

    if (this._tiledMapData.gidToTileType[gid] != this._tiledMapData.tileType.tileNone && this._tiledMapData.gidToTileType[gid] != this._tiledMapData.tileType.tileGrass) {
      if (bullet && this._tiledMapData.gidToTileType[gid] == this._tiledMapData.tileType.tileWall) {
        var num = parseInt(Math.random() * (13 - 10 + 1) + 10, 10);
        this.mapLayer0.setTileGIDAt(num, parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height), 1);
      } else if (bullet && this._tiledMapData.gidToTileType[gid] == this._tiledMapData.tileType.tileKing) {
        this.mapLayer0.setTileGIDAt(0, parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height), 1);
        this.gameOver();
      }

      return true;
    }

    if (points.length > 0) {
      return this._collisionTest(points, bullet);
    } else {
      return false;
    }
  },
  gameOver: function gameOver() {
    this.doubleFire = false;

    for (var i = 0; i < cc.gameData.tankList.length; i++) {
      var tank = cc.gameData.tankList[i];
      var tankCtrl = tank.getComponent("TankScript");
      tankCtrl.tankStop();
    } //弹窗调用


    alert.show.call(this, "游戏结束", function () {
      cc.director.loadScene("StartScene");
    });
  },
  //加入玩家坦克
  addPlayerTank: function addPlayerTank(team) {
    if (this.tankPool.size() > 0) {
      var tank = this.tankPool.get();
      tank.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[this.spriteFrames.length - 1];
      tank.position = this.bornPoses[this.bornPoses.length - 1];
      tank.zIndex = -1; //获取坦克控制组件

      var tankCtrl = tank.getComponent("TankScript"); //设置坦克属性

      tankCtrl.tankType = TankType.Player;
      tankCtrl.speed = this.tankSpeeds[this.tankSpeeds.length - 1];
      tankCtrl.fireTime = this.tankFireTimes[this.tankFireTimes.length - 1]; //tankCtrl.blood = this.tankBloods[this.tankBloods.length-1];
      //tankCtrl.blood = this.life ;

      tankCtrl.blood = 1;
      tankCtrl.die = false;

      if (!team) {
        if (cc.gameData.single) {
          //单机版
          tankCtrl.team = 0;
        } else {
          //大乱斗
          tankCtrl.team = ++cc.gameData.teamId;
        }
      } else {
        //组队
        tankCtrl.team = team;
      }

      tank.parent = this.tankNode; //加到列表

      cc.gameData.tankList.push(tank);
      return tank;
    }

    return null;
  },
  //加入AI
  addAITank: function addAITank(dt, team) {
    if (this.tankPool.size() > 0 && this.maxCount > 0) {
      var tank = this.tankPool.get();
      tank.zIndex = -1;
      var index = parseInt(Math.random() * 3, 10); //获取坦克控制组件

      var tankCtrl = tank.getComponent("TankScript"); //设置坦克属性

      tank.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[index];
      tank.position = this.bornPoses[index];
      tankCtrl.tankType = index;
      tankCtrl.speed = this.tankSpeeds[index];
      tankCtrl.fireTime = this.tankFireTimes[index];
      tankCtrl.blood = this.tankBloods[index];
      tankCtrl.die = false;

      if (!team) {
        if (cc.gameData.single) {
          //单机版
          tankCtrl.team = 1;
        } else {
          //大乱斗
          tankCtrl.team = ++cc.gameData.teamId;
        }
      } else {
        //组队
        tankCtrl.team = team;
      }

      if (index == 0) {
        tank.angle = 90;
      } else if (index == 1) {
        tank.angle = 180;
      } else if (index == 2) {
        tank.angle = 270;
      }

      if (tankCtrl.collisionTank(tank.getBoundingBox())) {
        for (var i = 0; i < this.bornPoses.length - 1; i++) {
          tank.position = this.bornPoses[i];

          if (!tankCtrl.collisionTank(tank.getBoundingBox())) {
            break;
          }
        }
      }

      tank.parent = this.tankNode; //加到列表

      cc.gameData.tankList.push(tank);
      this.maxCount--;
    }
  },
  tankBoom: function tankBoom(tank) {
    tank.parent = null;
    tank.getComponent("TankScript").die = true;
    this.tankPool.put(tank);

    if (cc.gameData.single && tank.getComponent("TankScript").team == 0) {
      this.life--;
      this.lifeNum.string = this.life + "";

      if (this.life > 0) {
        this.addPlayerTank();
      } else {
        this.gameOver();
      }

      tank.getComponent("TankScript").blood = 1;
    } else {
      tank.parent = null;
      tank.getComponent("TankScript").die = true;
      this.tankPool.put(tank);
      var tankNum = Number(this.enemyNum.string) - 1;
      this.enemyNum.string = tankNum + "";

      if (tankNum == 0) {
        if (cc.gameData.curLevel < 10) {
          ++cc.gameData.curLevel;
          cc.director.loadScene("CityScene" + cc.gameData.curLevel);
        } else {
          this.doubleFire = false;
          alert.show.call(this, "你赢了", function () {
            cc.director.loadScene("StartScene");
          });
        }
      }
    }
  },
  //开火按钮点击
  fireBtnClick: function fireBtnClick() {
    if (this._playerTankCtrl.startFire(this.bulletPool)) {
      //播放射击音效
      cc.audioEngine.play(this._playerTankCtrl.shootAudio, false, 1);
    }
  },
  //销毁时调用
  onDestroy: function onDestroy() {
    this.unschedule(this.addAITank, this);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcQ2l0eVNjcmlwdC5qcyJdLCJuYW1lcyI6WyJUYW5rVHlwZSIsInJlcXVpcmUiLCJ0YW5rVHlwZSIsImFsZXJ0IiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJjdXJNYXAiLCJUaWxlZE1hcCIsInlhb2dhbiIsIk5vZGUiLCJidWxsZXQiLCJQcmVmYWIiLCJ0YW5rIiwidHlwZSIsIm1heENvdW50IiwibGlmZSIsImJvcm5Qb3NlcyIsIlZlYzIiLCJzcHJpdGVGcmFtZXMiLCJTcHJpdGVGcmFtZSIsInRhbmtTcGVlZHMiLCJGbG9hdCIsInRhbmtGaXJlVGltZXMiLCJ0YW5rQmxvb2RzIiwiSW50ZWdlciIsImVuZW15TnVtIiwiTGFiZWwiLCJsaWZlTnVtIiwiZG91YmxlRmlyZSIsImRvdWJsZUZpcmVCdG4iLCJkb3VibGVGaXJlRnJhbWVzIiwib25Mb2FkIiwiX2pveXN0aWNrQ3RybCIsImdldENvbXBvbmVudCIsIl90aWxlZE1hcCIsInN0cmluZyIsInN0YXJ0IiwiZXJyIiwiY3VyQW5nbGUiLCJzZWxmIiwicmVnaXN0ZXJJbnB1dEV2ZW50IiwiX3RpbGVkTWFwRGF0YSIsIl9jdXJNYXBUaWxlU2l6ZSIsImdldFRpbGVTaXplIiwiX2N1ck1hcFNpemUiLCJ2MiIsIm5vZGUiLCJ3aWR0aCIsImhlaWdodCIsImxvZyIsIm1hcExheWVyMCIsImdldExheWVyIiwiYnVsbGV0UG9vbCIsIk5vZGVQb29sIiwiaW5pdEJ1bGxldENvdW50IiwiaSIsImluc3RhbnRpYXRlIiwicHV0IiwidGFua1Bvb2wiLCJnYW1lRGF0YSIsInRlYW1JZCIsInNpbmdsZSIsInRhbmtMaXN0IiwiYnVsbGV0TGlzdCIsInRhbmtOb2RlIiwiZmluZCIsInBsYXllciIsImFkZFBsYXllclRhbmsiLCJfcGxheWVyVGFua0N0cmwiLCJzY2hlZHVsZSIsImFkZEFJVGFuayIsIm1hY3JvIiwiUkVQRUFUX0ZPUkVWRVIiLCJ1cGRhdGUiLCJkdCIsInN0YXJ0RmlyZSIsInNldERvdWJsZUZpcmUiLCJvcGFjaXR5IiwiYWRkSm95U3RpY2tUb3VjaENoYW5nZUxpc3RlbmVyIiwiYW5nbGUiLCJzdG9wTW92ZSIsInRhbmtNb3ZlU3RhcnQiLCJ0YW5rTW92ZVN0b3AiLCJzeXN0ZW1FdmVudCIsIm9uIiwiU3lzdGVtRXZlbnQiLCJFdmVudFR5cGUiLCJLRVlfRE9XTiIsImV2ZW50Iiwia2V5Q29kZSIsIktFWSIsInciLCJzIiwiYSIsImQiLCJrIiwiZmlyZUJ0bkNsaWNrIiwiS0VZX1VQIiwiY29sbGlzaW9uVGVzdCIsInJlY3QiLCJ4TWluIiwieCIsInhNYXgiLCJ5TWluIiwieSIsInlNYXgiLCJNaW5ZIiwiTWF4WSIsIk1pblgiLCJNYXhYIiwiTGVmdERvd24iLCJSaWdodERvd24iLCJMZWZ0VXAiLCJSaWdodFVwIiwiTWlkRG93biIsIk1pZFVwIiwiTWlkTGVmdCIsIk1pZFJpZ2h0IiwiX2NvbGxpc2lvblRlc3QiLCJwb2ludHMiLCJwb2ludCIsInNoaWZ0IiwiZ2lkIiwiZ2V0VGlsZUdJREF0IiwicGFyc2VJbnQiLCJnaWRUb1RpbGVUeXBlIiwidGlsZVR5cGUiLCJ0aWxlTm9uZSIsInRpbGVHcmFzcyIsInRpbGVXYWxsIiwibnVtIiwiTWF0aCIsInJhbmRvbSIsInNldFRpbGVHSURBdCIsInRpbGVLaW5nIiwiZ2FtZU92ZXIiLCJsZW5ndGgiLCJ0YW5rQ3RybCIsInRhbmtTdG9wIiwic2hvdyIsImNhbGwiLCJkaXJlY3RvciIsImxvYWRTY2VuZSIsInRlYW0iLCJzaXplIiwiZ2V0IiwiU3ByaXRlIiwic3ByaXRlRnJhbWUiLCJwb3NpdGlvbiIsInpJbmRleCIsIlBsYXllciIsInNwZWVkIiwiZmlyZVRpbWUiLCJibG9vZCIsImRpZSIsInBhcmVudCIsInB1c2giLCJpbmRleCIsImNvbGxpc2lvblRhbmsiLCJnZXRCb3VuZGluZ0JveCIsInRhbmtCb29tIiwidGFua051bSIsIk51bWJlciIsImN1ckxldmVsIiwiYXVkaW9FbmdpbmUiLCJwbGF5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QUNKLEdBaGJJO0FBa2JMO0FBQ0E5QyxFQUFBQSxZQUFZLEVBQUUsd0JBQVU7QUFDcEIsUUFBRyxLQUFLNUIsZUFBTCxDQUFxQk8sU0FBckIsQ0FBK0IsS0FBS3ZCLFVBQXBDLENBQUgsRUFBbUQ7QUFDL0M7QUFDQWxELE1BQUFBLEVBQUUsQ0FBQ2tLLFdBQUgsQ0FBZUMsSUFBZixDQUFvQixLQUFLakcsZUFBTCxDQUFxQmtHLFVBQXpDLEVBQXFELEtBQXJELEVBQTRELENBQTVEO0FBQ0g7QUFDSixHQXhiSTtBQTBiTDtBQUNBQyxFQUFBQSxTQUFTLEVBQUUscUJBQVk7QUFDbkIsU0FBS0MsVUFBTCxDQUFnQixLQUFLbEcsU0FBckIsRUFBK0IsSUFBL0I7QUFDSDtBQTdiSSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgVGFua1R5cGUgPSByZXF1aXJlKFwiVGFua0RhdGFcIikudGFua1R5cGU7XHJcbmxldCBhbGVydCA9IHJlcXVpcmUoJ0FsZXJ0Jyk7XHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuXHJcbiAgICAgICAgLy/lnLDlm75cclxuICAgICAgICBjdXJNYXA6IGNjLlRpbGVkTWFwLFxyXG4gICAgICAgIC8v5pGH5p2GXHJcbiAgICAgICAgeWFvZ2FuOiBjYy5Ob2RlLFxyXG5cclxuICAgICAgICAvL+WtkOW8uemihOWItuS9k1xyXG4gICAgICAgIGJ1bGxldDogY2MuUHJlZmFiLFxyXG4gICAgICAgIC8v5Z2m5YWL6aKE5Yi25L2TXHJcbiAgICAgICAgdGFuazoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAvL+acgOWkp+aVsOmHj1xyXG4gICAgICAgIG1heENvdW50OiAxMCxcclxuICAgICAgICBsaWZlOiAzLFxyXG4gICAgICAgIC8v5Ye655Sf5ZywXHJcbiAgICAgICAgYm9yblBvc2VzOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5WZWMyLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy/lnablhYvnmq7ogqRcclxuICAgICAgICBzcHJpdGVGcmFtZXM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy/lnablhYvnp7vliqjpgJ/luqZcclxuICAgICAgICB0YW5rU3BlZWRzOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5GbG9hdCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8v5Z2m5YWL5a2Q5by55Y+R5bCE6Ze06ZqU5pe26Ze0XHJcbiAgICAgICAgdGFua0ZpcmVUaW1lczoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuRmxvYXQsXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy/lnablhYvooYDph49cclxuICAgICAgICB0YW5rQmxvb2RzOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5JbnRlZ2VyLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgZW5lbXlOdW06IHtcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsaWZlTnVtOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZG91YmxlRmlyZTogZmFsc2UsXHJcbiAgICAgICAgZG91YmxlRmlyZUJ0bjoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkb3VibGVGaXJlRnJhbWVzOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5TcHJpdGVGcmFtZSxcclxuICAgICAgICB9LFxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBjYy5kaXJlY3Rvci5zZXREaXNwbGF5U3RhdHModHJ1ZSk7XHJcbiAgICAgICAgLy/ojrflj5bmkYfmnYbmjqfliLbnu4Tku7ZcclxuICAgICAgICB0aGlzLl9qb3lzdGlja0N0cmwgPSB0aGlzLnlhb2dhbi5nZXRDb21wb25lbnQoXCJKb3lzdGlja0N0cmxcIik7XHJcbiAgICAgICAgLy/ojrflj5blnLDlm74gVGlsZWRNYXAg57uE5Lu2XHJcbiAgICAgICAgdGhpcy5fdGlsZWRNYXAgPSB0aGlzLmN1ck1hcC5nZXRDb21wb25lbnQoJ2NjLlRpbGVkTWFwJyk7XHJcbiAgICAgICAgdGhpcy5lbmVteU51bS5zdHJpbmcgPSB0aGlzLm1heENvdW50ICsgXCJcIjtcclxuICAgICAgICB0aGlzLmxpZmVOdW0uc3RyaW5nID0gdGhpcy5saWZlICsgXCJcIjtcclxuICAgIH0sXHJcblxyXG4gICAgc3RhcnQ6IGZ1bmN0aW9uKGVycil7XHJcbiAgICAgICAgaWYoZXJyKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWxlcnQuc2hvdy5jYWxsKHRoaXMsIFwi5YWz5Y2hXCIgKyBjYy5nYW1lRGF0YS5jdXJMZXZlbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgLy/pu5jorqTop5LluqZcclxuICAgICAgICB0aGlzLmN1ckFuZ2xlID0gbnVsbDtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIC8v5rOo5YaM55uR5ZCs5LqL5Lu2XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcklucHV0RXZlbnQoKTtcclxuICAgICAgICAvL+W8leWFpeWcsOWbvuaVsOaNrlxyXG4gICAgICAgIHRoaXMuX3RpbGVkTWFwRGF0YSA9IHJlcXVpcmUoXCJUaWxlZE1hcERhdGFcIik7XHJcblxyXG4gICAgICAgIC8v6I635Y+W5Zyw5Zu+5bC65a+4XHJcbiAgICAgICAgdGhpcy5fY3VyTWFwVGlsZVNpemUgPSB0aGlzLl90aWxlZE1hcC5nZXRUaWxlU2l6ZSgpO1xyXG4gICAgICAgIHRoaXMuX2N1ck1hcFNpemUgPSBjYy52Mih0aGlzLl90aWxlZE1hcC5ub2RlLndpZHRoLHRoaXMuX3RpbGVkTWFwLm5vZGUuaGVpZ2h0KTtcclxuICAgICAgICBjYy5sb2coXCJ0aGlzLl9jdXJNYXBUaWxlU2l6ZSA9XCIgKyB0aGlzLl9jdXJNYXBUaWxlU2l6ZSk7XHJcbiAgICAgICAgY2MubG9nKFwidGhpcy5fY3VyTWFwU2l6ZSA9XCIgKyB0aGlzLl9jdXJNYXBTaXplKTtcclxuICAgICAgICBcclxuICAgICAgICAvL+WcsOWbvuWimeWxglxyXG4gICAgICAgIHRoaXMubWFwTGF5ZXIwID0gdGhpcy5fdGlsZWRNYXAuZ2V0TGF5ZXIoXCJsYXllcl8wXCIpO1xyXG5cclxuICAgICAgICAvL+WIneWni+WMluWvueixoeaxoCjlj4LmlbDlv4XpobvkuLrlr7nlupTohJrmnKznmoTmlofku7blkI0pXHJcbiAgICAgICAgdGhpcy5idWxsZXRQb29sID0gbmV3IGNjLk5vZGVQb29sKFwiQnVsbGV0U2NyaXB0XCIpO1xyXG4gICAgICAgIHZhciBpbml0QnVsbGV0Q291bnQgPSAyMDtcclxuICAgICAgICBmb3IodmFyIGk9MDsgaTxpbml0QnVsbGV0Q291bnQ7ICsraSl7XHJcbiAgICAgICAgICAgIHZhciBidWxsZXQgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmJ1bGxldCk7XHJcbiAgICAgICAgICAgIHRoaXMuYnVsbGV0UG9vbC5wdXQoYnVsbGV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50YW5rUG9vbCA9IG5ldyBjYy5Ob2RlUG9vbChcIlRhbmtTY3JpcHRcIik7XHJcbiAgICAgICAgZm9yKHZhciBpPTA7IGk8dGhpcy5tYXhDb3VudDsgKytpKXtcclxuICAgICAgICAgICAgdmFyIHRhbmsgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnRhbmspO1xyXG4gICAgICAgICAgICB0aGlzLnRhbmtQb29sLnB1dCh0YW5rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIWNjLmdhbWVEYXRhKXtcclxuICAgICAgICAgICAgY2MuZ2FtZURhdGEgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/liJ3lp4vljJZcclxuICAgICAgICBjYy5nYW1lRGF0YS50ZWFtSWQgPSAwO1xyXG4gICAgICAgIC8v5Li05pe2XHJcbiAgICAgICAgY2MuZ2FtZURhdGEuc2luZ2xlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy/lnLDlm77lhoXlnablhYvliJfooahcclxuICAgICAgICBjYy5nYW1lRGF0YS50YW5rTGlzdCA9IFtdO1xyXG4gICAgICAgIC8v5Zyw5Zu+5YaF5a2Q5by55YiX6KGoXHJcbiAgICAgICAgY2MuZ2FtZURhdGEuYnVsbGV0TGlzdCA9IFtdO1xyXG5cclxuICAgICAgICAvL+iOt+WPlue7hOS7tlxyXG4gICAgICAgIHRoaXMudGFua05vZGUgPSBjYy5maW5kKFwiL0NhbnZhcy9NYXBcIik7XHJcbiAgICAgICAgLy90aGlzLnRhbmtOb2RlID0gY2MuZmluZChcIi9DYW52YXMvbWFwMS9sYXllcjBcIik7XHJcbiAgICAgICAgLy/liqDlhaVwbGF5ZXJcclxuICAgICAgICB0aGlzLnBsYXllciA9IHRoaXMuYWRkUGxheWVyVGFuaygpO1xyXG4gICAgICAgIC8v6I635Y+W5Z2m5YWL5o6n5Yi257uE5Lu2XHJcbiAgICAgICAgdGhpcy5fcGxheWVyVGFua0N0cmwgPSB0aGlzLnBsYXllci5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpOyBcclxuXHJcbiAgICAgICAgLy/lkK/liqjlrprml7blmajvvIzmt7vliqDlnablhYtcclxuICAgICAgICB0aGlzLnNjaGVkdWxlKHRoaXMuYWRkQUlUYW5rLDMsY2MubWFjcm8uUkVQRUFUX0ZPUkVWRVIsMSk7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG4gICAgICAgIGlmKHRoaXMuZG91YmxlRmlyZSl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX3BsYXllclRhbmtDdHJsLnN0YXJ0RmlyZSh0aGlzLmJ1bGxldFBvb2wpKXtcclxuICAgICAgICAgICAgICAgIC8v5pKt5pS+5bCE5Ye76Z+z5pWIXHJcbiAgICAgICAgICAgICAgICAvL2NjLmF1ZGlvRW5naW5lLnBsYXkodGhpcy5fcGxheWVyVGFua0N0cmwuc2hvb3RBdWRpbywgZmFsc2UsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzZXREb3VibGVGaXJlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5kb3VibGVGaXJlID0gIXRoaXMuZG91YmxlRmlyZTtcclxuICAgICAgICBcclxuICAgICAgICBpZih0aGlzLmRvdWJsZUZpcmUpe1xyXG4gICAgICAgICAgICB0aGlzLmRvdWJsZUZpcmVCdG4ub3BhY2l0eSA9IDI0MFxyXG4gICAgICAgICAgICAvL3RoaXMuZG91YmxlRmlyZUJ0bi5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuZG91YmxlRmlyZUZyYW1lc1sxXTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5kb3VibGVGaXJlQnRuLm9wYWNpdHkgPSAyNTVcclxuICAgICAgICAgICAgLy90aGlzLmRvdWJsZUZpcmVCdG4uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmRvdWJsZUZpcmVGcmFtZXNbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfSxcclxuXHJcbiAgICAvL+azqOWGjOi+k+WFpeS6i+S7tlxyXG4gICAgcmVnaXN0ZXJJbnB1dEV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgdGhpcy5fam95c3RpY2tDdHJsLmFkZEpveVN0aWNrVG91Y2hDaGFuZ2VMaXN0ZW5lcihmdW5jdGlvbiAoYW5nbGUpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGFuZ2xlID09IHNlbGYuY3VyQW5nbGUgJiZcclxuICAgICAgICAgICAgICAgICFzZWxmLl9wbGF5ZXJUYW5rQ3RybC5zdG9wTW92ZSApe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlbGYuY3VyQW5nbGUgPSBhbmdsZTtcclxuXHJcbiAgICAgICAgICAgIGlmKGFuZ2xlIT1udWxsKXtcclxuICAgICAgICAgICAgICAgIC8v5byA5aeL5YmN6L+bXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9wbGF5ZXJUYW5rQ3RybC50YW5rTW92ZVN0YXJ0KGFuZ2xlKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy/lgZzmraLliY3ov5tcclxuICAgICAgICAgICAgICAgIHNlbGYuX3BsYXllclRhbmtDdHJsLnRhbmtNb3ZlU3RvcCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5oyJ6ZSu5oyJ5LiLXHJcbiAgICAgICAgY2Muc3lzdGVtRXZlbnQub24oY2MuU3lzdGVtRXZlbnQuRXZlbnRUeXBlLktFWV9ET1dOLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGV2ZW50LmtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGNjLm1hY3JvLktFWS53OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IDkwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGNjLm1hY3JvLktFWS5zOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IDI3MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBjYy5tYWNyby5LRVkuYTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSAxODA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgY2MubWFjcm8uS0VZLmQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihldmVudC5rZXlDb2RlID09IGNjLm1hY3JvLktFWS5rKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmVCdG5DbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3BsYXllclRhbmtDdHJsLnRhbmtNb3ZlU3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5nbGUhPW51bGwpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5byA5aeL5YmN6L+bXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheWVyVGFua0N0cmwudGFua01vdmVTdGFydChhbmdsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMpO1xyXG4gICAgICAgIC8v5oyJ6ZSu5oqs6LW3XHJcbiAgICAgICAgY2Muc3lzdGVtRXZlbnQub24oY2MuU3lzdGVtRXZlbnQuRXZlbnRUeXBlLktFWV9VUCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChldmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WBnOatouWJjei/m1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXZlbnQua2V5Q29kZSAhPSBjYy5tYWNyby5LRVkuayl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheWVyVGFua0N0cmwudGFua01vdmVTdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMpO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy/norDmkp7mo4DmtYtcclxuICAgIGNvbGxpc2lvblRlc3Q6IGZ1bmN0aW9uKHJlY3QsIGJ1bGxldCl7XHJcbiAgICAgICAgLy/liKTmlq3mmK/lkKbnorDliLDlnLDlm77ovrnnlYxcclxuICAgICAgICBpZiAocmVjdC54TWluIDw9IC10aGlzLl9jdXJNYXBTaXplLngvMiB8fCByZWN0LnhNYXggPj0gdGhpcy5fY3VyTWFwU2l6ZS54LzIgfHxcclxuXHRcdCAgICByZWN0LnlNaW4gPD0gLXRoaXMuX2N1ck1hcFNpemUueS8yIHx8IHJlY3QueU1heCA+PSB0aGlzLl9jdXJNYXBTaXplLnkvMil7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5Yik5pat5piv5ZCm5pKe5aKZXHJcbiAgICAgICAgLy/lsIblnZDmoIfovazmjaLkuLrlnLDlm77lnZDmoIfns7tcclxuICAgICAgICB2YXIgTWluWSA9IHRoaXMuX2N1ck1hcFNpemUueS8yIC0gcmVjdC55TWluO1xyXG5cdCAgICB2YXIgTWF4WSA9IHRoaXMuX2N1ck1hcFNpemUueS8yIC0gcmVjdC55TWF4O1xyXG4gICAgICAgIHZhciBNaW5YID0gdGhpcy5fY3VyTWFwU2l6ZS54LzIgKyByZWN0LnhNaW47XHJcbiAgICAgICAgdmFyIE1heFggPSB0aGlzLl9jdXJNYXBTaXplLngvMiArIHJlY3QueE1heDtcclxuXHJcbiAgICAgICAgLy/ojrflj5blm5vkuKrop5LnmoTpobbngrlcclxuICAgICAgICB2YXIgTGVmdERvd24gPSBjYy52MihNaW5YLCBNaW5ZKTtcclxuICAgICAgICB2YXIgUmlnaHREb3duID0gY2MudjIoTWF4WCwgTWluWSk7XHJcbiAgICAgICAgdmFyIExlZnRVcCA9IGNjLnYyKE1pblgsIE1heFkpO1xyXG4gICAgICAgIHZhciBSaWdodFVwID0gY2MudjIoTWF4WCwgTWF4WSk7XHJcblxyXG4gICAgICAgIC8v6I635Y+W5Zub5p2h6L6555qE5Lit5b+D54K5XHJcbiAgICAgICAgdmFyIE1pZERvd24gPSBjYy52MihNaW5YKyhNYXhYLU1pblgpLzIsIE1pblkpO1xyXG4gICAgICAgIHZhciBNaWRVcCA9IGNjLnYyKE1pblgrKE1heFgtTWluWCkvMiwgTWF4WSk7XHJcbiAgICAgICAgdmFyIE1pZExlZnQgPSBjYy52MihNaW5YLCBNaW5ZKyhNYXhZLU1pblkpLzIpO1xyXG4gICAgICAgIHZhciBNaWRSaWdodD0gY2MudjIoTWF4WCwgTWluWSsoTWF4WS1NaW5ZKS8yKTtcclxuXHJcbiAgICAgICAgLy/mo4DmtYvnorDmkp5cclxuICAgICAgICByZXR1cm4gdGhpcy5fY29sbGlzaW9uVGVzdChbTGVmdERvd24sUmlnaHREb3duLExlZnRVcCxSaWdodFVwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNaWREb3duLE1pZFVwLE1pZExlZnQsTWlkUmlnaHRdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+WGhemDqOeisOaSnuajgOa1i+aWueazlVxyXG4gICAgX2NvbGxpc2lvblRlc3Q6IGZ1bmN0aW9uKHBvaW50cywgYnVsbGV0KXtcclxuICAgICAgICB2YXIgcG9pbnQgPSBwb2ludHMuc2hpZnQoKVxyXG4gICAgICAgIHZhciBnaWQgPSB0aGlzLm1hcExheWVyMC5nZXRUaWxlR0lEQXQoY2MudjIocGFyc2VJbnQocG9pbnQueCAvIHRoaXMuX2N1ck1hcFRpbGVTaXplLndpZHRoKSxwYXJzZUludChwb2ludC55IC8gdGhpcy5fY3VyTWFwVGlsZVNpemUuaGVpZ2h0KSkpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fdGlsZWRNYXBEYXRhLmdpZFRvVGlsZVR5cGVbZ2lkXSAhPSB0aGlzLl90aWxlZE1hcERhdGEudGlsZVR5cGUudGlsZU5vbmUgJiYgXHJcbiAgICAgICAgICAgIHRoaXMuX3RpbGVkTWFwRGF0YS5naWRUb1RpbGVUeXBlW2dpZF0gIT0gdGhpcy5fdGlsZWRNYXBEYXRhLnRpbGVUeXBlLnRpbGVHcmFzcyl7XHJcblxyXG4gICAgICAgICAgICBpZihidWxsZXQgJiYgdGhpcy5fdGlsZWRNYXBEYXRhLmdpZFRvVGlsZVR5cGVbZ2lkXSA9PSB0aGlzLl90aWxlZE1hcERhdGEudGlsZVR5cGUudGlsZVdhbGwpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBudW0gPSBwYXJzZUludChNYXRoLnJhbmRvbSgpKigxMy0xMCsxKSsxMCwxMCk7XHJcbiBcclxuICAgICAgICAgICAgICAgIHRoaXMubWFwTGF5ZXIwLnNldFRpbGVHSURBdChudW0sIHBhcnNlSW50KHBvaW50LnggLyB0aGlzLl9jdXJNYXBUaWxlU2l6ZS53aWR0aCkscGFyc2VJbnQocG9pbnQueSAvIHRoaXMuX2N1ck1hcFRpbGVTaXplLmhlaWdodCksIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYoYnVsbGV0ICYmIHRoaXMuX3RpbGVkTWFwRGF0YS5naWRUb1RpbGVUeXBlW2dpZF0gPT0gdGhpcy5fdGlsZWRNYXBEYXRhLnRpbGVUeXBlLnRpbGVLaW5nKXtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcExheWVyMC5zZXRUaWxlR0lEQXQoMCwgcGFyc2VJbnQocG9pbnQueCAvIHRoaXMuX2N1ck1hcFRpbGVTaXplLndpZHRoKSxwYXJzZUludChwb2ludC55IC8gdGhpcy5fY3VyTWFwVGlsZVNpemUuaGVpZ2h0KSwgMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVPdmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihwb2ludHMubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29sbGlzaW9uVGVzdChwb2ludHMsIGJ1bGxldCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGdhbWVPdmVyOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMuZG91YmxlRmlyZSA9IGZhbHNlO1xyXG4gICAgICAgIGZvcih2YXIgaT0wOyBpPGNjLmdhbWVEYXRhLnRhbmtMaXN0Lmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgdmFyIHRhbmsgPSBjYy5nYW1lRGF0YS50YW5rTGlzdFtpXVxyXG4gICAgICAgICAgICB2YXIgdGFua0N0cmwgPSB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIik7XHJcbiAgICAgICAgICAgIHRhbmtDdHJsLnRhbmtTdG9wKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+W8ueeql+iwg+eUqFxyXG4gICAgICAgIGFsZXJ0LnNob3cuY2FsbCh0aGlzLCBcIua4uOaIj+e7k+adn1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShcIlN0YXJ0U2NlbmVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5Yqg5YWl546p5a625Z2m5YWLXHJcbiAgICBhZGRQbGF5ZXJUYW5rOiBmdW5jdGlvbih0ZWFtKSB7XHJcbiAgICAgICAgaWYodGhpcy50YW5rUG9vbC5zaXplKCk+MCl7XHJcbiAgICAgICAgICAgIHZhciB0YW5rID0gdGhpcy50YW5rUG9vbC5nZXQoKTtcclxuICAgICAgICAgICAgdGFuay5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuc3ByaXRlRnJhbWVzW3RoaXMuc3ByaXRlRnJhbWVzLmxlbmd0aC0xXTtcclxuICAgICAgICAgICAgdGFuay5wb3NpdGlvbiA9IHRoaXMuYm9yblBvc2VzW3RoaXMuYm9yblBvc2VzLmxlbmd0aC0xXTtcclxuICAgICAgICAgICAgdGFuay56SW5kZXggPSAtMTtcclxuICAgICAgICAgICAgLy/ojrflj5blnablhYvmjqfliLbnu4Tku7ZcclxuICAgICAgICAgICAgdmFyIHRhbmtDdHJsID0gdGFuay5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpO1xyXG4gICAgICAgICAgICAvL+iuvue9ruWdpuWFi+WxnuaAp1xyXG4gICAgICAgICAgICB0YW5rQ3RybC50YW5rVHlwZSA9IFRhbmtUeXBlLlBsYXllcjtcclxuICAgICAgICAgICAgdGFua0N0cmwuc3BlZWQgPSB0aGlzLnRhbmtTcGVlZHNbdGhpcy50YW5rU3BlZWRzLmxlbmd0aC0xXTtcclxuICAgICAgICAgICAgdGFua0N0cmwuZmlyZVRpbWUgPSB0aGlzLnRhbmtGaXJlVGltZXNbdGhpcy50YW5rRmlyZVRpbWVzLmxlbmd0aC0xXTtcclxuICAgICAgICAgICAgLy90YW5rQ3RybC5ibG9vZCA9IHRoaXMudGFua0Jsb29kc1t0aGlzLnRhbmtCbG9vZHMubGVuZ3RoLTFdO1xyXG4gICAgICAgICAgICAvL3RhbmtDdHJsLmJsb29kID0gdGhpcy5saWZlIDtcclxuICAgICAgICAgICAgdGFua0N0cmwuYmxvb2QgPSAxO1xyXG4gICAgICAgICAgICB0YW5rQ3RybC5kaWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKCF0ZWFtKXtcclxuICAgICAgICAgICAgICAgIGlmKGNjLmdhbWVEYXRhLnNpbmdsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/ljZXmnLrniYhcclxuICAgICAgICAgICAgICAgICAgICB0YW5rQ3RybC50ZWFtID0gMDtcclxuICAgICAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+Wkp+S5seaWl1xyXG4gICAgICAgICAgICAgICAgICAgIHRhbmtDdHJsLnRlYW0gPSArK2NjLmdhbWVEYXRhLnRlYW1JZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL+e7hOmYn1xyXG4gICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9IHRlYW07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRhbmsucGFyZW50ID0gdGhpcy50YW5rTm9kZTtcclxuICAgICAgICAgICAgLy/liqDliLDliJfooahcclxuICAgICAgICAgICAgY2MuZ2FtZURhdGEudGFua0xpc3QucHVzaCh0YW5rKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRhbms7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+WKoOWFpUFJXHJcbiAgICBhZGRBSVRhbms6IGZ1bmN0aW9uKGR0LCB0ZWFtKSB7XHJcbiAgICAgICAgaWYodGhpcy50YW5rUG9vbC5zaXplKCk+MCAmJiB0aGlzLm1heENvdW50ID4gMCl7XHJcbiAgICAgICAgICAgIHZhciB0YW5rID0gdGhpcy50YW5rUG9vbC5nZXQoKTtcclxuICAgICAgICAgICAgdGFuay56SW5kZXggPSAtMTtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VJbnQoTWF0aC5yYW5kb20oKSozLCAxMCk7XHJcbiAgICAgICAgICAgIC8v6I635Y+W5Z2m5YWL5o6n5Yi257uE5Lu2XHJcbiAgICAgICAgICAgIHZhciB0YW5rQ3RybCA9IHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKTtcclxuICAgICAgICAgICAgLy/orr7nva7lnablhYvlsZ7mgKdcclxuICAgICAgICAgICAgdGFuay5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuc3ByaXRlRnJhbWVzW2luZGV4XTtcclxuICAgICAgICAgICAgdGFuay5wb3NpdGlvbiA9IHRoaXMuYm9yblBvc2VzW2luZGV4XTtcclxuXHJcbiAgICAgICAgICAgIHRhbmtDdHJsLnRhbmtUeXBlID0gaW5kZXg7XHJcbiAgICAgICAgICAgIHRhbmtDdHJsLnNwZWVkID0gdGhpcy50YW5rU3BlZWRzW2luZGV4XTtcclxuICAgICAgICAgICAgdGFua0N0cmwuZmlyZVRpbWUgPSB0aGlzLnRhbmtGaXJlVGltZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICB0YW5rQ3RybC5ibG9vZCA9IHRoaXMudGFua0Jsb29kc1tpbmRleF07XHJcbiAgICAgICAgICAgIHRhbmtDdHJsLmRpZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYoIXRlYW0pe1xyXG4gICAgICAgICAgICAgICAgaWYoY2MuZ2FtZURhdGEuc2luZ2xlKXtcclxuICAgICAgICAgICAgICAgICAgICAvL+WNleacuueJiFxyXG4gICAgICAgICAgICAgICAgICAgIHRhbmtDdHJsLnRlYW0gPSAxO1xyXG4gICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5aSn5Lmx5paXXHJcbiAgICAgICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9ICsrY2MuZ2FtZURhdGEudGVhbUlkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL+e7hOmYn1xyXG4gICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9IHRlYW07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IDApe1xyXG4gICAgICAgICAgICAgICAgdGFuay5hbmdsZSA9IDkwO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSAxKXtcclxuICAgICAgICAgICAgICAgIHRhbmsuYW5nbGUgPSAxODA7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKGluZGV4ID09IDIpe1xyXG4gICAgICAgICAgICAgICAgdGFuay5hbmdsZSA9IDI3MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZih0YW5rQ3RybC5jb2xsaXNpb25UYW5rKHRhbmsuZ2V0Qm91bmRpbmdCb3goKSkpe1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8dGhpcy5ib3JuUG9zZXMubGVuZ3RoLTE7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFuay5wb3NpdGlvbiA9IHRoaXMuYm9yblBvc2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0YW5rQ3RybC5jb2xsaXNpb25UYW5rKHRhbmsuZ2V0Qm91bmRpbmdCb3goKSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRhbmsucGFyZW50ID0gdGhpcy50YW5rTm9kZTtcclxuICAgICAgICAgICAgLy/liqDliLDliJfooahcclxuICAgICAgICAgICAgY2MuZ2FtZURhdGEudGFua0xpc3QucHVzaCh0YW5rKTtcclxuICAgICAgICAgICAgdGhpcy5tYXhDb3VudCAtLTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHRhbmtCb29tOiBmdW5jdGlvbih0YW5rKSB7XHJcbiAgICAgICAgdGFuay5wYXJlbnQgPSBudWxsO1xyXG4gICAgICAgIHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKS5kaWUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMudGFua1Bvb2wucHV0KHRhbmspO1xyXG4gICAgICAgIGlmKGNjLmdhbWVEYXRhLnNpbmdsZSAmJiB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIikudGVhbSA9PSAwKXtcclxuICAgICAgICAgICAgdGhpcy5saWZlIC0tO1xyXG4gICAgICAgICAgICB0aGlzLmxpZmVOdW0uc3RyaW5nID0gdGhpcy5saWZlICsgXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGlmKHRoaXMubGlmZSA+IDApe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRQbGF5ZXJUYW5rKCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lT3ZlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKS5ibG9vZCA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRhbmsucGFyZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgdGFuay5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpLmRpZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMudGFua1Bvb2wucHV0KHRhbmspO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRhbmtOdW0gPSBOdW1iZXIodGhpcy5lbmVteU51bS5zdHJpbmcpIC0gMTtcclxuICAgICAgICAgICAgdGhpcy5lbmVteU51bS5zdHJpbmcgPSB0YW5rTnVtICsgXCJcIjtcclxuICAgICAgICAgICAgaWYodGFua051bSA9PSAwKXtcclxuICAgICAgICAgICAgICAgIGlmKGNjLmdhbWVEYXRhLmN1ckxldmVsIDwgMTApe1xyXG4gICAgICAgICAgICAgICAgICAgICsrY2MuZ2FtZURhdGEuY3VyTGV2ZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiQ2l0eVNjZW5lXCIrIGNjLmdhbWVEYXRhLmN1ckxldmVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb3VibGVGaXJlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQuc2hvdy5jYWxsKHRoaXMsIFwi5L2g6LWi5LqGXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiU3RhcnRTY2VuZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/lvIDngavmjInpkq7ngrnlh7tcclxuICAgIGZpcmVCdG5DbGljazogZnVuY3Rpb24oKXtcclxuICAgICAgICBpZih0aGlzLl9wbGF5ZXJUYW5rQ3RybC5zdGFydEZpcmUodGhpcy5idWxsZXRQb29sKSl7XHJcbiAgICAgICAgICAgIC8v5pKt5pS+5bCE5Ye76Z+z5pWIXHJcbiAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnBsYXkodGhpcy5fcGxheWVyVGFua0N0cmwuc2hvb3RBdWRpbywgZmFsc2UsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/plIDmr4Hml7bosIPnlKhcclxuICAgIG9uRGVzdHJveTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudW5zY2hlZHVsZSh0aGlzLmFkZEFJVGFuayx0aGlzKTtcclxuICAgIH0sXHJcbn0pO1xyXG4iXX0=