
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/CityScript.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7f0b08Dcw5F7oWFl36ggKRC', 'CityScript');
// scripts/CityScript.js

"use strict";

var TankType = require("TankData").tankType;

var alert = require('Alert');

cc.Class({
  "extends": cc.Component,
  properties: {
    //地图
    curMap: cc.TiledMap,
    //摇杆
    yaogan: cc.Node,
    //子弹预制体
    bullet: cc.Prefab,
    //坦克预制体
    tank: {
      "default": null,
      type: cc.Prefab
    },
    //最大数量
    maxCount: 10,
    life: 3,
    //出生地
    bornPoses: {
      "default": [],
      type: cc.Vec2
    },
    //坦克皮肤
    spriteFrames: {
      "default": [],
      type: cc.SpriteFrame
    },
    //坦克移动速度
    tankSpeeds: {
      "default": [],
      type: cc.Float
    },
    //坦克子弹发射间隔时间
    tankFireTimes: {
      "default": [],
      type: cc.Float
    },
    //坦克血量
    tankBloods: {
      "default": [],
      type: cc.Integer
    },
    enemyNum: {
      type: cc.Label,
      "default": null
    },
    lifeNum: {
      type: cc.Label,
      "default": null
    },
    doubleFire: false,
    doubleFireBtn: {
      "default": null,
      type: cc.Node
    },
    doubleFireFrames: {
      "default": [],
      type: cc.SpriteFrame
    }
  },
  // use this for initialization
  onLoad: function onLoad() {
    // cc.director.setDisplayStats(true);
    //获取摇杆控制组件
    this._joystickCtrl = this.yaogan.getComponent("JoystickCtrl"); //获取地图 TiledMap 组件

    this._tiledMap = this.curMap.getComponent('cc.TiledMap');
    this.enemyNum.string = this.maxCount + "";
    this.lifeNum.string = this.life + "";
  },
  start: function start(err) {
    if (err) {
      return;
    }

    alert.show.call(this, "关卡" + cc.gameData.curLevel, function () {}); //默认角度

    this.curAngle = null;
    var self = this; //注册监听事件

    this.registerInputEvent(); //引入地图数据

    this._tiledMapData = require("TiledMapData"); //获取地图尺寸

    this._curMapTileSize = this._tiledMap.getTileSize();
    this._curMapSize = cc.v2(this._tiledMap.node.width, this._tiledMap.node.height); //地图墙层

    this.mapLayer0 = this._tiledMap.getLayer("layer_0"); //初始化对象池(参数必须为对应脚本的文件名)

    this.bulletPool = new cc.NodePool("BulletScript");
    var initBulletCount = 20;

    for (var i = 0; i < initBulletCount; ++i) {
      var bullet = cc.instantiate(this.bullet);
      this.bulletPool.put(bullet);
    }

    this.tankPool = new cc.NodePool("TankScript");

    for (var i = 0; i < this.maxCount; ++i) {
      var tank = cc.instantiate(this.tank);
      this.tankPool.put(tank);
    }

    if (!cc.gameData) {
      cc.gameData = {};
    } //初始化


    cc.gameData.teamId = 0; //临时

    cc.gameData.single = true; //地图内坦克列表

    cc.gameData.tankList = []; //地图内子弹列表

    cc.gameData.bulletList = []; //获取组件
    //this.tankNode = cc.find("/Canvas/Map/tank");

    this.tankNode = cc.find("/Canvas/Map/layer_0"); //加入player

    this.player = this.addPlayerTank(); //获取坦克控制组件

    this._playerTankCtrl = this.player.getComponent("TankScript"); //启动定时器，添加坦克

    this.schedule(this.addAITank, 3, cc.macro.REPEAT_FOREVER, 1);
  },
  // called every frame, uncomment this function to activate update callback
  update: function update(dt) {
    if (this.doubleFire) {
      if (this._playerTankCtrl.startFire(this.bulletPool)) {//播放射击音效
        //cc.audioEngine.play(this._playerTankCtrl.shootAudio, false, 1);
      }
    }
  },
  setDoubleFire: function setDoubleFire() {
    this.doubleFire = !this.doubleFire;

    if (this.doubleFire) {
      this.doubleFireBtn.getComponent(cc.Sprite).spriteFrame = this.doubleFireFrames[1];
    } else {
      this.doubleFireBtn.getComponent(cc.Sprite).spriteFrame = this.doubleFireFrames[0];
    }
  },
  //注册输入事件
  registerInputEvent: function registerInputEvent() {
    var self = this;

    this._joystickCtrl.addJoyStickTouchChangeListener(function (angle) {
      if (angle == self.curAngle && !self._playerTankCtrl.stopMove) {
        return;
      }

      self.curAngle = angle;

      if (angle != null) {
        //开始前进
        self._playerTankCtrl.tankMoveStart(angle);
      } else {
        //停止前进
        self._playerTankCtrl.tankMoveStop();
      }
    }); //按键按下


    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, function (event) {
      var angle = null;

      switch (event.keyCode) {
        case cc.macro.KEY.w:
          angle = 90;
          break;

        case cc.macro.KEY.s:
          angle = 270;
          break;

        case cc.macro.KEY.a:
          angle = 180;
          break;

        case cc.macro.KEY.d:
          angle = 0;
          break;
      }

      if (event.keyCode == cc.macro.KEY.k) {
        this.fireBtnClick();
      } else {
        self._playerTankCtrl.tankMoveStop();
      }

      if (angle != null) {
        //开始前进
        self._playerTankCtrl.tankMoveStart(angle);
      }
    }, this); //按键抬起

    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, function (event) {
      //停止前进
      if (event.keyCode != cc.macro.KEY.k) {
        self._playerTankCtrl.tankMoveStop();
      }
    }, this);
  },
  //碰撞检测
  collisionTest: function collisionTest(rect, bullet) {
    //判断是否碰到地图边界
    if (rect.xMin <= -this._curMapSize.x / 2 || rect.xMax >= this._curMapSize.x / 2 || rect.yMin <= -this._curMapSize.y / 2 || rect.yMax >= this._curMapSize.y / 2) {
      return true;
    } //判断是否撞墙
    //将坐标转换为地图坐标系


    var MinY = this._curMapSize.y / 2 - rect.yMin;
    var MaxY = this._curMapSize.y / 2 - rect.yMax;
    var MinX = this._curMapSize.x / 2 + rect.xMin;
    var MaxX = this._curMapSize.x / 2 + rect.xMax; //获取四个角的顶点

    var LeftDown = cc.v2(MinX, MinY);
    var RightDown = cc.v2(MaxX, MinY);
    var LeftUp = cc.v2(MinX, MaxY);
    var RightUp = cc.v2(MaxX, MaxY); //获取四条边的中心点

    var MidDown = cc.v2(MinX + (MaxX - MinX) / 2, MinY);
    var MidUp = cc.v2(MinX + (MaxX - MinX) / 2, MaxY);
    var MidLeft = cc.v2(MinX, MinY + (MaxY - MinY) / 2);
    var MidRight = cc.v2(MaxX, MinY + (MaxY - MinY) / 2); //检测碰撞

    return this._collisionTest([LeftDown, RightDown, LeftUp, RightUp, MidDown, MidUp, MidLeft, MidRight], bullet);
  },
  //内部碰撞检测方法
  _collisionTest: function _collisionTest(points, bullet) {
    var point = points.shift();
    var gid = this.mapLayer0.getTileGIDAt(cc.v2(parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height)));

    if (this._tiledMapData.gidToTileType[gid] != this._tiledMapData.tileType.tileNone && this._tiledMapData.gidToTileType[gid] != this._tiledMapData.tileType.tileGrass) {
      if (bullet && this._tiledMapData.gidToTileType[gid] == this._tiledMapData.tileType.tileWall) {
        this.mapLayer0.setTileGIDAt(0, parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height), 1);
      } else if (bullet && this._tiledMapData.gidToTileType[gid] == this._tiledMapData.tileType.tileKing) {
        this.mapLayer0.setTileGIDAt(0, 12, 25, 1);
        this.mapLayer0.setTileGIDAt(0, 12, 24, 1);
        this.mapLayer0.setTileGIDAt(0, 13, 25, 1);
        this.mapLayer0.setTileGIDAt(0, 13, 24, 1);
        this.gameOver();
      }

      return true;
    }

    if (points.length > 0) {
      return this._collisionTest(points, bullet);
    } else {
      return false;
    }
  },
  gameOver: function gameOver() {
    this.doubleFire = false;

    for (var i = 0; i < cc.gameData.tankList.length; i++) {
      var tank = cc.gameData.tankList[i];
      var tankCtrl = tank.getComponent("TankScript");
      tankCtrl.tankStop();
    } //弹窗调用


    alert.show.call(this, "游戏结束", function () {
      cc.director.loadScene("StartScene");
    });
  },
  //加入玩家坦克
  addPlayerTank: function addPlayerTank(team) {
    if (this.tankPool.size() > 0) {
      var tank = this.tankPool.get();
      tank.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[this.spriteFrames.length - 1];
      tank.position = this.bornPoses[this.bornPoses.length - 1]; //获取坦克控制组件

      var tankCtrl = tank.getComponent("TankScript"); //设置坦克属性

      tankCtrl.tankType = TankType.Player;
      tankCtrl.speed = this.tankSpeeds[this.tankSpeeds.length - 1];
      tankCtrl.fireTime = this.tankFireTimes[this.tankFireTimes.length - 1]; //tankCtrl.blood = this.tankBloods[this.tankBloods.length-1];
      //tankCtrl.blood = this.life ;

      tankCtrl.blood = 1;
      tankCtrl.die = false;

      if (!team) {
        if (cc.gameData.single) {
          //单机版
          tankCtrl.team = 0;
        } else {
          //大乱斗
          tankCtrl.team = ++cc.gameData.teamId;
        }
      } else {
        //组队
        tankCtrl.team = team;
      }

      tank.parent = this.tankNode; //加到列表

      cc.gameData.tankList.push(tank);
      return tank;
    }

    return null;
  },
  //加入AI
  addAITank: function addAITank(dt, team) {
    if (this.tankPool.size() > 0 && this.maxCount > 0) {
      var tank = this.tankPool.get();
      var index = parseInt(Math.random() * 3, 10); //获取坦克控制组件

      var tankCtrl = tank.getComponent("TankScript"); //设置坦克属性

      tank.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[index];
      tank.position = this.bornPoses[index];
      tankCtrl.tankType = index;
      tankCtrl.speed = this.tankSpeeds[index];
      tankCtrl.fireTime = this.tankFireTimes[index];
      tankCtrl.blood = this.tankBloods[index];
      tankCtrl.die = false;

      if (!team) {
        if (cc.gameData.single) {
          //单机版
          tankCtrl.team = 1;
        } else {
          //大乱斗
          tankCtrl.team = ++cc.gameData.teamId;
        }
      } else {
        //组队
        tankCtrl.team = team;
      }

      if (index == 0) {
        tank.angle = 90;
      } else if (index == 1) {
        tank.angle = 180;
      } else if (index == 2) {
        tank.angle = 270;
      }

      if (tankCtrl.collisionTank(tank.getBoundingBox())) {
        for (var i = 0; i < this.bornPoses.length - 1; i++) {
          tank.position = this.bornPoses[i];

          if (!tankCtrl.collisionTank(tank.getBoundingBox())) {
            break;
          }
        }
      }

      tank.parent = this.tankNode; //加到列表

      cc.gameData.tankList.push(tank);
      this.maxCount--;
    }
  },
  tankBoom: function tankBoom(tank) {
    tank.parent = null;
    tank.getComponent("TankScript").die = true;
    this.tankPool.put(tank);

    if (cc.gameData.single && tank.getComponent("TankScript").team == 0) {
      this.life--;
      this.lifeNum.string = this.life + "";

      if (this.life > 0) {
        this.addPlayerTank();
      } else {
        this.gameOver();
      } // tank.getComponent("TankScript").blood = 1;

    } else {
      // tank.parent = null;
      // tank.getComponent("TankScript").die = true;
      // this.tankPool.put(tank);
      var tankNum = Number(this.enemyNum.string) - 1;
      this.enemyNum.string = tankNum + "";

      if (tankNum == 0) {
        if (cc.gameData.curLevel < 10) {
          ++cc.gameData.curLevel;
          cc.director.loadScene("CityScene" + cc.gameData.curLevel);
        } else {
          this.doubleFire = false;
          alert.show.call(this, "你赢了", function () {
            cc.director.loadScene("StartScene");
          });
        }
      }
    }
  },
  //开火按钮点击
  fireBtnClick: function fireBtnClick() {
    if (this._playerTankCtrl.startFire(this.bulletPool)) {
      //播放射击音效
      cc.audioEngine.play(this._playerTankCtrl.shootAudio, false, 1);
    }
  },
  //销毁时调用
  onDestroy: function onDestroy() {
    this.unschedule(this.addAITank, this);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL0NpdHlTY3JpcHQuanMiXSwibmFtZXMiOlsiVGFua1R5cGUiLCJyZXF1aXJlIiwidGFua1R5cGUiLCJhbGVydCIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiY3VyTWFwIiwiVGlsZWRNYXAiLCJ5YW9nYW4iLCJOb2RlIiwiYnVsbGV0IiwiUHJlZmFiIiwidGFuayIsInR5cGUiLCJtYXhDb3VudCIsImxpZmUiLCJib3JuUG9zZXMiLCJWZWMyIiwic3ByaXRlRnJhbWVzIiwiU3ByaXRlRnJhbWUiLCJ0YW5rU3BlZWRzIiwiRmxvYXQiLCJ0YW5rRmlyZVRpbWVzIiwidGFua0Jsb29kcyIsIkludGVnZXIiLCJlbmVteU51bSIsIkxhYmVsIiwibGlmZU51bSIsImRvdWJsZUZpcmUiLCJkb3VibGVGaXJlQnRuIiwiZG91YmxlRmlyZUZyYW1lcyIsIm9uTG9hZCIsIl9qb3lzdGlja0N0cmwiLCJnZXRDb21wb25lbnQiLCJfdGlsZWRNYXAiLCJzdHJpbmciLCJzdGFydCIsImVyciIsInNob3ciLCJjYWxsIiwiZ2FtZURhdGEiLCJjdXJMZXZlbCIsImN1ckFuZ2xlIiwic2VsZiIsInJlZ2lzdGVySW5wdXRFdmVudCIsIl90aWxlZE1hcERhdGEiLCJfY3VyTWFwVGlsZVNpemUiLCJnZXRUaWxlU2l6ZSIsIl9jdXJNYXBTaXplIiwidjIiLCJub2RlIiwid2lkdGgiLCJoZWlnaHQiLCJtYXBMYXllcjAiLCJnZXRMYXllciIsImJ1bGxldFBvb2wiLCJOb2RlUG9vbCIsImluaXRCdWxsZXRDb3VudCIsImkiLCJpbnN0YW50aWF0ZSIsInB1dCIsInRhbmtQb29sIiwidGVhbUlkIiwic2luZ2xlIiwidGFua0xpc3QiLCJidWxsZXRMaXN0IiwidGFua05vZGUiLCJmaW5kIiwicGxheWVyIiwiYWRkUGxheWVyVGFuayIsIl9wbGF5ZXJUYW5rQ3RybCIsInNjaGVkdWxlIiwiYWRkQUlUYW5rIiwibWFjcm8iLCJSRVBFQVRfRk9SRVZFUiIsInVwZGF0ZSIsImR0Iiwic3RhcnRGaXJlIiwic2V0RG91YmxlRmlyZSIsIlNwcml0ZSIsInNwcml0ZUZyYW1lIiwiYWRkSm95U3RpY2tUb3VjaENoYW5nZUxpc3RlbmVyIiwiYW5nbGUiLCJzdG9wTW92ZSIsInRhbmtNb3ZlU3RhcnQiLCJ0YW5rTW92ZVN0b3AiLCJzeXN0ZW1FdmVudCIsIm9uIiwiU3lzdGVtRXZlbnQiLCJFdmVudFR5cGUiLCJLRVlfRE9XTiIsImV2ZW50Iiwia2V5Q29kZSIsIktFWSIsInciLCJzIiwiYSIsImQiLCJrIiwiZmlyZUJ0bkNsaWNrIiwiS0VZX1VQIiwiY29sbGlzaW9uVGVzdCIsInJlY3QiLCJ4TWluIiwieCIsInhNYXgiLCJ5TWluIiwieSIsInlNYXgiLCJNaW5ZIiwiTWF4WSIsIk1pblgiLCJNYXhYIiwiTGVmdERvd24iLCJSaWdodERvd24iLCJMZWZ0VXAiLCJSaWdodFVwIiwiTWlkRG93biIsIk1pZFVwIiwiTWlkTGVmdCIsIk1pZFJpZ2h0IiwiX2NvbGxpc2lvblRlc3QiLCJwb2ludHMiLCJwb2ludCIsInNoaWZ0IiwiZ2lkIiwiZ2V0VGlsZUdJREF0IiwicGFyc2VJbnQiLCJnaWRUb1RpbGVUeXBlIiwidGlsZVR5cGUiLCJ0aWxlTm9uZSIsInRpbGVHcmFzcyIsInRpbGVXYWxsIiwic2V0VGlsZUdJREF0IiwidGlsZUtpbmciLCJnYW1lT3ZlciIsImxlbmd0aCIsInRhbmtDdHJsIiwidGFua1N0b3AiLCJkaXJlY3RvciIsImxvYWRTY2VuZSIsInRlYW0iLCJzaXplIiwiZ2V0IiwicG9zaXRpb24iLCJQbGF5ZXIiLCJzcGVlZCIsImZpcmVUaW1lIiwiYmxvb2QiLCJkaWUiLCJwYXJlbnQiLCJwdXNoIiwiaW5kZXgiLCJNYXRoIiwicmFuZG9tIiwiY29sbGlzaW9uVGFuayIsImdldEJvdW5kaW5nQm94IiwidGFua0Jvb20iLCJ0YW5rTnVtIiwiTnVtYmVyIiwiYXVkaW9FbmdpbmUiLCJwbGF5Iiwic2hvb3RBdWRpbyIsIm9uRGVzdHJveSIsInVuc2No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QUE0RCxDQUE1RDtBQUNIO0FBQ0osR0FqYkk7QUFtYkw7QUFDQUMsRUFBQUEsU0FBUyxFQUFFLHFCQUFZO0FBQ25CLFNBQUtDLFVBQUwsQ0FBZ0IsS0FBSzVGLFNBQXJCLEVBQStCLElBQS9CO0FBQ0g7QUF0YkksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFRhbmtUeXBlID0gcmVxdWlyZShcIlRhbmtEYXRhXCIpLnRhbmtUeXBlO1xubGV0IGFsZXJ0ID0gcmVxdWlyZSgnQWxlcnQnKTtcblxuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuXG4gICAgICAgIC8v5Zyw5Zu+XG4gICAgICAgIGN1ck1hcDogY2MuVGlsZWRNYXAsXG4gICAgICAgIC8v5pGH5p2GXG4gICAgICAgIHlhb2dhbjogY2MuTm9kZSxcblxuICAgICAgICAvL+WtkOW8uemihOWItuS9k1xuICAgICAgICBidWxsZXQ6IGNjLlByZWZhYixcbiAgICAgICAgLy/lnablhYvpooTliLbkvZNcbiAgICAgICAgdGFuazoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLlByZWZhYixcbiAgICAgICAgfSxcbiAgICAgICAgLy/mnIDlpKfmlbDph49cbiAgICAgICAgbWF4Q291bnQ6IDEwLFxuICAgICAgICBsaWZlOiAzLFxuICAgICAgICAvL+WHuueUn+WcsFxuICAgICAgICBib3JuUG9zZXM6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogY2MuVmVjMixcbiAgICAgICAgfSxcbiAgICAgICAgLy/lnablhYvnmq7ogqRcbiAgICAgICAgc3ByaXRlRnJhbWVzOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcbiAgICAgICAgICAgIHR5cGU6IGNjLlNwcml0ZUZyYW1lLFxuICAgICAgICB9LFxuICAgICAgICAvL+WdpuWFi+enu+WKqOmAn+W6plxuICAgICAgICB0YW5rU3BlZWRzOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcbiAgICAgICAgICAgIHR5cGU6IGNjLkZsb2F0LFxuICAgICAgICB9LFxuICAgICAgICAvL+WdpuWFi+WtkOW8ueWPkeWwhOmXtOmalOaXtumXtFxuICAgICAgICB0YW5rRmlyZVRpbWVzOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcbiAgICAgICAgICAgIHR5cGU6IGNjLkZsb2F0LFxuICAgICAgICB9LFxuXG4gICAgICAgIC8v5Z2m5YWL6KGA6YePXG4gICAgICAgIHRhbmtCbG9vZHM6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogY2MuSW50ZWdlcixcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGVuZW15TnVtOiB7XG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbCxcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgIH0sXG4gICAgICAgIGxpZmVOdW06IHtcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsLFxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgICAgZG91YmxlRmlyZTogZmFsc2UsXG4gICAgICAgIGRvdWJsZUZpcmVCdG46IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG4gICAgICAgIGRvdWJsZUZpcmVGcmFtZXM6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXG4gICAgICAgIH0sXG5cbiAgICB9LFxuXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGNjLmRpcmVjdG9yLnNldERpc3BsYXlTdGF0cyh0cnVlKTtcbiAgICAgICAgLy/ojrflj5bmkYfmnYbmjqfliLbnu4Tku7ZcbiAgICAgICAgdGhpcy5fam95c3RpY2tDdHJsID0gdGhpcy55YW9nYW4uZ2V0Q29tcG9uZW50KFwiSm95c3RpY2tDdHJsXCIpO1xuICAgICAgICAvL+iOt+WPluWcsOWbviBUaWxlZE1hcCDnu4Tku7ZcbiAgICAgICAgdGhpcy5fdGlsZWRNYXAgPSB0aGlzLmN1ck1hcC5nZXRDb21wb25lbnQoJ2NjLlRpbGVkTWFwJyk7XG4gICAgICAgIHRoaXMuZW5lbXlOdW0uc3RyaW5nID0gdGhpcy5tYXhDb3VudCArIFwiXCI7XG4gICAgICAgIHRoaXMubGlmZU51bS5zdHJpbmcgPSB0aGlzLmxpZmUgKyBcIlwiO1xuICAgIH0sXG5cbiAgICBzdGFydDogZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgaWYoZXJyKXtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGFsZXJ0LnNob3cuY2FsbCh0aGlzLCBcIuWFs+WNoVwiICsgY2MuZ2FtZURhdGEuY3VyTGV2ZWwsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcblxuICAgICAgICAvL+m7mOiupOinkuW6plxuICAgICAgICB0aGlzLmN1ckFuZ2xlID0gbnVsbDtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIC8v5rOo5YaM55uR5ZCs5LqL5Lu2XG4gICAgICAgIHRoaXMucmVnaXN0ZXJJbnB1dEV2ZW50KCk7XG4gICAgICAgIC8v5byV5YWl5Zyw5Zu+5pWw5o2uXG4gICAgICAgIHRoaXMuX3RpbGVkTWFwRGF0YSA9IHJlcXVpcmUoXCJUaWxlZE1hcERhdGFcIik7XG5cbiAgICAgICAgLy/ojrflj5blnLDlm77lsLrlr7hcbiAgICAgICAgdGhpcy5fY3VyTWFwVGlsZVNpemUgPSB0aGlzLl90aWxlZE1hcC5nZXRUaWxlU2l6ZSgpO1xuICAgICAgICB0aGlzLl9jdXJNYXBTaXplID0gY2MudjIodGhpcy5fdGlsZWRNYXAubm9kZS53aWR0aCx0aGlzLl90aWxlZE1hcC5ub2RlLmhlaWdodCk7XG4gICAgICAgIFxuICAgICAgICAvL+WcsOWbvuWimeWxglxuICAgICAgICB0aGlzLm1hcExheWVyMCA9IHRoaXMuX3RpbGVkTWFwLmdldExheWVyKFwibGF5ZXJfMFwiKTtcblxuICAgICAgICAvL+WIneWni+WMluWvueixoeaxoCjlj4LmlbDlv4XpobvkuLrlr7nlupTohJrmnKznmoTmlofku7blkI0pXG4gICAgICAgIHRoaXMuYnVsbGV0UG9vbCA9IG5ldyBjYy5Ob2RlUG9vbChcIkJ1bGxldFNjcmlwdFwiKTtcbiAgICAgICAgdmFyIGluaXRCdWxsZXRDb3VudCA9IDIwO1xuICAgICAgICBmb3IodmFyIGk9MDsgaTxpbml0QnVsbGV0Q291bnQ7ICsraSl7XG4gICAgICAgICAgICB2YXIgYnVsbGV0ID0gY2MuaW5zdGFudGlhdGUodGhpcy5idWxsZXQpO1xuICAgICAgICAgICAgdGhpcy5idWxsZXRQb29sLnB1dChidWxsZXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFua1Bvb2wgPSBuZXcgY2MuTm9kZVBvb2woXCJUYW5rU2NyaXB0XCIpO1xuICAgICAgICBmb3IodmFyIGk9MDsgaTx0aGlzLm1heENvdW50OyArK2kpe1xuICAgICAgICAgICAgdmFyIHRhbmsgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnRhbmspO1xuICAgICAgICAgICAgdGhpcy50YW5rUG9vbC5wdXQodGFuayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoIWNjLmdhbWVEYXRhKXtcbiAgICAgICAgICAgIGNjLmdhbWVEYXRhID0ge307XG4gICAgICAgIH1cbiAgICAgICAgLy/liJ3lp4vljJZcbiAgICAgICAgY2MuZ2FtZURhdGEudGVhbUlkID0gMDtcbiAgICAgICAgLy/kuLTml7ZcbiAgICAgICAgY2MuZ2FtZURhdGEuc2luZ2xlID0gdHJ1ZTtcblxuICAgICAgICAvL+WcsOWbvuWGheWdpuWFi+WIl+ihqFxuICAgICAgICBjYy5nYW1lRGF0YS50YW5rTGlzdCA9IFtdO1xuICAgICAgICAvL+WcsOWbvuWGheWtkOW8ueWIl+ihqFxuICAgICAgICBjYy5nYW1lRGF0YS5idWxsZXRMaXN0ID0gW107XG5cbiAgICAgICAgLy/ojrflj5bnu4Tku7ZcbiAgICAgICAgLy90aGlzLnRhbmtOb2RlID0gY2MuZmluZChcIi9DYW52YXMvTWFwL3RhbmtcIik7XG4gICAgICAgIHRoaXMudGFua05vZGUgPSBjYy5maW5kKFwiL0NhbnZhcy9NYXAvbGF5ZXJfMFwiKTtcbiAgICAgICAgLy/liqDlhaVwbGF5ZXJcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSB0aGlzLmFkZFBsYXllclRhbmsoKTtcbiAgICAgICAgLy/ojrflj5blnablhYvmjqfliLbnu4Tku7ZcbiAgICAgICAgdGhpcy5fcGxheWVyVGFua0N0cmwgPSB0aGlzLnBsYXllci5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpOyBcblxuICAgICAgICAvL+WQr+WKqOWumuaXtuWZqO+8jOa3u+WKoOWdpuWFi1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHRoaXMuYWRkQUlUYW5rLDMsY2MubWFjcm8uUkVQRUFUX0ZPUkVWRVIsMSk7XG4gICAgICAgIFxuICAgIH0sXG5cbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XG4gICAgICAgIGlmKHRoaXMuZG91YmxlRmlyZSl7XG4gICAgICAgICAgICBpZih0aGlzLl9wbGF5ZXJUYW5rQ3RybC5zdGFydEZpcmUodGhpcy5idWxsZXRQb29sKSl7XG4gICAgICAgICAgICAgICAgLy/mkq3mlL7lsITlh7vpn7PmlYhcbiAgICAgICAgICAgICAgICAvL2NjLmF1ZGlvRW5naW5lLnBsYXkodGhpcy5fcGxheWVyVGFua0N0cmwuc2hvb3RBdWRpbywgZmFsc2UsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIHNldERvdWJsZUZpcmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kb3VibGVGaXJlID0gIXRoaXMuZG91YmxlRmlyZTtcbiAgICAgICAgXG4gICAgICAgIGlmKHRoaXMuZG91YmxlRmlyZSl7XG4gICAgICAgICAgICB0aGlzLmRvdWJsZUZpcmVCdG4uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmRvdWJsZUZpcmVGcmFtZXNbMV07XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5kb3VibGVGaXJlQnRuLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gdGhpcy5kb3VibGVGaXJlRnJhbWVzWzBdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH0sXG5cbiAgICAvL+azqOWGjOi+k+WFpeS6i+S7tlxuICAgIHJlZ2lzdGVySW5wdXRFdmVudDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB0aGlzLl9qb3lzdGlja0N0cmwuYWRkSm95U3RpY2tUb3VjaENoYW5nZUxpc3RlbmVyKGZ1bmN0aW9uIChhbmdsZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihhbmdsZSA9PSBzZWxmLmN1ckFuZ2xlICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuX3BsYXllclRhbmtDdHJsLnN0b3BNb3ZlICl7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZi5jdXJBbmdsZSA9IGFuZ2xlO1xuXG4gICAgICAgICAgICBpZihhbmdsZSE9bnVsbCl7XG4gICAgICAgICAgICAgICAgLy/lvIDlp4vliY3ov5tcbiAgICAgICAgICAgICAgICBzZWxmLl9wbGF5ZXJUYW5rQ3RybC50YW5rTW92ZVN0YXJ0KGFuZ2xlKTtcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAvL+WBnOatouWJjei/m1xuICAgICAgICAgICAgICAgIHNlbGYuX3BsYXllclRhbmtDdHJsLnRhbmtNb3ZlU3RvcCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgICAgICAvL+aMiemUruaMieS4i1xuICAgICAgICBjYy5zeXN0ZW1FdmVudC5vbihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX0RPV04sIFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuZ2xlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goZXZlbnQua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGNjLm1hY3JvLktFWS53OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSA5MDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGNjLm1hY3JvLktFWS5zOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSAyNzA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBjYy5tYWNyby5LRVkuYTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gMTgwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgY2MubWFjcm8uS0VZLmQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXZlbnQua2V5Q29kZSA9PSBjYy5tYWNyby5LRVkuayl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyZUJ0bkNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wbGF5ZXJUYW5rQ3RybC50YW5rTW92ZVN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5nbGUhPW51bGwpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W8gOWni+WJjei/m1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wbGF5ZXJUYW5rQ3RybC50YW5rTW92ZVN0YXJ0KGFuZ2xlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgLy/mjInplK7miqzotbdcbiAgICAgICAgY2Muc3lzdGVtRXZlbnQub24oY2MuU3lzdGVtRXZlbnQuRXZlbnRUeXBlLktFWV9VUCwgXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5YGc5q2i5YmN6L+bXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXZlbnQua2V5Q29kZSAhPSBjYy5tYWNyby5LRVkuayl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3BsYXllclRhbmtDdHJsLnRhbmtNb3ZlU3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMpO1xuXG4gICAgfSxcblxuICAgIC8v56Kw5pKe5qOA5rWLXG4gICAgY29sbGlzaW9uVGVzdDogZnVuY3Rpb24ocmVjdCwgYnVsbGV0KXtcbiAgICAgICAgLy/liKTmlq3mmK/lkKbnorDliLDlnLDlm77ovrnnlYxcbiAgICAgICAgaWYgKHJlY3QueE1pbiA8PSAtdGhpcy5fY3VyTWFwU2l6ZS54LzIgfHwgcmVjdC54TWF4ID49IHRoaXMuX2N1ck1hcFNpemUueC8yIHx8XG5cdFx0ICAgIHJlY3QueU1pbiA8PSAtdGhpcy5fY3VyTWFwU2l6ZS55LzIgfHwgcmVjdC55TWF4ID49IHRoaXMuX2N1ck1hcFNpemUueS8yKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8v5Yik5pat5piv5ZCm5pKe5aKZXG4gICAgICAgIC8v5bCG5Z2Q5qCH6L2s5o2i5Li65Zyw5Zu+5Z2Q5qCH57O7XG4gICAgICAgIHZhciBNaW5ZID0gdGhpcy5fY3VyTWFwU2l6ZS55LzIgLSByZWN0LnlNaW47XG5cdCAgICB2YXIgTWF4WSA9IHRoaXMuX2N1ck1hcFNpemUueS8yIC0gcmVjdC55TWF4O1xuICAgICAgICB2YXIgTWluWCA9IHRoaXMuX2N1ck1hcFNpemUueC8yICsgcmVjdC54TWluO1xuICAgICAgICB2YXIgTWF4WCA9IHRoaXMuX2N1ck1hcFNpemUueC8yICsgcmVjdC54TWF4O1xuXG4gICAgICAgIC8v6I635Y+W5Zub5Liq6KeS55qE6aG254K5XG4gICAgICAgIHZhciBMZWZ0RG93biA9IGNjLnYyKE1pblgsIE1pblkpO1xuICAgICAgICB2YXIgUmlnaHREb3duID0gY2MudjIoTWF4WCwgTWluWSk7XG4gICAgICAgIHZhciBMZWZ0VXAgPSBjYy52MihNaW5YLCBNYXhZKTtcbiAgICAgICAgdmFyIFJpZ2h0VXAgPSBjYy52MihNYXhYLCBNYXhZKTtcblxuICAgICAgICAvL+iOt+WPluWbm+adoei+ueeahOS4reW/g+eCuVxuICAgICAgICB2YXIgTWlkRG93biA9IGNjLnYyKE1pblgrKE1heFgtTWluWCkvMiwgTWluWSk7XG4gICAgICAgIHZhciBNaWRVcCA9IGNjLnYyKE1pblgrKE1heFgtTWluWCkvMiwgTWF4WSk7XG4gICAgICAgIHZhciBNaWRMZWZ0ID0gY2MudjIoTWluWCwgTWluWSsoTWF4WS1NaW5ZKS8yKTtcbiAgICAgICAgdmFyIE1pZFJpZ2h0PSBjYy52MihNYXhYLCBNaW5ZKyhNYXhZLU1pblkpLzIpO1xuXG4gICAgICAgIC8v5qOA5rWL56Kw5pKeXG4gICAgICAgIHJldHVybiB0aGlzLl9jb2xsaXNpb25UZXN0KFtMZWZ0RG93bixSaWdodERvd24sTGVmdFVwLFJpZ2h0VXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBNaWREb3duLE1pZFVwLE1pZExlZnQsTWlkUmlnaHRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0KTtcbiAgICB9LFxuXG4gICAgLy/lhoXpg6jnorDmkp7mo4DmtYvmlrnms5VcbiAgICBfY29sbGlzaW9uVGVzdDogZnVuY3Rpb24ocG9pbnRzLCBidWxsZXQpe1xuICAgICAgICB2YXIgcG9pbnQgPSBwb2ludHMuc2hpZnQoKVxuICAgICAgICB2YXIgZ2lkID0gdGhpcy5tYXBMYXllcjAuZ2V0VGlsZUdJREF0KGNjLnYyKHBhcnNlSW50KHBvaW50LnggLyB0aGlzLl9jdXJNYXBUaWxlU2l6ZS53aWR0aCkscGFyc2VJbnQocG9pbnQueSAvIHRoaXMuX2N1ck1hcFRpbGVTaXplLmhlaWdodCkpKTtcblxuICAgICAgICBpZiAodGhpcy5fdGlsZWRNYXBEYXRhLmdpZFRvVGlsZVR5cGVbZ2lkXSAhPSB0aGlzLl90aWxlZE1hcERhdGEudGlsZVR5cGUudGlsZU5vbmUgJiYgXG4gICAgICAgICAgICB0aGlzLl90aWxlZE1hcERhdGEuZ2lkVG9UaWxlVHlwZVtnaWRdICE9IHRoaXMuX3RpbGVkTWFwRGF0YS50aWxlVHlwZS50aWxlR3Jhc3Mpe1xuICAgICAgICAgICAgaWYoYnVsbGV0ICYmIHRoaXMuX3RpbGVkTWFwRGF0YS5naWRUb1RpbGVUeXBlW2dpZF0gPT0gdGhpcy5fdGlsZWRNYXBEYXRhLnRpbGVUeXBlLnRpbGVXYWxsKXtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcExheWVyMC5zZXRUaWxlR0lEQXQoMCwgcGFyc2VJbnQocG9pbnQueCAvIHRoaXMuX2N1ck1hcFRpbGVTaXplLndpZHRoKSxwYXJzZUludChwb2ludC55IC8gdGhpcy5fY3VyTWFwVGlsZVNpemUuaGVpZ2h0KSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKGJ1bGxldCAmJiB0aGlzLl90aWxlZE1hcERhdGEuZ2lkVG9UaWxlVHlwZVtnaWRdID09IHRoaXMuX3RpbGVkTWFwRGF0YS50aWxlVHlwZS50aWxlS2luZyl7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5tYXBMYXllcjAuc2V0VGlsZUdJREF0KDAsIDEyLCAyNSwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXBMYXllcjAuc2V0VGlsZUdJREF0KDAsIDEyLCAyNCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXBMYXllcjAuc2V0VGlsZUdJREF0KDAsIDEzLCAyNSwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXBMYXllcjAuc2V0VGlsZUdJREF0KDAsIDEzLCAyNCwgMSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVPdmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZihwb2ludHMubGVuZ3RoPjApe1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbGxpc2lvblRlc3QocG9pbnRzLCBidWxsZXQpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnYW1lT3ZlcjogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5kb3VibGVGaXJlID0gZmFsc2U7XG4gICAgICAgIGZvcih2YXIgaT0wOyBpPGNjLmdhbWVEYXRhLnRhbmtMaXN0Lmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIHZhciB0YW5rID0gY2MuZ2FtZURhdGEudGFua0xpc3RbaV1cbiAgICAgICAgICAgIHZhciB0YW5rQ3RybCA9IHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKTtcbiAgICAgICAgICAgIHRhbmtDdHJsLnRhbmtTdG9wKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvL+W8ueeql+iwg+eUqFxuICAgICAgICBhbGVydC5zaG93LmNhbGwodGhpcywgXCLmuLjmiI/nu5PmnZ9cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiU3RhcnRTY2VuZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8v5Yqg5YWl546p5a625Z2m5YWLXG4gICAgYWRkUGxheWVyVGFuazogZnVuY3Rpb24odGVhbSkge1xuICAgICAgICBpZih0aGlzLnRhbmtQb29sLnNpemUoKT4wKXtcbiAgICAgICAgICAgIHZhciB0YW5rID0gdGhpcy50YW5rUG9vbC5nZXQoKTtcbiAgICAgICAgICAgIHRhbmsuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLnNwcml0ZUZyYW1lc1t0aGlzLnNwcml0ZUZyYW1lcy5sZW5ndGgtMV07XG4gICAgICAgICAgICB0YW5rLnBvc2l0aW9uID0gdGhpcy5ib3JuUG9zZXNbdGhpcy5ib3JuUG9zZXMubGVuZ3RoLTFdO1xuICAgICAgICAgICAgLy/ojrflj5blnablhYvmjqfliLbnu4Tku7ZcbiAgICAgICAgICAgIHZhciB0YW5rQ3RybCA9IHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKTtcbiAgICAgICAgICAgIC8v6K6+572u5Z2m5YWL5bGe5oCnXG4gICAgICAgICAgICB0YW5rQ3RybC50YW5rVHlwZSA9IFRhbmtUeXBlLlBsYXllcjtcbiAgICAgICAgICAgIHRhbmtDdHJsLnNwZWVkID0gdGhpcy50YW5rU3BlZWRzW3RoaXMudGFua1NwZWVkcy5sZW5ndGgtMV07XG4gICAgICAgICAgICB0YW5rQ3RybC5maXJlVGltZSA9IHRoaXMudGFua0ZpcmVUaW1lc1t0aGlzLnRhbmtGaXJlVGltZXMubGVuZ3RoLTFdO1xuICAgICAgICAgICAgLy90YW5rQ3RybC5ibG9vZCA9IHRoaXMudGFua0Jsb29kc1t0aGlzLnRhbmtCbG9vZHMubGVuZ3RoLTFdO1xuICAgICAgICAgICAgLy90YW5rQ3RybC5ibG9vZCA9IHRoaXMubGlmZSA7XG4gICAgICAgICAgICB0YW5rQ3RybC5ibG9vZCA9IDE7XG4gICAgICAgICAgICB0YW5rQ3RybC5kaWUgPSBmYWxzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoIXRlYW0pe1xuICAgICAgICAgICAgICAgIGlmKGNjLmdhbWVEYXRhLnNpbmdsZSl7XG4gICAgICAgICAgICAgICAgICAgIC8v5Y2V5py654mIXG4gICAgICAgICAgICAgICAgICAgIHRhbmtDdHJsLnRlYW0gPSAwO1xuICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy/lpKfkubHmlpdcbiAgICAgICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9ICsrY2MuZ2FtZURhdGEudGVhbUlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAvL+e7hOmYn1xuICAgICAgICAgICAgICAgIHRhbmtDdHJsLnRlYW0gPSB0ZWFtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0YW5rLnBhcmVudCA9IHRoaXMudGFua05vZGU7XG4gICAgICAgICAgICAvL+WKoOWIsOWIl+ihqFxuICAgICAgICAgICAgY2MuZ2FtZURhdGEudGFua0xpc3QucHVzaCh0YW5rKTtcbiAgICAgICAgICAgIHJldHVybiB0YW5rO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvL+WKoOWFpUFJXG4gICAgYWRkQUlUYW5rOiBmdW5jdGlvbihkdCwgdGVhbSkge1xuICAgICAgICBpZih0aGlzLnRhbmtQb29sLnNpemUoKT4wICYmIHRoaXMubWF4Q291bnQgPiAwKXtcbiAgICAgICAgICAgIHZhciB0YW5rID0gdGhpcy50YW5rUG9vbC5nZXQoKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlSW50KE1hdGgucmFuZG9tKCkqMywgMTApO1xuICAgICAgICAgICAgLy/ojrflj5blnablhYvmjqfliLbnu4Tku7ZcbiAgICAgICAgICAgIHZhciB0YW5rQ3RybCA9IHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKTtcbiAgICAgICAgICAgIC8v6K6+572u5Z2m5YWL5bGe5oCnXG4gICAgICAgICAgICB0YW5rLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gdGhpcy5zcHJpdGVGcmFtZXNbaW5kZXhdO1xuICAgICAgICAgICAgdGFuay5wb3NpdGlvbiA9IHRoaXMuYm9yblBvc2VzW2luZGV4XTtcblxuICAgICAgICAgICAgdGFua0N0cmwudGFua1R5cGUgPSBpbmRleDtcbiAgICAgICAgICAgIHRhbmtDdHJsLnNwZWVkID0gdGhpcy50YW5rU3BlZWRzW2luZGV4XTtcbiAgICAgICAgICAgIHRhbmtDdHJsLmZpcmVUaW1lID0gdGhpcy50YW5rRmlyZVRpbWVzW2luZGV4XTtcbiAgICAgICAgICAgIHRhbmtDdHJsLmJsb29kID0gdGhpcy50YW5rQmxvb2RzW2luZGV4XTtcbiAgICAgICAgICAgIHRhbmtDdHJsLmRpZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZighdGVhbSl7XG4gICAgICAgICAgICAgICAgaWYoY2MuZ2FtZURhdGEuc2luZ2xlKXtcbiAgICAgICAgICAgICAgICAgICAgLy/ljZXmnLrniYhcbiAgICAgICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9IDE7XG4gICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL+Wkp+S5seaWl1xuICAgICAgICAgICAgICAgICAgICB0YW5rQ3RybC50ZWFtID0gKytjYy5nYW1lRGF0YS50ZWFtSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIC8v57uE6ZifXG4gICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9IHRlYW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGluZGV4ID09IDApe1xuICAgICAgICAgICAgICAgIHRhbmsuYW5nbGUgPSA5MDtcbiAgICAgICAgICAgIH1lbHNlIGlmKGluZGV4ID09IDEpe1xuICAgICAgICAgICAgICAgIHRhbmsuYW5nbGUgPSAxODA7XG4gICAgICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSAyKXtcbiAgICAgICAgICAgICAgICB0YW5rLmFuZ2xlID0gMjcwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodGFua0N0cmwuY29sbGlzaW9uVGFuayh0YW5rLmdldEJvdW5kaW5nQm94KCkpKXtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmJvcm5Qb3Nlcy5sZW5ndGgtMTsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgdGFuay5wb3NpdGlvbiA9IHRoaXMuYm9yblBvc2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZighdGFua0N0cmwuY29sbGlzaW9uVGFuayh0YW5rLmdldEJvdW5kaW5nQm94KCkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0YW5rLnBhcmVudCA9IHRoaXMudGFua05vZGU7XG4gICAgICAgICAgICAvL+WKoOWIsOWIl+ihqFxuICAgICAgICAgICAgY2MuZ2FtZURhdGEudGFua0xpc3QucHVzaCh0YW5rKTtcbiAgICAgICAgICAgIHRoaXMubWF4Q291bnQgLS07XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdGFua0Jvb206IGZ1bmN0aW9uKHRhbmspIHtcbiAgICAgICAgdGFuay5wYXJlbnQgPSBudWxsO1xuICAgICAgICB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIikuZGllID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50YW5rUG9vbC5wdXQodGFuayk7XG4gICAgICAgIGlmKGNjLmdhbWVEYXRhLnNpbmdsZSAmJiB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIikudGVhbSA9PSAwKXtcbiAgICAgICAgICAgIHRoaXMubGlmZSAtLTtcbiAgICAgICAgICAgIHRoaXMubGlmZU51bS5zdHJpbmcgPSB0aGlzLmxpZmUgKyBcIlwiO1xuXG4gICAgICAgICAgICBpZih0aGlzLmxpZmUgPiAwKXtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFBsYXllclRhbmsoKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgLy8gdGFuay5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpLmJsb29kID0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgLy8gdGFuay5wYXJlbnQgPSBudWxsO1xuICAgICAgICAgICAgLy8gdGFuay5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpLmRpZSA9IHRydWU7XG4gICAgICAgICAgICAvLyB0aGlzLnRhbmtQb29sLnB1dCh0YW5rKTtcblxuICAgICAgICAgICAgdmFyIHRhbmtOdW0gPSBOdW1iZXIodGhpcy5lbmVteU51bS5zdHJpbmcpIC0gMTtcbiAgICAgICAgICAgIHRoaXMuZW5lbXlOdW0uc3RyaW5nID0gdGFua051bSArIFwiXCI7XG4gICAgICAgICAgICBpZih0YW5rTnVtID09IDApe1xuICAgICAgICAgICAgICAgIGlmKGNjLmdhbWVEYXRhLmN1ckxldmVsIDwgMTApe1xuICAgICAgICAgICAgICAgICAgICArK2NjLmdhbWVEYXRhLmN1ckxldmVsO1xuICAgICAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoXCJDaXR5U2NlbmVcIisgY2MuZ2FtZURhdGEuY3VyTGV2ZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvdWJsZUZpcmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQuc2hvdy5jYWxsKHRoaXMsIFwi5L2g6LWi5LqGXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShcIlN0YXJ0U2NlbmVcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvL+W8gOeBq+aMiemSrueCueWHu1xuICAgIGZpcmVCdG5DbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgaWYodGhpcy5fcGxheWVyVGFua0N0cmwuc3RhcnRGaXJlKHRoaXMuYnVsbGV0UG9vbCkpe1xuICAgICAgICAgICAgLy/mkq3mlL7lsITlh7vpn7PmlYhcbiAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnBsYXkodGhpcy5fcGxheWVyVGFua0N0cmwuc2hvb3RBdWRpbywgZmFsc2UsIDEpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8v6ZSA5q+B5pe26LCD55SoXG4gICAgb25EZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudW5zY2hlZHVsZSh0aGlzLmFkZEFJVGFuayx0aGlzKTtcbiAgICB9LFxufSk7XG4iXX0=