
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/CityScript.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7f0b08Dcw5F7oWFl36ggKRC', 'CityScript');
// scripts/CityScript.js

"use strict";

var TankType = require("TankData").tankType;

var alert = require('Alert');

cc.Class({
  "extends": cc.Component,
  properties: {
    //地图
    curMap: cc.TiledMap,
    //摇杆
    yaogan: cc.Node,
    //子弹预制体
    bullet: cc.Prefab,
    //坦克预制体
    tank: {
      "default": null,
      type: cc.Prefab
    },
    //最大数量
    maxCount: 10,
    life: 3,
    //出生地
    bornPoses: {
      "default": [],
      type: cc.Vec2
    },
    //坦克皮肤
    spriteFrames: {
      "default": [],
      type: cc.SpriteFrame
    },
    //坦克移动速度
    tankSpeeds: {
      "default": [],
      type: cc.Float
    },
    //坦克子弹发射间隔时间
    tankFireTimes: {
      "default": [],
      type: cc.Float
    },
    //坦克血量
    tankBloods: {
      "default": [],
      type: cc.Integer
    },
    enemyNum: {
      type: cc.Label,
      "default": null
    },
    lifeNum: {
      type: cc.Label,
      "default": null
    },
    doubleFire: false,
    doubleFireBtn: {
      "default": null,
      type: cc.Node
    },
    doubleFireFrames: {
      "default": [],
      type: cc.SpriteFrame
    }
  },
  // use this for initialization
  onLoad: function onLoad() {
    // cc.director.setDisplayStats(true);
    //获取摇杆控制组件
    this._joystickCtrl = this.yaogan.getComponent("JoystickCtrl"); //获取地图 TiledMap 组件

    this._tiledMap = this.curMap.getComponent('cc.TiledMap');
    this.enemyNum.string = this.maxCount + "";
    this.lifeNum.string = this.life + "";
  },
  start: function start(err) {
    if (err) {
      return;
    }

    alert.show.call(this, "关卡" + cc.gameData.curLevel, function () {}); //默认角度

    this.curAngle = null;
    var self = this; //注册监听事件

    this.registerInputEvent(); //引入地图数据

    this._tiledMapData = require("TiledMapData"); //获取地图尺寸

    this._curMapTileSize = this._tiledMap.getTileSize();
    this._curMapSize = cc.v2(this._tiledMap.node.width, this._tiledMap.node.height);
    cc.log("this._curMapTileSize =" + this._curMapTileSize);
    cc.log("this._curMapSize =" + this._curMapSize); //地图墙层

    this.mapLayer0 = this._tiledMap.getLayer("layer_0"); //初始化对象池(参数必须为对应脚本的文件名)

    this.bulletPool = new cc.NodePool("BulletScript");
    var initBulletCount = 20;

    for (var i = 0; i < initBulletCount; ++i) {
      var bullet = cc.instantiate(this.bullet);
      this.bulletPool.put(bullet);
    }

    this.tankPool = new cc.NodePool("TankScript");

    for (var i = 0; i < this.maxCount; ++i) {
      var tank = cc.instantiate(this.tank);
      this.tankPool.put(tank);
    }

    if (!cc.gameData) {
      cc.gameData = {};
    } //初始化


    cc.gameData.teamId = 0; //临时

    cc.gameData.single = true; //地图内坦克列表

    cc.gameData.tankList = []; //地图内子弹列表

    cc.gameData.bulletList = []; //获取组件

    this.tankNode = cc.find("/Canvas/Map"); //this.tankNode = cc.find("/Canvas/map1/layer0");
    //加入player

    this.player = this.addPlayerTank(); //获取坦克控制组件

    this._playerTankCtrl = this.player.getComponent("TankScript"); //启动定时器，添加坦克

    this.schedule(this.addAITank, 3, cc.macro.REPEAT_FOREVER, 1);
  },
  // called every frame, uncomment this function to activate update callback
  update: function update(dt) {
    if (this.doubleFire) {
      if (this._playerTankCtrl.startFire(this.bulletPool)) {//播放射击音效
        //cc.audioEngine.play(this._playerTankCtrl.shootAudio, false, 1);
      }
    }
  },
  setDoubleFire: function setDoubleFire() {
    this.doubleFire = !this.doubleFire;

    if (this.doubleFire) {
      this.doubleFireBtn.opacity = 210; //this.doubleFireBtn.getComponent(cc.Sprite).spriteFrame = this.doubleFireFrames[1];
    } else {
      this.doubleFireBtn.opacity = 255; //this.doubleFireBtn.getComponent(cc.Sprite).spriteFrame = this.doubleFireFrames[0];
    }
  },
  //注册输入事件
  registerInputEvent: function registerInputEvent() {
    var self = this;

    this._joystickCtrl.addJoyStickTouchChangeListener(function (angle) {
      if (angle == self.curAngle && !self._playerTankCtrl.stopMove) {
        return;
      }

      self.curAngle = angle;

      if (angle != null) {
        //开始前进
        self._playerTankCtrl.tankMoveStart(angle);
      } else {
        //停止前进
        self._playerTankCtrl.tankMoveStop();
      }
    }); //按键按下


    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, function (event) {
      var angle = null;

      switch (event.keyCode) {
        case cc.macro.KEY.w:
          angle = 90;
          break;

        case cc.macro.KEY.s:
          angle = 270;
          break;

        case cc.macro.KEY.a:
          angle = 180;
          break;

        case cc.macro.KEY.d:
          angle = 0;
          break;
      }

      if (event.keyCode == cc.macro.KEY.k) {
        this.fireBtnClick();
      } else {
        self._playerTankCtrl.tankMoveStop();
      }

      if (angle != null) {
        //开始前进
        self._playerTankCtrl.tankMoveStart(angle);
      }
    }, this); //按键抬起

    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, function (event) {
      //停止前进
      if (event.keyCode != cc.macro.KEY.k) {
        self._playerTankCtrl.tankMoveStop();
      }
    }, this);
  },
  //碰撞检测
  collisionTest: function collisionTest(rect, bullet) {
    //判断是否碰到地图边界
    if (rect.xMin <= -this._curMapSize.x / 2 || rect.xMax >= this._curMapSize.x / 2 || rect.yMin <= -this._curMapSize.y / 2 || rect.yMax >= this._curMapSize.y / 2) {
      return true;
    } //判断是否撞墙
    //将坐标转换为地图坐标系


    var MinY = this._curMapSize.y / 2 - rect.yMin;
    var MaxY = this._curMapSize.y / 2 - rect.yMax;
    var MinX = this._curMapSize.x / 2 + rect.xMin;
    var MaxX = this._curMapSize.x / 2 + rect.xMax; //获取四个角的顶点

    var LeftDown = cc.v2(MinX, MinY);
    var RightDown = cc.v2(MaxX, MinY);
    var LeftUp = cc.v2(MinX, MaxY);
    var RightUp = cc.v2(MaxX, MaxY); //获取四条边的中心点

    var MidDown = cc.v2(MinX + (MaxX - MinX) / 2, MinY);
    var MidUp = cc.v2(MinX + (MaxX - MinX) / 2, MaxY);
    var MidLeft = cc.v2(MinX, MinY + (MaxY - MinY) / 2);
    var MidRight = cc.v2(MaxX, MinY + (MaxY - MinY) / 2); //检测碰撞

    return this._collisionTest([LeftDown, RightDown, LeftUp, RightUp, MidDown, MidUp, MidLeft, MidRight], bullet);
  },
  //内部碰撞检测方法
  _collisionTest: function _collisionTest(points, bullet) {
    var point = points.shift();
    var gid = this.mapLayer0.getTileGIDAt(cc.v2(parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height)));

    if (this._tiledMapData.gidToTileType[gid] != this._tiledMapData.tileType.tileNone && this._tiledMapData.gidToTileType[gid] != this._tiledMapData.tileType.tileGrass) {
      if (bullet && this._tiledMapData.gidToTileType[gid] == this._tiledMapData.tileType.tileWall) {
        var num = parseInt(Math.random() * (13 - 10 + 1) + 10, 10);
        this.mapLayer0.setTileGIDAt(num, parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height), 1);
      } else if (bullet && this._tiledMapData.gidToTileType[gid] == this._tiledMapData.tileType.tileKing) {
        this.mapLayer0.setTileGIDAt(0, parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height), 1);
        this.gameOver();
      }

      return true;
    }

    if (points.length > 0) {
      return this._collisionTest(points, bullet);
    } else {
      return false;
    }
  },
  gameOver: function gameOver() {
    this.doubleFire = false;

    for (var i = 0; i < cc.gameData.tankList.length; i++) {
      var tank = cc.gameData.tankList[i];
      var tankCtrl = tank.getComponent("TankScript");
      tankCtrl.tankStop();
    } //弹窗调用


    alert.show.call(this, "游戏结束", function () {
      cc.director.loadScene("StartScene");
    });
  },
  //加入玩家坦克
  addPlayerTank: function addPlayerTank(team) {
    if (this.tankPool.size() > 0) {
      var tank = this.tankPool.get();
      tank.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[this.spriteFrames.length - 1];
      tank.position = this.bornPoses[this.bornPoses.length - 1];
      tank.zIndex = -1; //获取坦克控制组件

      var tankCtrl = tank.getComponent("TankScript"); //设置坦克属性

      tankCtrl.tankType = TankType.Player;
      tankCtrl.speed = this.tankSpeeds[this.tankSpeeds.length - 1];
      tankCtrl.fireTime = this.tankFireTimes[this.tankFireTimes.length - 1]; //tankCtrl.blood = this.tankBloods[this.tankBloods.length-1];
      //tankCtrl.blood = this.life ;

      tankCtrl.blood = 1;
      tankCtrl.die = false;

      if (!team) {
        if (cc.gameData.single) {
          //单机版
          tankCtrl.team = 0;
        } else {
          //大乱斗
          tankCtrl.team = ++cc.gameData.teamId;
        }
      } else {
        //组队
        tankCtrl.team = team;
      }

      tank.parent = this.tankNode; //加到列表

      cc.gameData.tankList.push(tank);
      return tank;
    }

    return null;
  },
  //加入AI
  addAITank: function addAITank(dt, team) {
    if (this.tankPool.size() > 0 && this.maxCount > 0) {
      var tank = this.tankPool.get();
      tank.zIndex = -1;
      var index = parseInt(Math.random() * 3, 10); //获取坦克控制组件

      var tankCtrl = tank.getComponent("TankScript"); //设置坦克属性

      tank.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[index];
      tank.position = this.bornPoses[index];
      tankCtrl.tankType = index;
      tankCtrl.speed = this.tankSpeeds[index];
      tankCtrl.fireTime = this.tankFireTimes[index];
      tankCtrl.blood = this.tankBloods[index];
      tankCtrl.die = false;

      if (!team) {
        if (cc.gameData.single) {
          //单机版
          tankCtrl.team = 1;
        } else {
          //大乱斗
          tankCtrl.team = ++cc.gameData.teamId;
        }
      } else {
        //组队
        tankCtrl.team = team;
      }

      if (index == 0) {
        tank.angle = 90;
      } else if (index == 1) {
        tank.angle = 180;
      } else if (index == 2) {
        tank.angle = 270;
      }

      if (tankCtrl.collisionTank(tank.getBoundingBox())) {
        for (var i = 0; i < this.bornPoses.length - 1; i++) {
          tank.position = this.bornPoses[i];

          if (!tankCtrl.collisionTank(tank.getBoundingBox())) {
            break;
          }
        }
      }

      tank.parent = this.tankNode; //加到列表

      cc.gameData.tankList.push(tank);
      this.maxCount--;
    }
  },
  tankBoom: function tankBoom(tank) {
    tank.parent = null;
    tank.getComponent("TankScript").die = true;
    this.tankPool.put(tank);

    if (cc.gameData.single && tank.getComponent("TankScript").team == 0) {
      this.life--;
      this.lifeNum.string = this.life + "";
      this.doubleFire = false;

      if (this.life > 0) {
        this.addPlayerTank();
      } else {
        this.gameOver();
      }

      tank.getComponent("TankScript").blood = 1;
    } else {
      tank.parent = null;
      tank.getComponent("TankScript").die = true;
      this.tankPool.put(tank);
      var tankNum = Number(this.enemyNum.string) - 1;
      this.enemyNum.string = tankNum + "";

      if (tankNum == 0) {
        if (cc.gameData.curLevel < 10) {
          ++cc.gameData.curLevel;
          cc.director.loadScene("CityScene" + cc.gameData.curLevel);
        } else {
          this.doubleFire = false;
          alert.show.call(this, "游戏结束", function () {
            cc.director.loadScene("StartScene");
          });
        }
      }
    }
  },
  //开火按钮点击
  fireBtnClick: function fireBtnClick() {
    if (this._playerTankCtrl.startFire(this.bulletPool)) {
      //播放射击音效
      cc.audioEngine.play(this._playerTankCtrl.shootAudio, false, 1);
    }
  },
  //销毁时调用
  onDestroy: function onDestroy() {
    this.unschedule(this.addAITank, this);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcQ2l0eVNjcmlwdC5qcyJdLCJuYW1lcyI6WyJUYW5rVHlwZSIsInJlcXVpcmUiLCJ0YW5rVHlwZSIsImFsZXJ0IiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJjdXJNYXAiLCJUaWxlZE1hcCIsInlhb2dhbiIsIk5vZGUiLCJidWxsZXQiLCJQcmVmYWIiLCJ0YW5rIiwidHlwZSIsIm1heENvdW50IiwibGlmZSIsImJvcm5Qb3NlcyIsIlZlYzIiLCJzcHJpdGVGcmFtZXMiLCJTcHJpdGVGcmFtZSIsInRhbmtTcGVlZHMiLCJGbG9hdCIsInRhbmtGaXJlVGltZXMiLCJ0YW5rQmxvb2RzIiwiSW50ZWdlciIsImVuZW15TnVtIiwiTGFiZWwiLCJsaWZlTnVtIiwiZG91YmxlRmlyZSIsImRvdWJsZUZpcmVCdG4iLCJkb3VibGVGaXJlRnJhbWVzIiwib25Mb2FkIiwiX2pveXN0aWNrQ3RybCIsImdldENvbXBvbmVudCIsIl90aWxlZE1hcCIsInN0cmluZyIsInN0YXJ0IiwiZXJyIiwic2hvdyIsImNhbGwiLCJnYW1lRGF0YSIsImN1ckxldmVsIiwiY3VyQW5nbGUiLCJzZWxmIiwicmVnaXN0ZXJJbnB1dEV2ZW50IiwiX3RpbGVkTWFwRGF0YSIsIl9jdXJNYXBUaWxlU2l6ZSIsImdldFRpbGVTaXplIiwiX2N1ck1hcFNpemUiLCJ2MiIsIm5vZGUiLCJ3aWR0aCIsImhlaWdodCIsImxvZyIsIm1hcExheWVyMCIsImdldExheWVyIiwiYnVsbGV0UG9vbCIsIk5vZGVQb29sIiwiaW5pdEJ1bGxldENvdW50IiwiaSIsImluc3RhbnRpYXRlIiwicHV0IiwidGFua1Bvb2wiLCJ0ZWFtSWQiLCJzaW5nbGUiLCJ0YW5rTGlzdCIsImJ1bGxldExpc3QiLCJ0YW5rTm9kZSIsImZpbmQiLCJwbGF5ZXIiLCJhZGRQbGF5ZXJUYW5rIiwiX3BsYXllclRhbmtDdHJsIiwic2NoZWR1bGUiLCJhZGRBSVRhbmsiLCJtYWNybyIsIlJFUEVBVF9GT1JFVkVSIiwidXBkYXRlIiwiZHQiLCJzdGFydEZpcmUiLCJzZXREb3VibGVGaXJlIiwib3BhY2l0eSIsImFkZEpveVN0aWNrVG91Y2hDaGFuZ2VMaXN0ZW5lciIsImFuZ2xlIiwic3RvcE1vdmUiLCJ0YW5rTW92ZVN0YXJ0IiwidGFua01vdmVTdG9wIiwic3lzdGVtRXZlbnQiLCJvbiIsIlN5c3RlbUV2ZW50IiwiRXZlbnRUeXBlIiwiS0VZX0RPV04iLCJldmVudCIsImtleUNvZGUiLCJLRVkiLCJ3IiwicyIsImEiLCJkIiwiayIsImZpcmVCdG5DbGljayIsIktFWV9VUCIsImNvbGxpc2lvblRlc3QiLCJyZWN0IiwieE1pbiIsIngiLCJ4TWF4IiwieU1pbiIsInkiLCJ5TWF4IiwiTWluWSIsIk1heFkiLCJNaW5YIiwiTWF4WCIsIkxlZnREb3duIiwiUmlnaHREb3duIiwiTGVmdFVwIiwiUmlnaHRVcCIsIk1pZERvd24iLCJNaWRVcCIsIk1pZExlZnQiLCJNaWRSaWdodCIsIl9jb2xsaXNpb25UZXN0IiwicG9pbnRzIiwicG9pbnQiLCJzaGlmdCIsImdpZCIsImdldFRpbGVHSURBdCIsInBhcnNlSW50IiwiZ2lkVG9UaWxlVHlwZSIsInRpbGVUeXBlIiwidGlsZU5vbmUiLCJ0aWxlR3Jhc3MiLCJ0aWxlV2FsbCIsIm51bSIsIk1hdGgiLCJyYW5kb20iLCJzZXRUaWxlR0lEQXQiLCJ0aWxlS2luZyIsImdhbWVPdmVyIiwibGVuZ3RoIiwidGFua0N0cmwiLCJ0YW5rU3RvcCIsImRpcmVjdG9yIiwibG9hZFNjZW5lIiwidGVhbSIsInNpemUiLCJnZXQiLCJTcHJpdGUiLCJzcHJpdGVGcmFtZSIsInBvc2l0aW9uIiwiekluZGV4IiwiUGxheWVyIiwic3BlZWQiLCJmaXJlVGltZSIsImJsb29kIiwiZGllIiwicGFyZW50IiwicHVzaCIsImluZGV4IiwiY29sbGlzaW9uVGFuayIsImdldEJvdW5kaW5nQm94IiwidGFua0Jvb20iLCJ0YW5rTnVtIiwiTnVtYmVyIiwiYXVkaW9FbmdpbmUiLCJwbGF5Iiwic2hvb3RBdWRpbyIsIm9uRGVzdHJveSIsInVuc2NoZWR1bGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUFQLENBQW9CQyxRQUFuQzs7QUFDQSxJQUFJQyxLQUFLLEdBQUdGLE9BQU8sQ0FBQyxPQUFELENBQW5COztBQUdBRyxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNMLGFBQVNELEVBQUUsQ0FBQ0UsU0FEUDtBQUdMQyxFQUFBQSxVQUFVLEVBQUU7QUFFUjtBQUNBQyxJQUFBQSxNQUFNLEVBQUVKLEVBQUUsQ0FBQ0ssUUFISDtBQUlSO0FBQ0FDLElBQUFBLE1BQU0sRUFBRU4sRUFBRSxDQUFDTyxJQUxIO0FBT1I7QUFDQUMsSUFBQUEsTUFBTSxFQUFFUixFQUFFLENBQUNTLE1BUkg7QUFTUjtBQUNBQyxJQUFBQSxJQUFJLEVBQUU7QUFDRixpQkFBUyxJQURQO0FBRUZDLE1BQUFBLElBQUksRUFBRVgsRUFBRSxDQUFDUztBQUZQLEtBVkU7QUFjUjtBQUNBRyxJQUFBQSxRQUFRLEVBQUUsRUFmRjtBQWdCUkMsSUFBQUEsSUFBSSxFQUFFLENBaEJFO0FBaUJSO0FBQ0FDLElBQUFBLFNBQVMsRUFBRTtBQUNQLGlCQUFTLEVBREY7QUFFUEgsTUFBQUEsSUFBSSxFQUFFWCxFQUFFLENBQUNlO0FBRkYsS0FsQkg7QUFzQlI7QUFDQUMsSUFBQUEsWUFBWSxFQUFFO0FBQ1YsaUJBQVMsRUFEQztBQUVWTCxNQUFBQSxJQUFJLEVBQUVYLEVBQUUsQ0FBQ2lCO0FBRkMsS0F2Qk47QUEyQlI7QUFDQUMsSUFBQUEsVUFBVSxFQUFFO0FBQ1IsaUJBQVMsRUFERDtBQUVSUCxNQUFBQSxJQUFJLEVBQUVYLEVBQUUsQ0FBQ21CO0FBRkQsS0E1Qko7QUFnQ1I7QUFDQUMsSUFBQUEsYUFBYSxFQUFFO0FBQ1gsaUJBQVMsRUFERTtBQUVYVCxNQUFBQSxJQUFJLEVBQUVYLEVBQUUsQ0FBQ21CO0FBRkUsS0FqQ1A7QUFzQ1I7QUFDQUUsSUFBQUEsVUFBVSxFQUFFO0FBQ1IsaUJBQVMsRUFERDtBQUVSVixNQUFBQSxJQUFJLEVBQUVYLEVBQUUsQ0FBQ3NCO0FBRkQsS0F2Q0o7QUE0Q1JDLElBQUFBLFFBQVEsRUFBRTtBQUNOWixNQUFBQSxJQUFJLEVBQUVYLEVBQUUsQ0FBQ3dCLEtBREg7QUFFTixpQkFBUztBQUZILEtBNUNGO0FBZ0RSQyxJQUFBQSxPQUFPLEVBQUU7QUFDTGQsTUFBQUEsSUFBSSxFQUFFWCxFQUFFLENBQUN3QixLQURKO0FBRUwsaUJBQVM7QUFGSixLQWhERDtBQW9EUkUsSUFBQUEsVUFBVSxFQUFFLEtBcERKO0FBcURSQyxJQUFBQSxhQUFhLEVBQUU7QUFDWCxpQkFBUyxJQURFO0FBRVhoQixNQUFBQSxJQUFJLEVBQUVYLEVBQUUsQ0FBQ087QUFGRSxLQXJEUDtBQXlEUnFCLElBQUFBLGdCQUFnQixFQUFFO0FBQ2QsaUJBQVMsRUFESztBQUVkakIsTUFBQUEsSUFBSSxFQUFFWCxFQUFFLENBQUNpQjtBQUZLO0FBekRWLEdBSFA7QUFtRUw7QUFDQVksRUFBQUEsTUFBTSxFQUFFLGtCQUFZO0FBQ2hCO0FBQ0E7QUFDQSxTQUFLQyxhQUFMLEdBQXFCLEtBQUt4QixNQUFMLENBQVl5QixZQUFaLENBQXlCLGNBQXpCLENBQXJCLENBSGdCLENBSWhCOztBQUNBLFNBQUtDLFNBQUwsR0FBaUIsS0FBSzVCLE1BQUwsQ0FBWTJCLFlBQVosQ0FBeUIsYUFBekIsQ0FBakI7QUFDQSxTQUFLUixRQUFMLENBQWNVLE1BQWQsR0FBdUIsS0FBS3JCLFFBQUwsR0FBZ0IsRUFBdkM7QUFDQSxTQUFLYSxPQUFMLENBQWFRLE1BQWIsR0FBc0IsS0FBS3BCLElBQUwsR0FBWSxFQUFsQztBQUNILEdBNUVJO0FBOEVMcUIsRUFBQUEsS0FBSyxFQUFFLGVBQVNDLEdBQVQsRUFBYTtBQUNoQixRQUFHQSxHQUFILEVBQU87QUFDSDtBQUNIOztBQUVEcEMsSUFBQUEsS0FBSyxDQUFDcUMsSUFBTixDQUFXQyxJQUFYLENBQWdCLElBQWhCLEVBQXNCLE9BQU9yQyxFQUFFLENBQUNzQyxRQUFILENBQVlDLFFBQXpDLEVBQW1ELFlBQVksQ0FFOUQsQ0FGRCxFQUxnQixDQVNoQjs7QUFDQSxTQUFLQyxRQUFMLEdBQWdCLElBQWhCO0FBRUEsUUFBSUMsSUFBSSxHQUFHLElBQVgsQ0FaZ0IsQ0FhaEI7O0FBQ0EsU0FBS0Msa0JBQUwsR0FkZ0IsQ0FlaEI7O0FBQ0EsU0FBS0MsYUFBTCxHQUFxQjlDLE9BQU8sQ0FBQyxjQUFELENBQTVCLENBaEJnQixDQWtCaEI7O0FBQ0EsU0FBSytDLGVBQUwsR0FBdUIsS0FBS1osU0FBTCxDQUFlYSxXQUFmLEVBQXZCO0FBQ0EsU0FBS0MsV0FBTCxHQUFtQjlDLEVBQUUsQ0FBQytDLEVBQUgsQ0FBTSxLQUFLZixTQUFMLENBQWVnQixJQUFmLENBQW9CQyxLQUExQixFQUFnQyxLQUFLakIsU0FBTCxDQUFlZ0IsSUFBZixDQUFvQkUsTUFBcEQsQ0FBbkI7QUFDQWxELElBQUFBLEVBQUUsQ0FBQ21ELEdBQUgsQ0FBTywyQkFBMkIsS0FBS1AsZUFBdkM7QUFDQTVDLElBQUFBLEVBQUUsQ0FBQ21ELEdBQUgsQ0FBTyx1QkFBdUIsS0FBS0wsV0FBbkMsRUF0QmdCLENBd0JoQjs7QUFDQSxTQUFLTSxTQUFMLEdBQWlCLEtBQUtwQixTQUFMLENBQWVxQixRQUFmLENBQXdCLFNBQXhCLENBQWpCLENBekJnQixDQTJCaEI7O0FBQ0EsU0FBS0MsVUFBTCxHQUFrQixJQUFJdEQsRUFBRSxDQUFDdUQsUUFBUCxDQUFnQixjQUFoQixDQUFsQjtBQUNBLFFBQUlDLGVBQWUsR0FBRyxFQUF0Qjs7QUFDQSxTQUFJLElBQUlDLENBQUMsR0FBQyxDQUFWLEVBQWFBLENBQUMsR0FBQ0QsZUFBZixFQUFnQyxFQUFFQyxDQUFsQyxFQUFvQztBQUNoQyxVQUFJakQsTUFBTSxHQUFHUixFQUFFLENBQUMwRCxXQUFILENBQWUsS0FBS2xELE1BQXBCLENBQWI7QUFDQSxXQUFLOEMsVUFBTCxDQUFnQkssR0FBaEIsQ0FBb0JuRCxNQUFwQjtBQUNIOztBQUNELFNBQUtvRCxRQUFMLEdBQWdCLElBQUk1RCxFQUFFLENBQUN1RCxRQUFQLENBQWdCLFlBQWhCLENBQWhCOztBQUNBLFNBQUksSUFBSUUsQ0FBQyxHQUFDLENBQVYsRUFBYUEsQ0FBQyxHQUFDLEtBQUs3QyxRQUFwQixFQUE4QixFQUFFNkMsQ0FBaEMsRUFBa0M7QUFDOUIsVUFBSS9DLElBQUksR0FBR1YsRUFBRSxDQUFDMEQsV0FBSCxDQUFlLEtBQUtoRCxJQUFwQixDQUFYO0FBQ0EsV0FBS2tELFFBQUwsQ0FBY0QsR0FBZCxDQUFrQmpELElBQWxCO0FBQ0g7O0FBQ0QsUUFBRyxDQUFDVixFQUFFLENBQUNzQyxRQUFQLEVBQWdCO0FBQ1p0QyxNQUFBQSxFQUFFLENBQUNzQyxRQUFILEdBQWMsRUFBZDtBQUNILEtBekNlLENBMENoQjs7O0FBQ0F0QyxJQUFBQSxFQUFFLENBQUNzQyxRQUFILENBQVl1QixNQUFaLEdBQXFCLENBQXJCLENBM0NnQixDQTRDaEI7O0FBQ0E3RCxJQUFBQSxFQUFFLENBQUNzQyxRQUFILENBQVl3QixNQUFaLEdBQXFCLElBQXJCLENBN0NnQixDQStDaEI7O0FBQ0E5RCxJQUFBQSxFQUFFLENBQUNzQyxRQUFILENBQVl5QixRQUFaLEdBQXVCLEVBQXZCLENBaERnQixDQWlEaEI7O0FBQ0EvRCxJQUFBQSxFQUFFLENBQUNzQyxRQUFILENBQVkwQixVQUFaLEdBQXlCLEVBQXpCLENBbERnQixDQW9EaEI7O0FBQ0EsU0FBS0MsUUFBTCxHQUFnQmpFLEVBQUUsQ0FBQ2tFLElBQUgsQ0FBUSxhQUFSLENBQWhCLENBckRnQixDQXNEaEI7QUFDQTs7QUFDQSxTQUFLQyxNQUFMLEdBQWMsS0FBS0MsYUFBTCxFQUFkLENBeERnQixDQXlEaEI7O0FBQ0EsU0FBS0MsZUFBTCxHQUF1QixLQUFLRixNQUFMLENBQVlwQyxZQUFaLENBQXlCLFlBQXpCLENBQXZCLENBMURnQixDQTREaEI7O0FBQ0EsU0FBS3VDLFFBQUwsQ0FBYyxLQUFLQyxTQUFuQixFQUE2QixDQUE3QixFQUErQnZFLEVBQUUsQ0FBQ3dFLEtBQUgsQ0FBU0MsY0FBeEMsRUFBdUQsQ0FBdkQ7QUFFSCxHQTdJSTtBQStJTDtBQUNBQyxFQUFBQSxNQUFNLEVBQUUsZ0JBQVVDLEVBQVYsRUFBYztBQUNsQixRQUFHLEtBQUtqRCxVQUFSLEVBQW1CO0FBQ2YsVUFBRyxLQUFLMkMsZUFBTCxDQUFxQk8sU0FBckIsQ0FBK0IsS0FBS3RCLFVBQXBDLENBQUgsRUFBbUQsQ0FDL0M7QUFDQTtBQUNIO0FBQ0o7QUFDSixHQXZKSTtBQXlKTHVCLEVBQUFBLGFBQWEsRUFBRSx5QkFBWTtBQUN2QixTQUFLbkQsVUFBTCxHQUFrQixDQUFDLEtBQUtBLFVBQXhCOztBQUVBLFFBQUcsS0FBS0EsVUFBUixFQUFtQjtBQUNmLFdBQUtDLGFBQUwsQ0FBbUJtRCxPQUFuQixHQUE2QixHQUE3QixDQURlLENBRWY7QUFDSCxLQUhELE1BR0s7QUFDRCxXQUFLbkQsYUFBTCxDQUFtQm1ELE9BQW5CLEdBQTZCLEdBQTdCLENBREMsQ0FFRDtBQUNIO0FBRUosR0FwS0k7QUFzS0w7QUFDQXBDLEVBQUFBLGtCQUFrQixFQUFFLDhCQUFZO0FBRTVCLFFBQUlELElBQUksR0FBRyxJQUFYOztBQUVBLFNBQUtYLGFBQUwsQ0FBbUJpRCw4QkFBbkIsQ0FBa0QsVUFBVUMsS0FBVixFQUFpQjtBQUUvRCxVQUFHQSxLQUFLLElBQUl2QyxJQUFJLENBQUNELFFBQWQsSUFDQyxDQUFDQyxJQUFJLENBQUM0QixlQUFMLENBQXFCWSxRQUQxQixFQUNvQztBQUNoQztBQUNIOztBQUNEeEMsTUFBQUEsSUFBSSxDQUFDRCxRQUFMLEdBQWdCd0MsS0FBaEI7O0FBRUEsVUFBR0EsS0FBSyxJQUFFLElBQVYsRUFBZTtBQUNYO0FBQ0F2QyxRQUFBQSxJQUFJLENBQUM0QixlQUFMLENBQXFCYSxhQUFyQixDQUFtQ0YsS0FBbkM7QUFDSCxPQUhELE1BR007QUFDRjtBQUNBdkMsUUFBQUEsSUFBSSxDQUFDNEIsZUFBTCxDQUFxQmMsWUFBckI7QUFDSDtBQUVKLEtBaEJELEVBSjRCLENBcUI1Qjs7O0FBQ0FuRixJQUFBQSxFQUFFLENBQUNvRixXQUFILENBQWVDLEVBQWYsQ0FBa0JyRixFQUFFLENBQUNzRixXQUFILENBQWVDLFNBQWYsQ0FBeUJDLFFBQTNDLEVBQ2dCLFVBQVVDLEtBQVYsRUFBaUI7QUFDYixVQUFJVCxLQUFLLEdBQUcsSUFBWjs7QUFDQSxjQUFPUyxLQUFLLENBQUNDLE9BQWI7QUFDSSxhQUFLMUYsRUFBRSxDQUFDd0UsS0FBSCxDQUFTbUIsR0FBVCxDQUFhQyxDQUFsQjtBQUNJWixVQUFBQSxLQUFLLEdBQUcsRUFBUjtBQUNBOztBQUNKLGFBQUtoRixFQUFFLENBQUN3RSxLQUFILENBQVNtQixHQUFULENBQWFFLENBQWxCO0FBQ0liLFVBQUFBLEtBQUssR0FBRyxHQUFSO0FBQ0E7O0FBQ0osYUFBS2hGLEVBQUUsQ0FBQ3dFLEtBQUgsQ0FBU21CLEdBQVQsQ0FBYUcsQ0FBbEI7QUFDSWQsVUFBQUEsS0FBSyxHQUFHLEdBQVI7QUFDQTs7QUFDSixhQUFLaEYsRUFBRSxDQUFDd0UsS0FBSCxDQUFTbUIsR0FBVCxDQUFhSSxDQUFsQjtBQUNJZixVQUFBQSxLQUFLLEdBQUcsQ0FBUjtBQUNBO0FBWlI7O0FBY0EsVUFBR1MsS0FBSyxDQUFDQyxPQUFOLElBQWlCMUYsRUFBRSxDQUFDd0UsS0FBSCxDQUFTbUIsR0FBVCxDQUFhSyxDQUFqQyxFQUFtQztBQUMvQixhQUFLQyxZQUFMO0FBQ0gsT0FGRCxNQUVNO0FBQ0Z4RCxRQUFBQSxJQUFJLENBQUM0QixlQUFMLENBQXFCYyxZQUFyQjtBQUNIOztBQUNELFVBQUdILEtBQUssSUFBRSxJQUFWLEVBQWU7QUFDWDtBQUNBdkMsUUFBQUEsSUFBSSxDQUFDNEIsZUFBTCxDQUFxQmEsYUFBckIsQ0FBbUNGLEtBQW5DO0FBQ0g7QUFDSixLQTFCakIsRUEwQm1CLElBMUJuQixFQXRCNEIsQ0FpRDVCOztBQUNBaEYsSUFBQUEsRUFBRSxDQUFDb0YsV0FBSCxDQUFlQyxFQUFmLENBQWtCckYsRUFBRSxDQUFDc0YsV0FBSCxDQUFlQyxTQUFmLENBQXlCVyxNQUEzQyxFQUNnQixVQUFVVCxLQUFWLEVBQWdCO0FBQ1o7QUFDQSxVQUFHQSxLQUFLLENBQUNDLE9BQU4sSUFBaUIxRixFQUFFLENBQUN3RSxLQUFILENBQVNtQixHQUFULENBQWFLLENBQWpDLEVBQW1DO0FBQy9CdkQsUUFBQUEsSUFBSSxDQUFDNEIsZUFBTCxDQUFxQmMsWUFBckI7QUFDSDtBQUNKLEtBTmpCLEVBTW1CLElBTm5CO0FBUUgsR0FqT0k7QUFtT0w7QUFDQWdCLEVBQUFBLGFBQWEsRUFBRSx1QkFBU0MsSUFBVCxFQUFlNUYsTUFBZixFQUFzQjtBQUNqQztBQUNBLFFBQUk0RixJQUFJLENBQUNDLElBQUwsSUFBYSxDQUFDLEtBQUt2RCxXQUFMLENBQWlCd0QsQ0FBbEIsR0FBb0IsQ0FBakMsSUFBc0NGLElBQUksQ0FBQ0csSUFBTCxJQUFhLEtBQUt6RCxXQUFMLENBQWlCd0QsQ0FBakIsR0FBbUIsQ0FBdEUsSUFDTkYsSUFBSSxDQUFDSSxJQUFMLElBQWEsQ0FBQyxLQUFLMUQsV0FBTCxDQUFpQjJELENBQWxCLEdBQW9CLENBRDNCLElBQ2dDTCxJQUFJLENBQUNNLElBQUwsSUFBYSxLQUFLNUQsV0FBTCxDQUFpQjJELENBQWpCLEdBQW1CLENBRHBFLEVBQ3NFO0FBRWxFLGFBQU8sSUFBUDtBQUNILEtBTmdDLENBT2pDO0FBQ0E7OztBQUNBLFFBQUlFLElBQUksR0FBRyxLQUFLN0QsV0FBTCxDQUFpQjJELENBQWpCLEdBQW1CLENBQW5CLEdBQXVCTCxJQUFJLENBQUNJLElBQXZDO0FBQ0gsUUFBSUksSUFBSSxHQUFHLEtBQUs5RCxXQUFMLENBQWlCMkQsQ0FBakIsR0FBbUIsQ0FBbkIsR0FBdUJMLElBQUksQ0FBQ00sSUFBdkM7QUFDRyxRQUFJRyxJQUFJLEdBQUcsS0FBSy9ELFdBQUwsQ0FBaUJ3RCxDQUFqQixHQUFtQixDQUFuQixHQUF1QkYsSUFBSSxDQUFDQyxJQUF2QztBQUNBLFFBQUlTLElBQUksR0FBRyxLQUFLaEUsV0FBTCxDQUFpQndELENBQWpCLEdBQW1CLENBQW5CLEdBQXVCRixJQUFJLENBQUNHLElBQXZDLENBWmlDLENBY2pDOztBQUNBLFFBQUlRLFFBQVEsR0FBRy9HLEVBQUUsQ0FBQytDLEVBQUgsQ0FBTThELElBQU4sRUFBWUYsSUFBWixDQUFmO0FBQ0EsUUFBSUssU0FBUyxHQUFHaEgsRUFBRSxDQUFDK0MsRUFBSCxDQUFNK0QsSUFBTixFQUFZSCxJQUFaLENBQWhCO0FBQ0EsUUFBSU0sTUFBTSxHQUFHakgsRUFBRSxDQUFDK0MsRUFBSCxDQUFNOEQsSUFBTixFQUFZRCxJQUFaLENBQWI7QUFDQSxRQUFJTSxPQUFPLEdBQUdsSCxFQUFFLENBQUMrQyxFQUFILENBQU0rRCxJQUFOLEVBQVlGLElBQVosQ0FBZCxDQWxCaUMsQ0FvQmpDOztBQUNBLFFBQUlPLE9BQU8sR0FBR25ILEVBQUUsQ0FBQytDLEVBQUgsQ0FBTThELElBQUksR0FBQyxDQUFDQyxJQUFJLEdBQUNELElBQU4sSUFBWSxDQUF2QixFQUEwQkYsSUFBMUIsQ0FBZDtBQUNBLFFBQUlTLEtBQUssR0FBR3BILEVBQUUsQ0FBQytDLEVBQUgsQ0FBTThELElBQUksR0FBQyxDQUFDQyxJQUFJLEdBQUNELElBQU4sSUFBWSxDQUF2QixFQUEwQkQsSUFBMUIsQ0FBWjtBQUNBLFFBQUlTLE9BQU8sR0FBR3JILEVBQUUsQ0FBQytDLEVBQUgsQ0FBTThELElBQU4sRUFBWUYsSUFBSSxHQUFDLENBQUNDLElBQUksR0FBQ0QsSUFBTixJQUFZLENBQTdCLENBQWQ7QUFDQSxRQUFJVyxRQUFRLEdBQUV0SCxFQUFFLENBQUMrQyxFQUFILENBQU0rRCxJQUFOLEVBQVlILElBQUksR0FBQyxDQUFDQyxJQUFJLEdBQUNELElBQU4sSUFBWSxDQUE3QixDQUFkLENBeEJpQyxDQTBCakM7O0FBQ0EsV0FBTyxLQUFLWSxjQUFMLENBQW9CLENBQUNSLFFBQUQsRUFBVUMsU0FBVixFQUFvQkMsTUFBcEIsRUFBMkJDLE9BQTNCLEVBQ1hDLE9BRFcsRUFDSEMsS0FERyxFQUNHQyxPQURILEVBQ1dDLFFBRFgsQ0FBcEIsRUFFUzlHLE1BRlQsQ0FBUDtBQUdILEdBbFFJO0FBb1FMO0FBQ0ErRyxFQUFBQSxjQUFjLEVBQUUsd0JBQVNDLE1BQVQsRUFBaUJoSCxNQUFqQixFQUF3QjtBQUNwQyxRQUFJaUgsS0FBSyxHQUFHRCxNQUFNLENBQUNFLEtBQVAsRUFBWjtBQUNBLFFBQUlDLEdBQUcsR0FBRyxLQUFLdkUsU0FBTCxDQUFld0UsWUFBZixDQUE0QjVILEVBQUUsQ0FBQytDLEVBQUgsQ0FBTThFLFFBQVEsQ0FBQ0osS0FBSyxDQUFDbkIsQ0FBTixHQUFVLEtBQUsxRCxlQUFMLENBQXFCSyxLQUFoQyxDQUFkLEVBQXFENEUsUUFBUSxDQUFDSixLQUFLLENBQUNoQixDQUFOLEdBQVUsS0FBSzdELGVBQUwsQ0FBcUJNLE1BQWhDLENBQTdELENBQTVCLENBQVY7O0FBRUEsUUFBSSxLQUFLUCxhQUFMLENBQW1CbUYsYUFBbkIsQ0FBaUNILEdBQWpDLEtBQXlDLEtBQUtoRixhQUFMLENBQW1Cb0YsUUFBbkIsQ0FBNEJDLFFBQXJFLElBQ0EsS0FBS3JGLGFBQUwsQ0FBbUJtRixhQUFuQixDQUFpQ0gsR0FBakMsS0FBeUMsS0FBS2hGLGFBQUwsQ0FBbUJvRixRQUFuQixDQUE0QkUsU0FEekUsRUFDbUY7QUFFL0UsVUFBR3pILE1BQU0sSUFBSSxLQUFLbUMsYUFBTCxDQUFtQm1GLGFBQW5CLENBQWlDSCxHQUFqQyxLQUF5QyxLQUFLaEYsYUFBTCxDQUFtQm9GLFFBQW5CLENBQTRCRyxRQUFsRixFQUEyRjtBQUV2RixZQUFJQyxHQUFHLEdBQUdOLFFBQVEsQ0FBQ08sSUFBSSxDQUFDQyxNQUFMLE1BQWUsS0FBRyxFQUFILEdBQU0sQ0FBckIsSUFBd0IsRUFBekIsRUFBNEIsRUFBNUIsQ0FBbEI7QUFFQSxhQUFLakYsU0FBTCxDQUFla0YsWUFBZixDQUE0QkgsR0FBNUIsRUFBaUNOLFFBQVEsQ0FBQ0osS0FBSyxDQUFDbkIsQ0FBTixHQUFVLEtBQUsxRCxlQUFMLENBQXFCSyxLQUFoQyxDQUF6QyxFQUFnRjRFLFFBQVEsQ0FBQ0osS0FBSyxDQUFDaEIsQ0FBTixHQUFVLEtBQUs3RCxlQUFMLENBQXFCTSxNQUFoQyxDQUF4RixFQUFpSSxDQUFqSTtBQUNILE9BTEQsTUFNSyxJQUFHMUMsTUFBTSxJQUFJLEtBQUttQyxhQUFMLENBQW1CbUYsYUFBbkIsQ0FBaUNILEdBQWpDLEtBQXlDLEtBQUtoRixhQUFMLENBQW1Cb0YsUUFBbkIsQ0FBNEJRLFFBQWxGLEVBQTJGO0FBRTVGLGFBQUtuRixTQUFMLENBQWVrRixZQUFmLENBQTRCLENBQTVCLEVBQStCVCxRQUFRLENBQUNKLEtBQUssQ0FBQ25CLENBQU4sR0FBVSxLQUFLMUQsZUFBTCxDQUFxQkssS0FBaEMsQ0FBdkMsRUFBOEU0RSxRQUFRLENBQUNKLEtBQUssQ0FBQ2hCLENBQU4sR0FBVSxLQUFLN0QsZUFBTCxDQUFxQk0sTUFBaEMsQ0FBdEYsRUFBK0gsQ0FBL0g7QUFDQSxhQUFLc0YsUUFBTDtBQUNIOztBQUNELGFBQU8sSUFBUDtBQUNIOztBQUVELFFBQUdoQixNQUFNLENBQUNpQixNQUFQLEdBQWMsQ0FBakIsRUFBbUI7QUFDZixhQUFPLEtBQUtsQixjQUFMLENBQW9CQyxNQUFwQixFQUE0QmhILE1BQTVCLENBQVA7QUFDSCxLQUZELE1BRUs7QUFDRCxhQUFPLEtBQVA7QUFDSDtBQUNKLEdBL1JJO0FBaVNMZ0ksRUFBQUEsUUFBUSxFQUFFLG9CQUFVO0FBQ2hCLFNBQUs5RyxVQUFMLEdBQWtCLEtBQWxCOztBQUNBLFNBQUksSUFBSStCLENBQUMsR0FBQyxDQUFWLEVBQWFBLENBQUMsR0FBQ3pELEVBQUUsQ0FBQ3NDLFFBQUgsQ0FBWXlCLFFBQVosQ0FBcUIwRSxNQUFwQyxFQUE0Q2hGLENBQUMsRUFBN0MsRUFBZ0Q7QUFDNUMsVUFBSS9DLElBQUksR0FBR1YsRUFBRSxDQUFDc0MsUUFBSCxDQUFZeUIsUUFBWixDQUFxQk4sQ0FBckIsQ0FBWDtBQUNBLFVBQUlpRixRQUFRLEdBQUdoSSxJQUFJLENBQUNxQixZQUFMLENBQWtCLFlBQWxCLENBQWY7QUFDQTJHLE1BQUFBLFFBQVEsQ0FBQ0MsUUFBVDtBQUNILEtBTmUsQ0FRaEI7OztBQUNBNUksSUFBQUEsS0FBSyxDQUFDcUMsSUFBTixDQUFXQyxJQUFYLENBQWdCLElBQWhCLEVBQXNCLE1BQXRCLEVBQThCLFlBQVk7QUFDdENyQyxNQUFBQSxFQUFFLENBQUM0SSxRQUFILENBQVlDLFNBQVosQ0FBc0IsWUFBdEI7QUFDSCxLQUZEO0FBR0gsR0E3U0k7QUErU0w7QUFDQXpFLEVBQUFBLGFBQWEsRUFBRSx1QkFBUzBFLElBQVQsRUFBZTtBQUMxQixRQUFHLEtBQUtsRixRQUFMLENBQWNtRixJQUFkLEtBQXFCLENBQXhCLEVBQTBCO0FBQ3RCLFVBQUlySSxJQUFJLEdBQUcsS0FBS2tELFFBQUwsQ0FBY29GLEdBQWQsRUFBWDtBQUNBdEksTUFBQUEsSUFBSSxDQUFDcUIsWUFBTCxDQUFrQi9CLEVBQUUsQ0FBQ2lKLE1BQXJCLEVBQTZCQyxXQUE3QixHQUEyQyxLQUFLbEksWUFBTCxDQUFrQixLQUFLQSxZQUFMLENBQWtCeUgsTUFBbEIsR0FBeUIsQ0FBM0MsQ0FBM0M7QUFDQS9ILE1BQUFBLElBQUksQ0FBQ3lJLFFBQUwsR0FBZ0IsS0FBS3JJLFNBQUwsQ0FBZSxLQUFLQSxTQUFMLENBQWUySCxNQUFmLEdBQXNCLENBQXJDLENBQWhCO0FBQ0EvSCxNQUFBQSxJQUFJLENBQUMwSSxNQUFMLEdBQWMsQ0FBQyxDQUFmLENBSnNCLENBS3RCOztBQUNBLFVBQUlWLFFBQVEsR0FBR2hJLElBQUksQ0FBQ3FCLFlBQUwsQ0FBa0IsWUFBbEIsQ0FBZixDQU5zQixDQU90Qjs7QUFDQTJHLE1BQUFBLFFBQVEsQ0FBQzVJLFFBQVQsR0FBb0JGLFFBQVEsQ0FBQ3lKLE1BQTdCO0FBQ0FYLE1BQUFBLFFBQVEsQ0FBQ1ksS0FBVCxHQUFpQixLQUFLcEksVUFBTCxDQUFnQixLQUFLQSxVQUFMLENBQWdCdUgsTUFBaEIsR0FBdUIsQ0FBdkMsQ0FBakI7QUFDQUMsTUFBQUEsUUFBUSxDQUFDYSxRQUFULEdBQW9CLEtBQUtuSSxhQUFMLENBQW1CLEtBQUtBLGFBQUwsQ0FBbUJxSCxNQUFuQixHQUEwQixDQUE3QyxDQUFwQixDQVZzQixDQVd0QjtBQUNBOztBQUNBQyxNQUFBQSxRQUFRLENBQUNjLEtBQVQsR0FBaUIsQ0FBakI7QUFDQWQsTUFBQUEsUUFBUSxDQUFDZSxHQUFULEdBQWUsS0FBZjs7QUFFQSxVQUFHLENBQUNYLElBQUosRUFBUztBQUNMLFlBQUc5SSxFQUFFLENBQUNzQyxRQUFILENBQVl3QixNQUFmLEVBQXNCO0FBQ2xCO0FBQ0E0RSxVQUFBQSxRQUFRLENBQUNJLElBQVQsR0FBZ0IsQ0FBaEI7QUFDSCxTQUhELE1BR007QUFDRjtBQUNBSixVQUFBQSxRQUFRLENBQUNJLElBQVQsR0FBZ0IsRUFBRTlJLEVBQUUsQ0FBQ3NDLFFBQUgsQ0FBWXVCLE1BQTlCO0FBQ0g7QUFFSixPQVRELE1BU007QUFDRjtBQUNBNkUsUUFBQUEsUUFBUSxDQUFDSSxJQUFULEdBQWdCQSxJQUFoQjtBQUNIOztBQUVEcEksTUFBQUEsSUFBSSxDQUFDZ0osTUFBTCxHQUFjLEtBQUt6RixRQUFuQixDQTlCc0IsQ0ErQnRCOztBQUNBakUsTUFBQUEsRUFBRSxDQUFDc0MsUUFBSCxDQUFZeUIsUUFBWixDQUFxQjRGLElBQXJCLENBQTBCakosSUFBMUI7QUFDQSxhQUFPQSxJQUFQO0FBQ0g7O0FBQ0QsV0FBTyxJQUFQO0FBQ0gsR0FyVkk7QUF1Vkw7QUFDQTZELEVBQUFBLFNBQVMsRUFBRSxtQkFBU0ksRUFBVCxFQUFhbUUsSUFBYixFQUFtQjtBQUMxQixRQUFHLEtBQUtsRixRQUFMLENBQWNtRixJQUFkLEtBQXFCLENBQXJCLElBQTBCLEtBQUtuSSxRQUFMLEdBQWdCLENBQTdDLEVBQStDO0FBQzNDLFVBQUlGLElBQUksR0FBRyxLQUFLa0QsUUFBTCxDQUFjb0YsR0FBZCxFQUFYO0FBQ0F0SSxNQUFBQSxJQUFJLENBQUMwSSxNQUFMLEdBQWMsQ0FBQyxDQUFmO0FBQ0EsVUFBSVEsS0FBSyxHQUFHL0IsUUFBUSxDQUFDTyxJQUFJLENBQUNDLE1BQUwsS0FBYyxDQUFmLEVBQWtCLEVBQWxCLENBQXBCLENBSDJDLENBSTNDOztBQUNBLFVBQUlLLFFBQVEsR0FBR2hJLElBQUksQ0FBQ3FCLFlBQUwsQ0FBa0IsWUFBbEIsQ0FBZixDQUwyQyxDQU0zQzs7QUFDQXJCLE1BQUFBLElBQUksQ0FBQ3FCLFlBQUwsQ0FBa0IvQixFQUFFLENBQUNpSixNQUFyQixFQUE2QkMsV0FBN0IsR0FBMkMsS0FBS2xJLFlBQUwsQ0FBa0I0SSxLQUFsQixDQUEzQztBQUNBbEosTUFBQUEsSUFBSSxDQUFDeUksUUFBTCxHQUFnQixLQUFLckksU0FBTCxDQUFlOEksS0FBZixDQUFoQjtBQUVBbEIsTUFBQUEsUUFBUSxDQUFDNUksUUFBVCxHQUFvQjhKLEtBQXBCO0FBQ0FsQixNQUFBQSxRQUFRLENBQUNZLEtBQVQsR0FBaUIsS0FBS3BJLFVBQUwsQ0FBZ0IwSSxLQUFoQixDQUFqQjtBQUNBbEIsTUFBQUEsUUFBUSxDQUFDYSxRQUFULEdBQW9CLEtBQUtuSSxhQUFMLENBQW1Cd0ksS0FBbkIsQ0FBcEI7QUFDQWxCLE1BQUFBLFFBQVEsQ0FBQ2MsS0FBVCxHQUFpQixLQUFLbkksVUFBTCxDQUFnQnVJLEtBQWhCLENBQWpCO0FBQ0FsQixNQUFBQSxRQUFRLENBQUNlLEdBQVQsR0FBZSxLQUFmOztBQUVBLFVBQUcsQ0FBQ1gsSUFBSixFQUFTO0FBQ0wsWUFBRzlJLEVBQUUsQ0FBQ3NDLFFBQUgsQ0FBWXdCLE1BQWYsRUFBc0I7QUFDbEI7QUFDQTRFLFVBQUFBLFFBQVEsQ0FBQ0ksSUFBVCxHQUFnQixDQUFoQjtBQUNILFNBSEQsTUFHTTtBQUNGO0FBQ0FKLFVBQUFBLFFBQVEsQ0FBQ0ksSUFBVCxHQUFnQixFQUFFOUksRUFBRSxDQUFDc0MsUUFBSCxDQUFZdUIsTUFBOUI7QUFDSDtBQUNKLE9BUkQsTUFRTTtBQUNGO0FBQ0E2RSxRQUFBQSxRQUFRLENBQUNJLElBQVQsR0FBZ0JBLElBQWhCO0FBQ0g7O0FBRUQsVUFBR2MsS0FBSyxJQUFJLENBQVosRUFBYztBQUNWbEosUUFBQUEsSUFBSSxDQUFDc0UsS0FBTCxHQUFhLEVBQWI7QUFDSCxPQUZELE1BRU0sSUFBRzRFLEtBQUssSUFBSSxDQUFaLEVBQWM7QUFDaEJsSixRQUFBQSxJQUFJLENBQUNzRSxLQUFMLEdBQWEsR0FBYjtBQUNILE9BRkssTUFFQSxJQUFHNEUsS0FBSyxJQUFJLENBQVosRUFBYztBQUNoQmxKLFFBQUFBLElBQUksQ0FBQ3NFLEtBQUwsR0FBYSxHQUFiO0FBQ0g7O0FBQ0QsVUFBRzBELFFBQVEsQ0FBQ21CLGFBQVQsQ0FBdUJuSixJQUFJLENBQUNvSixjQUFMLEVBQXZCLENBQUgsRUFBaUQ7QUFDN0MsYUFBSSxJQUFJckcsQ0FBQyxHQUFDLENBQVYsRUFBYUEsQ0FBQyxHQUFDLEtBQUszQyxTQUFMLENBQWUySCxNQUFmLEdBQXNCLENBQXJDLEVBQXdDaEYsQ0FBQyxFQUF6QyxFQUE0QztBQUN4Qy9DLFVBQUFBLElBQUksQ0FBQ3lJLFFBQUwsR0FBZ0IsS0FBS3JJLFNBQUwsQ0FBZTJDLENBQWYsQ0FBaEI7O0FBQ0EsY0FBRyxDQUFDaUYsUUFBUSxDQUFDbUIsYUFBVCxDQUF1Qm5KLElBQUksQ0FBQ29KLGNBQUwsRUFBdkIsQ0FBSixFQUFrRDtBQUM5QztBQUNIO0FBQ0o7QUFDSjs7QUFFRHBKLE1BQUFBLElBQUksQ0FBQ2dKLE1BQUwsR0FBYyxLQUFLekYsUUFBbkIsQ0E3QzJDLENBOEMzQzs7QUFDQWpFLE1BQUFBLEVBQUUsQ0FBQ3NDLFFBQUgsQ0FBWXlCLFFBQVosQ0FBcUI0RixJQUFyQixDQUEwQmpKLElBQTFCO0FBQ0EsV0FBS0UsUUFBTDtBQUNIO0FBQ0osR0EzWUk7QUE2WUxtSixFQUFBQSxRQUFRLEVBQUUsa0JBQVNySixJQUFULEVBQWU7QUFFckJBLElBQUFBLElBQUksQ0FBQ2dKLE1BQUwsR0FBYyxJQUFkO0FBQ0FoSixJQUFBQSxJQUFJLENBQUNxQixZQUFMLENBQWtCLFlBQWxCLEVBQWdDMEgsR0FBaEMsR0FBc0MsSUFBdEM7QUFDQSxTQUFLN0YsUUFBTCxDQUFjRCxHQUFkLENBQWtCakQsSUFBbEI7O0FBRUEsUUFBR1YsRUFBRSxDQUFDc0MsUUFBSCxDQUFZd0IsTUFBWixJQUFzQnBELElBQUksQ0FBQ3FCLFlBQUwsQ0FBa0IsWUFBbEIsRUFBZ0MrRyxJQUFoQyxJQUF3QyxDQUFqRSxFQUFtRTtBQUMvRCxXQUFLakksSUFBTDtBQUNBLFdBQUtZLE9BQUwsQ0FBYVEsTUFBYixHQUFzQixLQUFLcEIsSUFBTCxHQUFZLEVBQWxDO0FBQ0EsV0FBS2EsVUFBTCxHQUFrQixLQUFsQjs7QUFFQSxVQUFHLEtBQUtiLElBQUwsR0FBWSxDQUFmLEVBQWlCO0FBQ2IsYUFBS3VELGFBQUw7QUFDSCxPQUZELE1BRUs7QUFDRCxhQUFLb0UsUUFBTDtBQUNIOztBQUNEOUgsTUFBQUEsSUFBSSxDQUFDcUIsWUFBTCxDQUFrQixZQUFsQixFQUFnQ3lILEtBQWhDLEdBQXdDLENBQXhDO0FBQ0gsS0FYRCxNQVlJO0FBRUE5SSxNQUFBQSxJQUFJLENBQUNnSixNQUFMLEdBQWMsSUFBZDtBQUNBaEosTUFBQUEsSUFBSSxDQUFDcUIsWUFBTCxDQUFrQixZQUFsQixFQUFnQzBILEdBQWhDLEdBQXNDLElBQXRDO0FBQ0EsV0FBSzdGLFFBQUwsQ0FBY0QsR0FBZCxDQUFrQmpELElBQWxCO0FBRUEsVUFBSXNKLE9BQU8sR0FBR0MsTUFBTSxDQUFDLEtBQUsxSSxRQUFMLENBQWNVLE1BQWYsQ0FBTixHQUErQixDQUE3QztBQUNBLFdBQUtWLFFBQUwsQ0FBY1UsTUFBZCxHQUF1QitILE9BQU8sR0FBRyxFQUFqQzs7QUFDQSxVQUFHQSxPQUFPLElBQUksQ0FBZCxFQUFnQjtBQUNaLFlBQUdoSyxFQUFFLENBQUNzQyxRQUFILENBQVlDLFFBQVosR0FBdUIsRUFBMUIsRUFBNkI7QUFDekIsWUFBRXZDLEVBQUUsQ0FBQ3NDLFFBQUgsQ0FBWUMsUUFBZDtBQUNBdkMsVUFBQUEsRUFBRSxDQUFDNEksUUFBSCxDQUFZQyxTQUFaLENBQXNCLGNBQWE3SSxFQUFFLENBQUNzQyxRQUFILENBQVlDLFFBQS9DO0FBQ0gsU0FIRCxNQUlJO0FBQ0EsZUFBS2IsVUFBTCxHQUFrQixLQUFsQjtBQUNBM0IsVUFBQUEsS0FBSyxDQUFDcUMsSUFBTixDQUFXQyxJQUFYLENBQWdCLElBQWhCLEVBQXNCLE1BQXRCLEVBQThCLFlBQVk7QUFDdENyQyxZQUFBQSxFQUFFLENBQUM0SSxRQUFILENBQVlDLFNBQVosQ0FBc0IsWUFBdEI7QUFDSCxXQUZEO0FBR0g7QUFDSjtBQUNKO0FBQ0osR0FwYkk7QUFzYkw7QUFDQTVDLEVBQUFBLFlBQVksRUFBRSx3QkFBVTtBQUNwQixRQUFHLEtBQUs1QixlQUFMLENBQXFCTyxTQUFyQixDQUErQixLQUFLdEIsVUFBcEMsQ0FBSCxFQUFtRDtBQUMvQztBQUNBdEQsTUFBQUEsRUFBRSxDQUFDa0ssV0FBSCxDQUFlQyxJQUFmLENBQW9CLEtBQUs5RixlQUFMLENBQXFCK0YsVUFBekMsRUFBcUQsS0FBckQsRUFBNEQsQ0FBNUQ7QUFDSDtBQUNKLEdBNWJJO0FBOGJMO0FBQ0FDLEVBQUFBLFNBQVMsRUFBRSxxQkFBWTtBQUNuQixTQUFLQyxVQUFMLENBQWdCLEtBQUsvRixTQUFyQixFQUErQixJQUEvQjtBQUNIO0FBamNJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBUYW5rVHlwZSA9IHJlcXVpcmUoXCJUYW5rRGF0YVwiKS50YW5rVHlwZTtcclxubGV0IGFsZXJ0ID0gcmVxdWlyZSgnQWxlcnQnKTtcclxuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG5cclxuICAgICAgICAvL+WcsOWbvlxyXG4gICAgICAgIGN1ck1hcDogY2MuVGlsZWRNYXAsXHJcbiAgICAgICAgLy/mkYfmnYZcclxuICAgICAgICB5YW9nYW46IGNjLk5vZGUsXHJcblxyXG4gICAgICAgIC8v5a2Q5by56aKE5Yi25L2TXHJcbiAgICAgICAgYnVsbGV0OiBjYy5QcmVmYWIsXHJcbiAgICAgICAgLy/lnablhYvpooTliLbkvZNcclxuICAgICAgICB0YW5rOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLlByZWZhYixcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8v5pyA5aSn5pWw6YePXHJcbiAgICAgICAgbWF4Q291bnQ6IDEwLFxyXG4gICAgICAgIGxpZmU6IDMsXHJcbiAgICAgICAgLy/lh7rnlJ/lnLBcclxuICAgICAgICBib3JuUG9zZXM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLlZlYzIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAvL+WdpuWFi+earuiCpFxyXG4gICAgICAgIHNwcml0ZUZyYW1lczoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAvL+WdpuWFi+enu+WKqOmAn+W6plxyXG4gICAgICAgIHRhbmtTcGVlZHM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkZsb2F0LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy/lnablhYvlrZDlvLnlj5HlsITpl7TpmpTml7bpl7RcclxuICAgICAgICB0YW5rRmlyZVRpbWVzOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5GbG9hdCxcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvL+WdpuWFi+ihgOmHj1xyXG4gICAgICAgIHRhbmtCbG9vZHM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkludGVnZXIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICBlbmVteU51bToge1xyXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbCxcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxpZmVOdW06IHtcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkb3VibGVGaXJlOiBmYWxzZSxcclxuICAgICAgICBkb3VibGVGaXJlQnRuOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRvdWJsZUZpcmVGcmFtZXM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGNjLmRpcmVjdG9yLnNldERpc3BsYXlTdGF0cyh0cnVlKTtcclxuICAgICAgICAvL+iOt+WPluaRh+adhuaOp+WItue7hOS7tlxyXG4gICAgICAgIHRoaXMuX2pveXN0aWNrQ3RybCA9IHRoaXMueWFvZ2FuLmdldENvbXBvbmVudChcIkpveXN0aWNrQ3RybFwiKTtcclxuICAgICAgICAvL+iOt+WPluWcsOWbviBUaWxlZE1hcCDnu4Tku7ZcclxuICAgICAgICB0aGlzLl90aWxlZE1hcCA9IHRoaXMuY3VyTWFwLmdldENvbXBvbmVudCgnY2MuVGlsZWRNYXAnKTtcclxuICAgICAgICB0aGlzLmVuZW15TnVtLnN0cmluZyA9IHRoaXMubWF4Q291bnQgKyBcIlwiO1xyXG4gICAgICAgIHRoaXMubGlmZU51bS5zdHJpbmcgPSB0aGlzLmxpZmUgKyBcIlwiO1xyXG4gICAgfSxcclxuXHJcbiAgICBzdGFydDogZnVuY3Rpb24oZXJyKXtcclxuICAgICAgICBpZihlcnIpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhbGVydC5zaG93LmNhbGwodGhpcywgXCLlhbPljaFcIiArIGNjLmdhbWVEYXRhLmN1ckxldmVsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+m7mOiupOinkuW6plxyXG4gICAgICAgIHRoaXMuY3VyQW5nbGUgPSBudWxsO1xyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgLy/ms6jlhoznm5HlkKzkuovku7ZcclxuICAgICAgICB0aGlzLnJlZ2lzdGVySW5wdXRFdmVudCgpO1xyXG4gICAgICAgIC8v5byV5YWl5Zyw5Zu+5pWw5o2uXHJcbiAgICAgICAgdGhpcy5fdGlsZWRNYXBEYXRhID0gcmVxdWlyZShcIlRpbGVkTWFwRGF0YVwiKTtcclxuXHJcbiAgICAgICAgLy/ojrflj5blnLDlm77lsLrlr7hcclxuICAgICAgICB0aGlzLl9jdXJNYXBUaWxlU2l6ZSA9IHRoaXMuX3RpbGVkTWFwLmdldFRpbGVTaXplKCk7XHJcbiAgICAgICAgdGhpcy5fY3VyTWFwU2l6ZSA9IGNjLnYyKHRoaXMuX3RpbGVkTWFwLm5vZGUud2lkdGgsdGhpcy5fdGlsZWRNYXAubm9kZS5oZWlnaHQpO1xyXG4gICAgICAgIGNjLmxvZyhcInRoaXMuX2N1ck1hcFRpbGVTaXplID1cIiArIHRoaXMuX2N1ck1hcFRpbGVTaXplKTtcclxuICAgICAgICBjYy5sb2coXCJ0aGlzLl9jdXJNYXBTaXplID1cIiArIHRoaXMuX2N1ck1hcFNpemUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8v5Zyw5Zu+5aKZ5bGCXHJcbiAgICAgICAgdGhpcy5tYXBMYXllcjAgPSB0aGlzLl90aWxlZE1hcC5nZXRMYXllcihcImxheWVyXzBcIik7XHJcblxyXG4gICAgICAgIC8v5Yid5aeL5YyW5a+56LGh5rGgKOWPguaVsOW/hemhu+S4uuWvueW6lOiEmuacrOeahOaWh+S7tuWQjSlcclxuICAgICAgICB0aGlzLmJ1bGxldFBvb2wgPSBuZXcgY2MuTm9kZVBvb2woXCJCdWxsZXRTY3JpcHRcIik7XHJcbiAgICAgICAgdmFyIGluaXRCdWxsZXRDb3VudCA9IDIwO1xyXG4gICAgICAgIGZvcih2YXIgaT0wOyBpPGluaXRCdWxsZXRDb3VudDsgKytpKXtcclxuICAgICAgICAgICAgdmFyIGJ1bGxldCA9IGNjLmluc3RhbnRpYXRlKHRoaXMuYnVsbGV0KTtcclxuICAgICAgICAgICAgdGhpcy5idWxsZXRQb29sLnB1dChidWxsZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRhbmtQb29sID0gbmV3IGNjLk5vZGVQb29sKFwiVGFua1NjcmlwdFwiKTtcclxuICAgICAgICBmb3IodmFyIGk9MDsgaTx0aGlzLm1heENvdW50OyArK2kpe1xyXG4gICAgICAgICAgICB2YXIgdGFuayA9IGNjLmluc3RhbnRpYXRlKHRoaXMudGFuayk7XHJcbiAgICAgICAgICAgIHRoaXMudGFua1Bvb2wucHV0KHRhbmspO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighY2MuZ2FtZURhdGEpe1xyXG4gICAgICAgICAgICBjYy5nYW1lRGF0YSA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+WIneWni+WMllxyXG4gICAgICAgIGNjLmdhbWVEYXRhLnRlYW1JZCA9IDA7XHJcbiAgICAgICAgLy/kuLTml7ZcclxuICAgICAgICBjYy5nYW1lRGF0YS5zaW5nbGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAvL+WcsOWbvuWGheWdpuWFi+WIl+ihqFxyXG4gICAgICAgIGNjLmdhbWVEYXRhLnRhbmtMaXN0ID0gW107XHJcbiAgICAgICAgLy/lnLDlm77lhoXlrZDlvLnliJfooahcclxuICAgICAgICBjYy5nYW1lRGF0YS5idWxsZXRMaXN0ID0gW107XHJcblxyXG4gICAgICAgIC8v6I635Y+W57uE5Lu2XHJcbiAgICAgICAgdGhpcy50YW5rTm9kZSA9IGNjLmZpbmQoXCIvQ2FudmFzL01hcFwiKTtcclxuICAgICAgICAvL3RoaXMudGFua05vZGUgPSBjYy5maW5kKFwiL0NhbnZhcy9tYXAxL2xheWVyMFwiKTtcclxuICAgICAgICAvL+WKoOWFpXBsYXllclxyXG4gICAgICAgIHRoaXMucGxheWVyID0gdGhpcy5hZGRQbGF5ZXJUYW5rKCk7XHJcbiAgICAgICAgLy/ojrflj5blnablhYvmjqfliLbnu4Tku7ZcclxuICAgICAgICB0aGlzLl9wbGF5ZXJUYW5rQ3RybCA9IHRoaXMucGxheWVyLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIik7IFxyXG5cclxuICAgICAgICAvL+WQr+WKqOWumuaXtuWZqO+8jOa3u+WKoOWdpuWFi1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy5hZGRBSVRhbmssMyxjYy5tYWNyby5SRVBFQVRfRk9SRVZFUiwxKTtcclxuICAgICAgICBcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcbiAgICAgICAgaWYodGhpcy5kb3VibGVGaXJlKXtcclxuICAgICAgICAgICAgaWYodGhpcy5fcGxheWVyVGFua0N0cmwuc3RhcnRGaXJlKHRoaXMuYnVsbGV0UG9vbCkpe1xyXG4gICAgICAgICAgICAgICAgLy/mkq3mlL7lsITlh7vpn7PmlYhcclxuICAgICAgICAgICAgICAgIC8vY2MuYXVkaW9FbmdpbmUucGxheSh0aGlzLl9wbGF5ZXJUYW5rQ3RybC5zaG9vdEF1ZGlvLCBmYWxzZSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNldERvdWJsZUZpcmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmRvdWJsZUZpcmUgPSAhdGhpcy5kb3VibGVGaXJlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKHRoaXMuZG91YmxlRmlyZSl7XHJcbiAgICAgICAgICAgIHRoaXMuZG91YmxlRmlyZUJ0bi5vcGFjaXR5ID0gMjEwXHJcbiAgICAgICAgICAgIC8vdGhpcy5kb3VibGVGaXJlQnRuLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gdGhpcy5kb3VibGVGaXJlRnJhbWVzWzFdO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLmRvdWJsZUZpcmVCdG4ub3BhY2l0eSA9IDI1NVxyXG4gICAgICAgICAgICAvL3RoaXMuZG91YmxlRmlyZUJ0bi5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuZG91YmxlRmlyZUZyYW1lc1swXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5rOo5YaM6L6T5YWl5LqL5Lu2XHJcbiAgICByZWdpc3RlcklucHV0RXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLl9qb3lzdGlja0N0cmwuYWRkSm95U3RpY2tUb3VjaENoYW5nZUxpc3RlbmVyKGZ1bmN0aW9uIChhbmdsZSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoYW5nbGUgPT0gc2VsZi5jdXJBbmdsZSAmJlxyXG4gICAgICAgICAgICAgICAgIXNlbGYuX3BsYXllclRhbmtDdHJsLnN0b3BNb3ZlICl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5jdXJBbmdsZSA9IGFuZ2xlO1xyXG5cclxuICAgICAgICAgICAgaWYoYW5nbGUhPW51bGwpe1xyXG4gICAgICAgICAgICAgICAgLy/lvIDlp4vliY3ov5tcclxuICAgICAgICAgICAgICAgIHNlbGYuX3BsYXllclRhbmtDdHJsLnRhbmtNb3ZlU3RhcnQoYW5nbGUpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL+WBnOatouWJjei/m1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fcGxheWVyVGFua0N0cmwudGFua01vdmVTdG9wKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/mjInplK7mjInkuItcclxuICAgICAgICBjYy5zeXN0ZW1FdmVudC5vbihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX0RPV04sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgY2MubWFjcm8uS0VZLnc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gOTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgY2MubWFjcm8uS0VZLnM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gMjcwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGNjLm1hY3JvLktFWS5hOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IDE4MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBjYy5tYWNyby5LRVkuZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGV2ZW50LmtleUNvZGUgPT0gY2MubWFjcm8uS0VZLmspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyZUJ0bkNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheWVyVGFua0N0cmwudGFua01vdmVTdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhbmdsZSE9bnVsbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lvIDlp4vliY3ov5tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wbGF5ZXJUYW5rQ3RybC50YW5rTW92ZVN0YXJ0KGFuZ2xlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgLy/mjInplK7miqzotbdcclxuICAgICAgICBjYy5zeXN0ZW1FdmVudC5vbihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX1VQLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5YGc5q2i5YmN6L+bXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihldmVudC5rZXlDb2RlICE9IGNjLm1hY3JvLktFWS5rKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wbGF5ZXJUYW5rQ3RybC50YW5rTW92ZVN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcyk7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvL+eisOaSnuajgOa1i1xyXG4gICAgY29sbGlzaW9uVGVzdDogZnVuY3Rpb24ocmVjdCwgYnVsbGV0KXtcclxuICAgICAgICAvL+WIpOaWreaYr+WQpueisOWIsOWcsOWbvui+ueeVjFxyXG4gICAgICAgIGlmIChyZWN0LnhNaW4gPD0gLXRoaXMuX2N1ck1hcFNpemUueC8yIHx8IHJlY3QueE1heCA+PSB0aGlzLl9jdXJNYXBTaXplLngvMiB8fFxyXG5cdFx0ICAgIHJlY3QueU1pbiA8PSAtdGhpcy5fY3VyTWFwU2l6ZS55LzIgfHwgcmVjdC55TWF4ID49IHRoaXMuX2N1ck1hcFNpemUueS8yKXtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/liKTmlq3mmK/lkKbmkp7loplcclxuICAgICAgICAvL+WwhuWdkOagh+i9rOaNouS4uuWcsOWbvuWdkOagh+ezu1xyXG4gICAgICAgIHZhciBNaW5ZID0gdGhpcy5fY3VyTWFwU2l6ZS55LzIgLSByZWN0LnlNaW47XHJcblx0ICAgIHZhciBNYXhZID0gdGhpcy5fY3VyTWFwU2l6ZS55LzIgLSByZWN0LnlNYXg7XHJcbiAgICAgICAgdmFyIE1pblggPSB0aGlzLl9jdXJNYXBTaXplLngvMiArIHJlY3QueE1pbjtcclxuICAgICAgICB2YXIgTWF4WCA9IHRoaXMuX2N1ck1hcFNpemUueC8yICsgcmVjdC54TWF4O1xyXG5cclxuICAgICAgICAvL+iOt+WPluWbm+S4quinkueahOmhtueCuVxyXG4gICAgICAgIHZhciBMZWZ0RG93biA9IGNjLnYyKE1pblgsIE1pblkpO1xyXG4gICAgICAgIHZhciBSaWdodERvd24gPSBjYy52MihNYXhYLCBNaW5ZKTtcclxuICAgICAgICB2YXIgTGVmdFVwID0gY2MudjIoTWluWCwgTWF4WSk7XHJcbiAgICAgICAgdmFyIFJpZ2h0VXAgPSBjYy52MihNYXhYLCBNYXhZKTtcclxuXHJcbiAgICAgICAgLy/ojrflj5blm5vmnaHovrnnmoTkuK3lv4PngrlcclxuICAgICAgICB2YXIgTWlkRG93biA9IGNjLnYyKE1pblgrKE1heFgtTWluWCkvMiwgTWluWSk7XHJcbiAgICAgICAgdmFyIE1pZFVwID0gY2MudjIoTWluWCsoTWF4WC1NaW5YKS8yLCBNYXhZKTtcclxuICAgICAgICB2YXIgTWlkTGVmdCA9IGNjLnYyKE1pblgsIE1pblkrKE1heFktTWluWSkvMik7XHJcbiAgICAgICAgdmFyIE1pZFJpZ2h0PSBjYy52MihNYXhYLCBNaW5ZKyhNYXhZLU1pblkpLzIpO1xyXG5cclxuICAgICAgICAvL+ajgOa1i+eisOaSnlxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb2xsaXNpb25UZXN0KFtMZWZ0RG93bixSaWdodERvd24sTGVmdFVwLFJpZ2h0VXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1pZERvd24sTWlkVXAsTWlkTGVmdCxNaWRSaWdodF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5YaF6YOo56Kw5pKe5qOA5rWL5pa55rOVXHJcbiAgICBfY29sbGlzaW9uVGVzdDogZnVuY3Rpb24ocG9pbnRzLCBidWxsZXQpe1xyXG4gICAgICAgIHZhciBwb2ludCA9IHBvaW50cy5zaGlmdCgpXHJcbiAgICAgICAgdmFyIGdpZCA9IHRoaXMubWFwTGF5ZXIwLmdldFRpbGVHSURBdChjYy52MihwYXJzZUludChwb2ludC54IC8gdGhpcy5fY3VyTWFwVGlsZVNpemUud2lkdGgpLHBhcnNlSW50KHBvaW50LnkgLyB0aGlzLl9jdXJNYXBUaWxlU2l6ZS5oZWlnaHQpKSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl90aWxlZE1hcERhdGEuZ2lkVG9UaWxlVHlwZVtnaWRdICE9IHRoaXMuX3RpbGVkTWFwRGF0YS50aWxlVHlwZS50aWxlTm9uZSAmJiBcclxuICAgICAgICAgICAgdGhpcy5fdGlsZWRNYXBEYXRhLmdpZFRvVGlsZVR5cGVbZ2lkXSAhPSB0aGlzLl90aWxlZE1hcERhdGEudGlsZVR5cGUudGlsZUdyYXNzKXtcclxuXHJcbiAgICAgICAgICAgIGlmKGJ1bGxldCAmJiB0aGlzLl90aWxlZE1hcERhdGEuZ2lkVG9UaWxlVHlwZVtnaWRdID09IHRoaXMuX3RpbGVkTWFwRGF0YS50aWxlVHlwZS50aWxlV2FsbCl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG51bSA9IHBhcnNlSW50KE1hdGgucmFuZG9tKCkqKDEzLTEwKzEpKzEwLDEwKTtcclxuIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXBMYXllcjAuc2V0VGlsZUdJREF0KG51bSwgcGFyc2VJbnQocG9pbnQueCAvIHRoaXMuX2N1ck1hcFRpbGVTaXplLndpZHRoKSxwYXJzZUludChwb2ludC55IC8gdGhpcy5fY3VyTWFwVGlsZVNpemUuaGVpZ2h0KSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihidWxsZXQgJiYgdGhpcy5fdGlsZWRNYXBEYXRhLmdpZFRvVGlsZVR5cGVbZ2lkXSA9PSB0aGlzLl90aWxlZE1hcERhdGEudGlsZVR5cGUudGlsZUtpbmcpe1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubWFwTGF5ZXIwLnNldFRpbGVHSURBdCgwLCBwYXJzZUludChwb2ludC54IC8gdGhpcy5fY3VyTWFwVGlsZVNpemUud2lkdGgpLHBhcnNlSW50KHBvaW50LnkgLyB0aGlzLl9jdXJNYXBUaWxlU2l6ZS5oZWlnaHQpLCAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHBvaW50cy5sZW5ndGg+MCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb2xsaXNpb25UZXN0KHBvaW50cywgYnVsbGV0KTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgZ2FtZU92ZXI6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5kb3VibGVGaXJlID0gZmFsc2U7XHJcbiAgICAgICAgZm9yKHZhciBpPTA7IGk8Y2MuZ2FtZURhdGEudGFua0xpc3QubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICB2YXIgdGFuayA9IGNjLmdhbWVEYXRhLnRhbmtMaXN0W2ldXHJcbiAgICAgICAgICAgIHZhciB0YW5rQ3RybCA9IHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKTtcclxuICAgICAgICAgICAgdGFua0N0cmwudGFua1N0b3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v5by556qX6LCD55SoXHJcbiAgICAgICAgYWxlcnQuc2hvdy5jYWxsKHRoaXMsIFwi5ri45oiP57uT5p2fXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiU3RhcnRTY2VuZVwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/liqDlhaXnjqnlrrblnablhYtcclxuICAgIGFkZFBsYXllclRhbms6IGZ1bmN0aW9uKHRlYW0pIHtcclxuICAgICAgICBpZih0aGlzLnRhbmtQb29sLnNpemUoKT4wKXtcclxuICAgICAgICAgICAgdmFyIHRhbmsgPSB0aGlzLnRhbmtQb29sLmdldCgpO1xyXG4gICAgICAgICAgICB0YW5rLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gdGhpcy5zcHJpdGVGcmFtZXNbdGhpcy5zcHJpdGVGcmFtZXMubGVuZ3RoLTFdO1xyXG4gICAgICAgICAgICB0YW5rLnBvc2l0aW9uID0gdGhpcy5ib3JuUG9zZXNbdGhpcy5ib3JuUG9zZXMubGVuZ3RoLTFdO1xyXG4gICAgICAgICAgICB0YW5rLnpJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICAvL+iOt+WPluWdpuWFi+aOp+WItue7hOS7tlxyXG4gICAgICAgICAgICB2YXIgdGFua0N0cmwgPSB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIik7XHJcbiAgICAgICAgICAgIC8v6K6+572u5Z2m5YWL5bGe5oCnXHJcbiAgICAgICAgICAgIHRhbmtDdHJsLnRhbmtUeXBlID0gVGFua1R5cGUuUGxheWVyO1xyXG4gICAgICAgICAgICB0YW5rQ3RybC5zcGVlZCA9IHRoaXMudGFua1NwZWVkc1t0aGlzLnRhbmtTcGVlZHMubGVuZ3RoLTFdO1xyXG4gICAgICAgICAgICB0YW5rQ3RybC5maXJlVGltZSA9IHRoaXMudGFua0ZpcmVUaW1lc1t0aGlzLnRhbmtGaXJlVGltZXMubGVuZ3RoLTFdO1xyXG4gICAgICAgICAgICAvL3RhbmtDdHJsLmJsb29kID0gdGhpcy50YW5rQmxvb2RzW3RoaXMudGFua0Jsb29kcy5sZW5ndGgtMV07XHJcbiAgICAgICAgICAgIC8vdGFua0N0cmwuYmxvb2QgPSB0aGlzLmxpZmUgO1xyXG4gICAgICAgICAgICB0YW5rQ3RybC5ibG9vZCA9IDE7XHJcbiAgICAgICAgICAgIHRhbmtDdHJsLmRpZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoIXRlYW0pe1xyXG4gICAgICAgICAgICAgICAgaWYoY2MuZ2FtZURhdGEuc2luZ2xlKXtcclxuICAgICAgICAgICAgICAgICAgICAvL+WNleacuueJiFxyXG4gICAgICAgICAgICAgICAgICAgIHRhbmtDdHJsLnRlYW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5aSn5Lmx5paXXHJcbiAgICAgICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9ICsrY2MuZ2FtZURhdGEudGVhbUlkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v57uE6ZifXHJcbiAgICAgICAgICAgICAgICB0YW5rQ3RybC50ZWFtID0gdGVhbTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGFuay5wYXJlbnQgPSB0aGlzLnRhbmtOb2RlO1xyXG4gICAgICAgICAgICAvL+WKoOWIsOWIl+ihqFxyXG4gICAgICAgICAgICBjYy5nYW1lRGF0YS50YW5rTGlzdC5wdXNoKHRhbmspO1xyXG4gICAgICAgICAgICByZXR1cm4gdGFuaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5Yqg5YWlQUlcclxuICAgIGFkZEFJVGFuazogZnVuY3Rpb24oZHQsIHRlYW0pIHtcclxuICAgICAgICBpZih0aGlzLnRhbmtQb29sLnNpemUoKT4wICYmIHRoaXMubWF4Q291bnQgPiAwKXtcclxuICAgICAgICAgICAgdmFyIHRhbmsgPSB0aGlzLnRhbmtQb29sLmdldCgpO1xyXG4gICAgICAgICAgICB0YW5rLnpJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZUludChNYXRoLnJhbmRvbSgpKjMsIDEwKTtcclxuICAgICAgICAgICAgLy/ojrflj5blnablhYvmjqfliLbnu4Tku7ZcclxuICAgICAgICAgICAgdmFyIHRhbmtDdHJsID0gdGFuay5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpO1xyXG4gICAgICAgICAgICAvL+iuvue9ruWdpuWFi+WxnuaAp1xyXG4gICAgICAgICAgICB0YW5rLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gdGhpcy5zcHJpdGVGcmFtZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICB0YW5rLnBvc2l0aW9uID0gdGhpcy5ib3JuUG9zZXNbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgdGFua0N0cmwudGFua1R5cGUgPSBpbmRleDtcclxuICAgICAgICAgICAgdGFua0N0cmwuc3BlZWQgPSB0aGlzLnRhbmtTcGVlZHNbaW5kZXhdO1xyXG4gICAgICAgICAgICB0YW5rQ3RybC5maXJlVGltZSA9IHRoaXMudGFua0ZpcmVUaW1lc1tpbmRleF07XHJcbiAgICAgICAgICAgIHRhbmtDdHJsLmJsb29kID0gdGhpcy50YW5rQmxvb2RzW2luZGV4XTtcclxuICAgICAgICAgICAgdGFua0N0cmwuZGllID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZighdGVhbSl7XHJcbiAgICAgICAgICAgICAgICBpZihjYy5nYW1lRGF0YS5zaW5nbGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5Y2V5py654mIXHJcbiAgICAgICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9IDE7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lpKfkubHmlpdcclxuICAgICAgICAgICAgICAgICAgICB0YW5rQ3RybC50ZWFtID0gKytjYy5nYW1lRGF0YS50ZWFtSWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v57uE6ZifXHJcbiAgICAgICAgICAgICAgICB0YW5rQ3RybC50ZWFtID0gdGVhbTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoaW5kZXggPT0gMCl7XHJcbiAgICAgICAgICAgICAgICB0YW5rLmFuZ2xlID0gOTA7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKGluZGV4ID09IDEpe1xyXG4gICAgICAgICAgICAgICAgdGFuay5hbmdsZSA9IDE4MDtcclxuICAgICAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gMil7XHJcbiAgICAgICAgICAgICAgICB0YW5rLmFuZ2xlID0gMjcwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHRhbmtDdHJsLmNvbGxpc2lvblRhbmsodGFuay5nZXRCb3VuZGluZ0JveCgpKSl7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmJvcm5Qb3Nlcy5sZW5ndGgtMTsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICB0YW5rLnBvc2l0aW9uID0gdGhpcy5ib3JuUG9zZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRhbmtDdHJsLmNvbGxpc2lvblRhbmsodGFuay5nZXRCb3VuZGluZ0JveCgpKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGFuay5wYXJlbnQgPSB0aGlzLnRhbmtOb2RlO1xyXG4gICAgICAgICAgICAvL+WKoOWIsOWIl+ihqFxyXG4gICAgICAgICAgICBjYy5nYW1lRGF0YS50YW5rTGlzdC5wdXNoKHRhbmspO1xyXG4gICAgICAgICAgICB0aGlzLm1heENvdW50IC0tO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgdGFua0Jvb206IGZ1bmN0aW9uKHRhbmspIHtcclxuICAgICAgICBcclxuICAgICAgICB0YW5rLnBhcmVudCA9IG51bGw7XHJcbiAgICAgICAgdGFuay5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpLmRpZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy50YW5rUG9vbC5wdXQodGFuayk7XHJcblxyXG4gICAgICAgIGlmKGNjLmdhbWVEYXRhLnNpbmdsZSAmJiB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIikudGVhbSA9PSAwKXtcclxuICAgICAgICAgICAgdGhpcy5saWZlIC0tO1xyXG4gICAgICAgICAgICB0aGlzLmxpZmVOdW0uc3RyaW5nID0gdGhpcy5saWZlICsgXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5kb3VibGVGaXJlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZih0aGlzLmxpZmUgPiAwKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkUGxheWVyVGFuaygpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIikuYmxvb2QgPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgdGFuay5wYXJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIikuZGllID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy50YW5rUG9vbC5wdXQodGFuayk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGFua051bSA9IE51bWJlcih0aGlzLmVuZW15TnVtLnN0cmluZykgLSAxO1xyXG4gICAgICAgICAgICB0aGlzLmVuZW15TnVtLnN0cmluZyA9IHRhbmtOdW0gKyBcIlwiO1xyXG4gICAgICAgICAgICBpZih0YW5rTnVtID09IDApe1xyXG4gICAgICAgICAgICAgICAgaWYoY2MuZ2FtZURhdGEuY3VyTGV2ZWwgPCAxMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgKytjYy5nYW1lRGF0YS5jdXJMZXZlbDtcclxuICAgICAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoXCJDaXR5U2NlbmVcIisgY2MuZ2FtZURhdGEuY3VyTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvdWJsZUZpcmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydC5zaG93LmNhbGwodGhpcywgXCLmuLjmiI/nu5PmnZ9cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoXCJTdGFydFNjZW5lXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+W8gOeBq+aMiemSrueCueWHu1xyXG4gICAgZmlyZUJ0bkNsaWNrOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKHRoaXMuX3BsYXllclRhbmtDdHJsLnN0YXJ0RmlyZSh0aGlzLmJ1bGxldFBvb2wpKXtcclxuICAgICAgICAgICAgLy/mkq3mlL7lsITlh7vpn7PmlYhcclxuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGxheSh0aGlzLl9wbGF5ZXJUYW5rQ3RybC5zaG9vdEF1ZGlvLCBmYWxzZSwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+mUgOavgeaXtuiwg+eUqFxyXG4gICAgb25EZXN0cm95OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMuYWRkQUlUYW5rLHRoaXMpO1xyXG4gICAgfSxcclxufSk7XHJcbiJdfQ==