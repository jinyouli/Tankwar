{"version":3,"sources":["assets\\scripts\\Alert.js"],"names":["tipAlert","_alert","_animSpeed","show","tipStr","callback","cc","loader","loadRes","Prefab","error","prefab","instantiate","director","getScene","addChild","find","getComponent","Label","string","on","event","dismiss","parent","startFadeIn","setScale","opacity","cbFadeIn","callFunc","onFadeInFinish","actionFadeIn","sequence","spawn","fadeTo","scaleTo","runAction","cbFadeOut","onFadeOutFinish","actionFadeOut","onDestroy","removeFromParent","module","exports"],"mappings":";;;;;;AAAA,IAAIA,QAAQ,GAAG;AACXC,EAAAA,MAAM,EAAE,IADG;AACa;AACxBC,EAAAA,UAAU,EAAE,GAFD,CAEa;;AAFb,CAAf;AAKA;;;;;;;AAMA,IAAIC,IAAI,GAAG,SAAPA,IAAO,CAAUC,MAAV,EAAiBC,QAAjB,EAA2B;AAClCC,EAAAA,EAAE,CAACC,MAAH,CAAUC,OAAV,CAAkB,aAAlB,EAAgCF,EAAE,CAACG,MAAnC,EAA2C,UAAUC,KAAV,EAAiBC,MAAjB,EAAwB;AAC/D,QAAID,KAAJ,EAAU;AACNJ,MAAAA,EAAE,CAACI,KAAH,CAASA,KAAT;AACA;AACH;;AACDV,IAAAA,QAAQ,CAACC,MAAT,GAAkBK,EAAE,CAACM,WAAH,CAAeD,MAAf,CAAlB;AACAL,IAAAA,EAAE,CAACO,QAAH,CAAYC,QAAZ,GAAuBC,QAAvB,CAAgCf,QAAQ,CAACC,MAAzC,EAAgD,CAAhD;AACAK,IAAAA,EAAE,CAACU,IAAH,CAAQ,gBAAR,EAA0BC,YAA1B,CAAuCX,EAAE,CAACY,KAA1C,EAAiDC,MAAjD,GAA0Df,MAA1D;;AACA,QAAGC,QAAH,EAAY;AACRC,MAAAA,EAAE,CAACU,IAAH,CAAQ,aAAR,EAAuBI,EAAvB,CAA0B,OAA1B,EAAmC,UAAUC,KAAV,EAAiB;AAChDC,QAAAA,OAAO;AACPjB,QAAAA,QAAQ;AACX,OAHD,EAGG,IAHH;AAIH,KAb8D,CAc/D;;;AACAL,IAAAA,QAAQ,CAACC,MAAT,CAAgBsB,MAAhB,GAAyBjB,EAAE,CAACU,IAAH,CAAQ,QAAR,CAAzB;AACAQ,IAAAA,WAAW;AACd,GAjBD;AAkBH,CAnBD,EAqBA;;;AACA,IAAIA,WAAW,GAAG,SAAdA,WAAc,GAAY;AAC1B;AACAxB,EAAAA,QAAQ,CAACC,MAAT,CAAgBwB,QAAhB,CAAyB,CAAzB;;AACAzB,EAAAA,QAAQ,CAACC,MAAT,CAAgByB,OAAhB,GAA0B,CAA1B;AACA,MAAIC,QAAQ,GAAGrB,EAAE,CAACsB,QAAH,CAAYC,cAAZ,EAA4B,IAA5B,CAAf;AACA,MAAIC,YAAY,GAAGxB,EAAE,CAACyB,QAAH,CAAYzB,EAAE,CAAC0B,KAAH,CAAS1B,EAAE,CAAC2B,MAAH,CAAUjC,QAAQ,CAACE,UAAnB,EAA+B,GAA/B,CAAT,EAA8CI,EAAE,CAAC4B,OAAH,CAAWlC,QAAQ,CAACE,UAApB,EAAgC,GAAhC,CAA9C,CAAZ,EAAiGyB,QAAjG,CAAnB;;AACA3B,EAAAA,QAAQ,CAACC,MAAT,CAAgBkC,SAAhB,CAA0BL,YAA1B;AACH,CAPD,EAUA;;;AACA,IAAID,cAAc,GAAG,SAAjBA,cAAiB,GAAY,CAChC,CADD,EAGA;;;AACA,IAAIP,OAAO,GAAG,SAAVA,OAAU,GAAY;AACtB,MAAI,CAACtB,QAAQ,CAACC,MAAd,EAAsB;AAClB;AACH;;AACD,MAAImC,SAAS,GAAG9B,EAAE,CAACsB,QAAH,CAAYS,eAAZ,EAA6B,IAA7B,CAAhB;AACA,MAAIC,aAAa,GAAGhC,EAAE,CAACyB,QAAH,CAAYzB,EAAE,CAAC0B,KAAH,CAAS1B,EAAE,CAAC2B,MAAH,CAAUjC,QAAQ,CAACE,UAAnB,EAA+B,CAA/B,CAAT,EAA4CI,EAAE,CAAC4B,OAAH,CAAWlC,QAAQ,CAACE,UAApB,EAAgC,GAAhC,CAA5C,CAAZ,EAA+FkC,SAA/F,CAApB;;AACApC,EAAAA,QAAQ,CAACC,MAAT,CAAgBkC,SAAhB,CAA0BG,aAA1B;AACH,CAPD,EASA;;;AACA,IAAID,eAAe,GAAG,SAAlBA,eAAkB,GAAY;AAC9BE,EAAAA,SAAS;AACZ,CAFD;;AAIA,IAAIA,SAAS,GAAG,SAAZA,SAAY,GAAY;AACxB,MAAIvC,QAAQ,CAACC,MAAT,IAAmB,IAAvB,EAA6B;AACzBD,IAAAA,QAAQ,CAACC,MAAT,CAAgBuC,gBAAhB;;AACAxC,IAAAA,QAAQ,CAACC,MAAT,GAAkB,IAAlB;AACH;AACJ,CALD;;AAOAwC,MAAM,CAACC,OAAP,GAAe;AACbvC,EAAAA,IAAI,EAAJA;AADa,CAAf","sourceRoot":"/","sourcesContent":["let tipAlert = {\r\n    _alert: null,           //prefab\r\n    _animSpeed: 0.3,        //弹窗动画速度\r\n};\r\n \r\n/**\r\n * @param tipStr\r\n * @param leftStr\r\n * @param rightStr\r\n * @param callback\r\n */\r\nlet show = function (tipStr,callback) {\r\n    cc.loader.loadRes(\"Alert/Alert\",cc.Prefab, function (error, prefab){\r\n        if (error){\r\n            cc.error(error);\r\n            return;\r\n        }\r\n        tipAlert._alert = cc.instantiate(prefab);\r\n        cc.director.getScene().addChild(tipAlert._alert,3);\r\n        cc.find(\"Alert/bg/title\").getComponent(cc.Label).string = tipStr;\r\n        if(callback){\r\n            cc.find(\"Alert/bg/ok\").on('click', function (event) {\r\n                dismiss();\r\n                callback();\r\n            }, this);\r\n        }\r\n        //设置parent 为当前场景的Canvas ，position跟随父节点\r\n        tipAlert._alert.parent = cc.find(\"Canvas\");\r\n        startFadeIn();\r\n    });\r\n};\r\n \r\n// 执行弹进动画\r\nlet startFadeIn = function () {\r\n    //动画\r\n    tipAlert._alert.setScale(2);\r\n    tipAlert._alert.opacity = 0;\r\n    let cbFadeIn = cc.callFunc(onFadeInFinish, this);\r\n    let actionFadeIn = cc.sequence(cc.spawn(cc.fadeTo(tipAlert._animSpeed, 255), cc.scaleTo(tipAlert._animSpeed, 1.0)), cbFadeIn);\r\n    tipAlert._alert.runAction(actionFadeIn);\r\n};\r\n \r\n \r\n// 弹进动画完成回调\r\nlet onFadeInFinish = function () {\r\n};\r\n \r\n// 执行弹出动画\r\nlet dismiss = function () {\r\n    if (!tipAlert._alert) {\r\n        return;\r\n    }\r\n    let cbFadeOut = cc.callFunc(onFadeOutFinish, this);\r\n    let actionFadeOut = cc.sequence(cc.spawn(cc.fadeTo(tipAlert._animSpeed, 0), cc.scaleTo(tipAlert._animSpeed, 2.0)), cbFadeOut);\r\n    tipAlert._alert.runAction(actionFadeOut);\r\n};\r\n \r\n// 弹出动画完成回调\r\nlet onFadeOutFinish = function () {\r\n    onDestroy();\r\n};\r\n \r\nlet onDestroy = function () {\r\n    if (tipAlert._alert != null) {\r\n        tipAlert._alert.removeFromParent();\r\n        tipAlert._alert = null;\r\n    }\r\n};\r\n \r\nmodule.exports={\r\n  show\r\n};\r\n"]}