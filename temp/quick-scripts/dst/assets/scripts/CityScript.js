
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/CityScript.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7f0b08Dcw5F7oWFl36ggKRC', 'CityScript');
// scripts/CityScript.js

"use strict";

var TankType = require("TankData").tankType;

var alert = require('Alert');

cc.Class({
  "extends": cc.Component,
  properties: {
    //地图
    curMap: cc.TiledMap,
    //摇杆
    yaogan: cc.Node,
    //子弹预制体
    bullet: cc.Prefab,
    //坦克预制体
    tank: {
      "default": null,
      type: cc.Prefab
    },
    //最大数量
    maxCount: 5,
    life: 3,
    //出生地
    bornPoses: {
      "default": [],
      type: cc.Vec2
    },
    //坦克皮肤
    spriteFrames: {
      "default": [],
      type: cc.SpriteFrame
    },
    //坦克移动速度
    tankSpeeds: {
      "default": [],
      type: cc.Float
    },
    //坦克子弹发射间隔时间
    tankFireTimes: {
      "default": [],
      type: cc.Float
    },
    //坦克血量
    tankBloods: {
      "default": [],
      type: cc.Integer
    },
    enemyNum: {
      type: cc.Label,
      "default": null
    },
    lifeNum: {
      type: cc.Label,
      "default": null
    }
  },
  // use this for initialization
  onLoad: function onLoad() {
    // cc.director.setDisplayStats(true);
    //获取摇杆控制组件
    this._joystickCtrl = this.yaogan.getComponent("JoystickCtrl"); //获取地图 TiledMap 组件

    this._tiledMap = this.curMap.getComponent('cc.TiledMap');
    this.enemyNum.string = this.maxCount + "";
    this.lifeNum.string = this.life + "";
  },
  start: function start(err) {
    if (err) {
      return;
    } //默认角度


    this.curAngle = null;
    var self = this; //注册监听事件

    this.registerInputEvent(); //引入地图数据

    this._tiledMapData = require("TiledMapData"); //获取地图尺寸

    this._curMapTileSize = this._tiledMap.getTileSize();
    this._curMapSize = cc.v2(this._tiledMap.node.width, this._tiledMap.node.height); //地图墙层

    this.mapLayer0 = this._tiledMap.getLayer("layer_0"); //初始化对象池(参数必须为对应脚本的文件名)

    this.bulletPool = new cc.NodePool("BulletScript");
    var initBulletCount = 20;

    for (var i = 0; i < initBulletCount; ++i) {
      var bullet = cc.instantiate(this.bullet);
      this.bulletPool.put(bullet);
    }

    this.tankPool = new cc.NodePool("TankScript");

    for (var i = 0; i < this.maxCount; ++i) {
      var tank = cc.instantiate(this.tank);
      this.tankPool.put(tank);
    }

    if (!cc.gameData) {
      cc.gameData = {};
    } //初始化


    cc.gameData.teamId = 0; //临时

    cc.gameData.single = true; //地图内坦克列表

    cc.gameData.tankList = []; //地图内子弹列表

    cc.gameData.bulletList = []; //获取组件

    this.tankNode = cc.find("/Canvas/Map/tank"); //加入player

    this.player = this.addPlayerTank(); //获取坦克控制组件

    this._playerTankCtrl = this.player.getComponent("TankScript"); //启动定时器，添加坦克

    this.schedule(this.addAITank, 3, cc.macro.REPEAT_FOREVER, 1);
  },
  //注册输入事件
  registerInputEvent: function registerInputEvent() {
    var self = this;

    this._joystickCtrl.addJoyStickTouchChangeListener(function (angle) {
      if (angle == self.curAngle && !self._playerTankCtrl.stopMove) {
        return;
      }

      self.curAngle = angle;

      if (angle != null) {
        //开始前进
        self._playerTankCtrl.tankMoveStart(angle);
      } else {
        //停止前进
        self._playerTankCtrl.tankMoveStop();
      }
    }); //按键按下


    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, function (event) {
      var angle = null;

      switch (event.keyCode) {
        case cc.macro.KEY.w:
          angle = 90;
          break;

        case cc.macro.KEY.s:
          angle = 270;
          break;

        case cc.macro.KEY.a:
          angle = 180;
          break;

        case cc.macro.KEY.d:
          angle = 0;
          break;
      }

      if (event.keyCode == cc.macro.KEY.k) {
        this.fireBtnClick();
      } else {
        self._playerTankCtrl.tankMoveStop();
      }

      if (angle != null) {
        //开始前进
        self._playerTankCtrl.tankMoveStart(angle);
      }
    }, this); //按键抬起

    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, function (event) {
      //停止前进
      if (event.keyCode != cc.macro.KEY.k) {
        self._playerTankCtrl.tankMoveStop();
      }
    }, this);
  },
  //碰撞检测
  collisionTest: function collisionTest(rect, bullet) {
    //判断是否碰到地图边界
    if (rect.xMin <= -this._curMapSize.x / 2 || rect.xMax >= this._curMapSize.x / 2 || rect.yMin <= -this._curMapSize.y / 2 || rect.yMax >= this._curMapSize.y / 2) {
      return true;
    } //判断是否撞墙
    //将坐标转换为地图坐标系


    var MinY = this._curMapSize.y / 2 - rect.yMin;
    var MaxY = this._curMapSize.y / 2 - rect.yMax;
    var MinX = this._curMapSize.x / 2 + rect.xMin;
    var MaxX = this._curMapSize.x / 2 + rect.xMax; //获取四个角的顶点

    var LeftDown = cc.v2(MinX, MinY);
    var RightDown = cc.v2(MaxX, MinY);
    var LeftUp = cc.v2(MinX, MaxY);
    var RightUp = cc.v2(MaxX, MaxY); //获取四条边的中心点

    var MidDown = cc.v2(MinX + (MaxX - MinX) / 2, MinY);
    var MidUp = cc.v2(MinX + (MaxX - MinX) / 2, MaxY);
    var MidLeft = cc.v2(MinX, MinY + (MaxY - MinY) / 2);
    var MidRight = cc.v2(MaxX, MinY + (MaxY - MinY) / 2); //检测碰撞

    return this._collisionTest([LeftDown, RightDown, LeftUp, RightUp, MidDown, MidUp, MidLeft, MidRight], bullet);
  },
  //内部碰撞检测方法
  _collisionTest: function _collisionTest(points, bullet) {
    var point = points.shift();
    var gid = this.mapLayer0.getTileGIDAt(cc.v2(parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height)));

    if (this._tiledMapData.gidToTileType[gid] != this._tiledMapData.tileType.tileNone && this._tiledMapData.gidToTileType[gid] != this._tiledMapData.tileType.tileGrass) {
      if (bullet && this._tiledMapData.gidToTileType[gid] == this._tiledMapData.tileType.tileWall) {
        this.mapLayer0.setTileGIDAt(0, parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height), 1);
      } else if (bullet && this._tiledMapData.gidToTileType[gid] == this._tiledMapData.tileType.tileKing) {
        this.mapLayer0.setTileGIDAt(0, 12, 25, 1);
        this.mapLayer0.setTileGIDAt(0, 12, 24, 1);
        this.mapLayer0.setTileGIDAt(0, 13, 25, 1);
        this.mapLayer0.setTileGIDAt(0, 13, 24, 1);
        this.gameOver();
      }

      return true;
    }

    if (points.length > 0) {
      return this._collisionTest(points, bullet);
    } else {
      return false;
    }
  },
  gameOver: function gameOver() {
    for (var i = 0; i < cc.gameData.tankList.length; i++) {
      var tank = cc.gameData.tankList[i];
      var tankCtrl = tank.getComponent("TankScript");
      tankCtrl.tankStop();
    } //弹窗调用


    alert.show.call(this, "游戏结束", function () {
      cc.director.loadScene("StartScene");
    });
  },
  //加入玩家坦克
  addPlayerTank: function addPlayerTank(team) {
    if (this.tankPool.size() > 0) {
      var tank = this.tankPool.get();
      tank.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[this.spriteFrames.length - 1];
      tank.position = this.bornPoses[this.bornPoses.length - 1]; //获取坦克控制组件

      var tankCtrl = tank.getComponent("TankScript"); //设置坦克属性

      tankCtrl.tankType = TankType.Player;
      tankCtrl.speed = this.tankSpeeds[this.tankSpeeds.length - 1];
      tankCtrl.fireTime = this.tankFireTimes[this.tankFireTimes.length - 1]; //tankCtrl.blood = this.tankBloods[this.tankBloods.length-1];
      //tankCtrl.blood = this.life ;

      tankCtrl.blood = 1;
      tankCtrl.die = false;

      if (!team) {
        if (cc.gameData.single) {
          //单机版
          tankCtrl.team = 0;
        } else {
          //大乱斗
          tankCtrl.team = ++cc.gameData.teamId;
        }
      } else {
        //组队
        tankCtrl.team = team;
      }

      tank.parent = this.tankNode; //加到列表

      cc.gameData.tankList.push(tank);
      return tank;
    }

    return null;
  },
  //加入AI
  addAITank: function addAITank(dt, team) {
    if (this.tankPool.size() > 0 && this.maxCount > 0) {
      var tank = this.tankPool.get();
      var index = parseInt(Math.random() * 3, 10); //获取坦克控制组件

      var tankCtrl = tank.getComponent("TankScript"); //设置坦克属性

      tank.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[index];
      tank.position = this.bornPoses[index];
      tankCtrl.tankType = index;
      tankCtrl.speed = this.tankSpeeds[index];
      tankCtrl.fireTime = this.tankFireTimes[index];
      tankCtrl.blood = this.tankBloods[index];
      tankCtrl.die = false;

      if (!team) {
        if (cc.gameData.single) {
          //单机版
          tankCtrl.team = 1;
        } else {
          //大乱斗
          tankCtrl.team = ++cc.gameData.teamId;
        }
      } else {
        //组队
        tankCtrl.team = team;
      }

      if (index == 0) {
        tank.angle = 90;
      } else if (index == 1) {
        tank.angle = 180;
      } else if (index == 2) {
        tank.angle = 270;
      }

      if (tankCtrl.collisionTank(tank.getBoundingBox())) {
        for (var i = 0; i < this.bornPoses.length - 1; i++) {
          tank.position = this.bornPoses[i];

          if (!tankCtrl.collisionTank(tank.getBoundingBox())) {
            break;
          }
        }
      }

      tank.parent = this.tankNode; //加到列表

      cc.gameData.tankList.push(tank);
      this.maxCount--;
    }
  },
  tankBoom: function tankBoom(tank) {
    tank.parent = null;
    tank.getComponent("TankScript").die = true;
    this.tankPool.put(tank);

    if (cc.gameData.single && tank.getComponent("TankScript").team == 0) {
      //cc.director.loadScene("StartScene");
      this.life--;
      this.lifeNum.string = this.life + "";

      if (this.life > 0) {
        this.addPlayerTank();
      } else {
        this.gameOver();
      }
    } else {
      this.enemyNum.string = Number(this.enemyNum.string) - 1 + "";
    }
  },
  //开火按钮点击
  fireBtnClick: function fireBtnClick() {
    if (this._playerTankCtrl.startFire(this.bulletPool)) {
      //播放射击音效
      cc.audioEngine.play(this._playerTankCtrl.shootAudio, false, 1);
    }
  },
  //销毁时调用
  onDestroy: function onDestroy() {
    this.unschedule(this.addAITank, this);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL0NpdHlTY3JpcHQuanMiXSwibmFtZXMiOlsiVGFua1R5cGUiLCJyZXF1aXJlIiwidGFua1R5cGUiLCJhbGVydCIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiY3VyTWFwIiwiVGlsZWRNYXAiLCJ5YW9nYW4iLCJOb2RlIiwiYnVsbGV0IiwiUHJlZmFiIiwidGFuayIsInR5cGUiLCJtYXhDb3VudCIsImxpZmUiLCJib3JuUG9zZXMiLCJWZWMyIiwic3ByaXRlRnJhbWVzIiwiU3ByaXRlRnJhbWUiLCJ0YW5rU3BlZWRzIiwiRmxvYXQiLCJ0YW5rRmlyZVRpbWVzIiwidGFua0Jsb29kcyIsIkludGVnZXIiLCJlbmVteU51bSIsIkxhYmVsIiwibGlmZU51bSIsIm9uTG9hZCIsIl9qb3lzdGlja0N0cmwiLCJnZXRDb21wb25lbnQiLCJfdGlsZWRNYXAiLCJzdHJpbmciLCJzdGFydCIsImVyciIsImN1ckFuZ2xlIiwic2VsZiIsInJlZ2lzdGVySW5wdXRFdmVudCIsIl90aWxlZE1hcERhdGEiLCJfY3VyTWFwVGlsZVNpemUiLCJnZXRUaWxlU2l6ZSIsIl9jdXJNYXBTaXplIiwidjIiLCJub2RlIiwid2lkdGgiLCJoZWlnaHQiLCJtYXBMYXllcjAiLCJnZXRMYXllciIsImJ1bGxldFBvb2wiLCJOb2RlUG9vbCIsImluaXRCdWxsZXRDb3VudCIsImkiLCJpbnN0YW50aWF0ZSIsInB1dCIsInRhbmtQb29sIiwiZ2FtZURhdGEiLCJ0ZWFtSWQiLCJzaW5nbGUiLCJ0YW5rTGlzdCIsImJ1bGxldExpc3QiLCJ0YW5rTm9kZSIsImZpbmQiLCJwbGF5ZXIiLCJhZGRQbGF5ZXJUYW5rIiwiX3BsYXllclRhbmtDdHJsIiwic2NoZWR1bGUiLCJhZGRBSVRhbmsiLCJtYWNybyIsIlJFUEVBVF9GT1JFVkVSIiwiYWRkSm95U3RpY2tUb3VjaENoYW5nZUxpc3RlbmVyIiwiYW5nbGUiLCJzdG9wTW92ZSIsInRhbmtNb3ZlU3RhcnQiLCJ0YW5rTW92ZVN0b3AiLCJzeXN0ZW1FdmVudCIsIm9uIiwiU3lzdGVtRXZlbnQiLCJFdmVudFR5cGUiLCJLRVlfRE9XTiIsImV2ZW50Iiwia2V5Q29kZSIsIktFWSIsInciLCJzIiwiYSIsImQiLCJrIiwiZmlyZUJ0bkNsaWNrIiwiS0VZX1VQIiwiY29sbGlzaW9uVGVzdCIsInJlY3QiLCJ4TWluIiwieCIsInhNYXgiLCJ5TWluIiwieSIsInlNYXgiLCJNaW5ZIiwiTWF4WSIsIk1pblgiLCJNYXhYIiwiTGVmdERvd24iLCJSaWdodERvd24iLCJMZWZ0VXAiLCJSaWdodFVwIiwiTWlkRG93biIsIk1pZFVwIiwiTWlkTGVmdCIsIk1pZFJpZ2h0IiwiX2NvbGxpc2lvblRlc3QiLCJwb2ludHMiLCJwb2ludCIsInNoaWZ0IiwiZ2lkIiwiZ2V0VGlsZUdJREF0IiwicGFyc2VJbnQiLCJnaWRUb1RpbGVUeXBlIiwidGlsZVR5cGUiLCJ0aWxlTm9uZSIsInRpbGVHcmFzcyIsInRpbGVXYWxsIiwic2V0VGlsZUdJREF0IiwidGlsZUtpbmciLCJnYW1lT3ZlciIsImxlbmd0aCIsInRhbmtDdHJsIiwidGFua1N0b3AiLCJzaG93IiwiY2FsbCIsImRpcmVjdG9yIiwibG9hZFNjZW5lIiwidGVhbSIsInNpemUiLCJnZXQiLCJTcHJpdGUiLCJzcHJpdGVGcmFtZSIsInBvc2l0aW9uIiwiUGxheWVyIiwic3BlZWQiLCJmaXJlVGltZSIsImJsb29kIiwiZGllIiwicGFyZW50IiwicHVzaCIsImR0IiwiaW5kZXgiLCJNYXRoIiwicmFuZG9tIiwiY29sbGlzaW9uVGFuayIsImdldEJvdW5kaW5nQm94IiwidGFua0Jvb20iLCJOdW1iZXIiLCJzdGFydEZpcmUiLCJhdWRpb0VuZ2luZSIsInBsYXkiLCJzaG9vdEF1ZGlvIiwib25EZXN0cm95IiwidW5zY2hlZHVsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQVAsQ0FBb0JDLFFBQW5DOztB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LGFBQUw7QUFDSCxPQUZELE1BRUs7QUFDRCxhQUFLNEQsUUFBTDtBQUNIO0FBQ0osS0FWRCxNQVdJO0FBQ0EsV0FBS2xHLFFBQUwsQ0FBY08sTUFBZCxHQUF1QnVILE1BQU0sQ0FBQyxLQUFLOUgsUUFBTCxDQUFjTyxNQUFmLENBQU4sR0FBK0IsQ0FBL0IsR0FBbUMsRUFBMUQ7QUFDSDtBQUNKLEdBclhJO0FBdVhMO0FBQ0F1RCxFQUFBQSxZQUFZLEVBQUUsd0JBQVU7QUFDcEIsUUFBRyxLQUFLdkIsZUFBTCxDQUFxQndGLFNBQXJCLENBQStCLEtBQUt4RyxVQUFwQyxDQUFILEVBQW1EO0FBQy9DO0FBQ0E5QyxNQUFBQSxFQUFFLENBQUN1SixXQUFILENBQWVDLElBQWYsQ0FBb0IsS0FBSzFGLGVBQUwsQ0FBcUIyRixVQUF6QyxFQUFxRCxLQUFyRCxFQUE0RCxDQUE1RDtBQUNIO0FBQ0osR0E3WEk7QUErWEw7QUFDQUMsRUFBQUEsU0FBUyxFQUFFLHFCQUFZO0FBQ25CLFNBQUtDLFVBQUwsQ0FBZ0IsS0FBSzNGLFNBQXJCLEVBQStCLElBQS9CO0FBQ0g7QUFsWUksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFRhbmtUeXBlID0gcmVxdWlyZShcIlRhbmtEYXRhXCIpLnRhbmtUeXBlO1xubGV0IGFsZXJ0ID0gcmVxdWlyZSgnQWxlcnQnKTtcblxuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuXG4gICAgICAgIC8v5Zyw5Zu+XG4gICAgICAgIGN1ck1hcDogY2MuVGlsZWRNYXAsXG4gICAgICAgIC8v5pGH5p2GXG4gICAgICAgIHlhb2dhbjogY2MuTm9kZSxcblxuICAgICAgICAvL+WtkOW8uemihOWItuS9k1xuICAgICAgICBidWxsZXQ6IGNjLlByZWZhYixcbiAgICAgICAgLy/lnablhYvpooTliLbkvZNcbiAgICAgICAgdGFuazoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLlByZWZhYixcbiAgICAgICAgfSxcbiAgICAgICAgLy/mnIDlpKfmlbDph49cbiAgICAgICAgbWF4Q291bnQ6IDUsXG4gICAgICAgIGxpZmU6IDMsXG4gICAgICAgIC8v5Ye655Sf5ZywXG4gICAgICAgIGJvcm5Qb3Nlczoge1xuICAgICAgICAgICAgZGVmYXVsdDogW10sXG4gICAgICAgICAgICB0eXBlOiBjYy5WZWMyLFxuICAgICAgICB9LFxuICAgICAgICAvL+WdpuWFi+earuiCpFxuICAgICAgICBzcHJpdGVGcmFtZXM6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXG4gICAgICAgIH0sXG4gICAgICAgIC8v5Z2m5YWL56e75Yqo6YCf5bqmXG4gICAgICAgIHRhbmtTcGVlZHM6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogY2MuRmxvYXQsXG4gICAgICAgIH0sXG4gICAgICAgIC8v5Z2m5YWL5a2Q5by55Y+R5bCE6Ze06ZqU5pe26Ze0XG4gICAgICAgIHRhbmtGaXJlVGltZXM6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogY2MuRmxvYXQsXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy/lnablhYvooYDph49cbiAgICAgICAgdGFua0Jsb29kczoge1xuICAgICAgICAgICAgZGVmYXVsdDogW10sXG4gICAgICAgICAgICB0eXBlOiBjYy5JbnRlZ2VyLFxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgZW5lbXlOdW06IHtcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsLFxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgICAgbGlmZU51bToge1xuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICB9LFxuXG4gICAgfSxcblxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBjYy5kaXJlY3Rvci5zZXREaXNwbGF5U3RhdHModHJ1ZSk7XG4gICAgICAgIC8v6I635Y+W5pGH5p2G5o6n5Yi257uE5Lu2XG4gICAgICAgIHRoaXMuX2pveXN0aWNrQ3RybCA9IHRoaXMueWFvZ2FuLmdldENvbXBvbmVudChcIkpveXN0aWNrQ3RybFwiKTtcbiAgICAgICAgLy/ojrflj5blnLDlm74gVGlsZWRNYXAg57uE5Lu2XG4gICAgICAgIHRoaXMuX3RpbGVkTWFwID0gdGhpcy5jdXJNYXAuZ2V0Q29tcG9uZW50KCdjYy5UaWxlZE1hcCcpO1xuICAgICAgICB0aGlzLmVuZW15TnVtLnN0cmluZyA9IHRoaXMubWF4Q291bnQgKyBcIlwiO1xuICAgICAgICB0aGlzLmxpZmVOdW0uc3RyaW5nID0gdGhpcy5saWZlICsgXCJcIjtcbiAgICB9LFxuXG4gICAgc3RhcnQ6IGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGlmKGVycil7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvL+m7mOiupOinkuW6plxuICAgICAgICB0aGlzLmN1ckFuZ2xlID0gbnVsbDtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIC8v5rOo5YaM55uR5ZCs5LqL5Lu2XG4gICAgICAgIHRoaXMucmVnaXN0ZXJJbnB1dEV2ZW50KCk7XG4gICAgICAgIC8v5byV5YWl5Zyw5Zu+5pWw5o2uXG4gICAgICAgIHRoaXMuX3RpbGVkTWFwRGF0YSA9IHJlcXVpcmUoXCJUaWxlZE1hcERhdGFcIik7XG5cbiAgICAgICAgLy/ojrflj5blnLDlm77lsLrlr7hcbiAgICAgICAgdGhpcy5fY3VyTWFwVGlsZVNpemUgPSB0aGlzLl90aWxlZE1hcC5nZXRUaWxlU2l6ZSgpO1xuICAgICAgICB0aGlzLl9jdXJNYXBTaXplID0gY2MudjIodGhpcy5fdGlsZWRNYXAubm9kZS53aWR0aCx0aGlzLl90aWxlZE1hcC5ub2RlLmhlaWdodCk7XG4gICAgICAgIFxuICAgICAgICAvL+WcsOWbvuWimeWxglxuICAgICAgICB0aGlzLm1hcExheWVyMCA9IHRoaXMuX3RpbGVkTWFwLmdldExheWVyKFwibGF5ZXJfMFwiKTtcblxuICAgICAgICAvL+WIneWni+WMluWvueixoeaxoCjlj4LmlbDlv4XpobvkuLrlr7nlupTohJrmnKznmoTmlofku7blkI0pXG4gICAgICAgIHRoaXMuYnVsbGV0UG9vbCA9IG5ldyBjYy5Ob2RlUG9vbChcIkJ1bGxldFNjcmlwdFwiKTtcbiAgICAgICAgdmFyIGluaXRCdWxsZXRDb3VudCA9IDIwO1xuICAgICAgICBmb3IodmFyIGk9MDsgaTxpbml0QnVsbGV0Q291bnQ7ICsraSl7XG4gICAgICAgICAgICB2YXIgYnVsbGV0ID0gY2MuaW5zdGFudGlhdGUodGhpcy5idWxsZXQpO1xuICAgICAgICAgICAgdGhpcy5idWxsZXRQb29sLnB1dChidWxsZXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFua1Bvb2wgPSBuZXcgY2MuTm9kZVBvb2woXCJUYW5rU2NyaXB0XCIpO1xuICAgICAgICBmb3IodmFyIGk9MDsgaTx0aGlzLm1heENvdW50OyArK2kpe1xuICAgICAgICAgICAgdmFyIHRhbmsgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnRhbmspO1xuICAgICAgICAgICAgdGhpcy50YW5rUG9vbC5wdXQodGFuayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoIWNjLmdhbWVEYXRhKXtcbiAgICAgICAgICAgIGNjLmdhbWVEYXRhID0ge307XG4gICAgICAgIH1cbiAgICAgICAgLy/liJ3lp4vljJZcbiAgICAgICAgY2MuZ2FtZURhdGEudGVhbUlkID0gMDtcbiAgICAgICAgLy/kuLTml7ZcbiAgICAgICAgY2MuZ2FtZURhdGEuc2luZ2xlID0gdHJ1ZTtcblxuICAgICAgICAvL+WcsOWbvuWGheWdpuWFi+WIl+ihqFxuICAgICAgICBjYy5nYW1lRGF0YS50YW5rTGlzdCA9IFtdO1xuICAgICAgICAvL+WcsOWbvuWGheWtkOW8ueWIl+ihqFxuICAgICAgICBjYy5nYW1lRGF0YS5idWxsZXRMaXN0ID0gW107XG5cbiAgICAgICAgLy/ojrflj5bnu4Tku7ZcbiAgICAgICAgdGhpcy50YW5rTm9kZSA9IGNjLmZpbmQoXCIvQ2FudmFzL01hcC90YW5rXCIpO1xuICAgICAgICAvL+WKoOWFpXBsYXllclxuICAgICAgICB0aGlzLnBsYXllciA9IHRoaXMuYWRkUGxheWVyVGFuaygpO1xuICAgICAgICAvL+iOt+WPluWdpuWFi+aOp+WItue7hOS7tlxuICAgICAgICB0aGlzLl9wbGF5ZXJUYW5rQ3RybCA9IHRoaXMucGxheWVyLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIik7IFxuXG4gICAgICAgIC8v5ZCv5Yqo5a6a5pe25Zmo77yM5re75Yqg5Z2m5YWLXG4gICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy5hZGRBSVRhbmssMyxjYy5tYWNyby5SRVBFQVRfRk9SRVZFUiwxKTtcbiAgICAgICAgXG4gICAgfSxcblxuICAgIC8v5rOo5YaM6L6T5YWl5LqL5Lu2XG4gICAgcmVnaXN0ZXJJbnB1dEV2ZW50OiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX2pveXN0aWNrQ3RybC5hZGRKb3lTdGlja1RvdWNoQ2hhbmdlTGlzdGVuZXIoZnVuY3Rpb24gKGFuZ2xlKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGFuZ2xlID09IHNlbGYuY3VyQW5nbGUgJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5fcGxheWVyVGFua0N0cmwuc3RvcE1vdmUgKXtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmN1ckFuZ2xlID0gYW5nbGU7XG5cbiAgICAgICAgICAgIGlmKGFuZ2xlIT1udWxsKXtcbiAgICAgICAgICAgICAgICAvL+W8gOWni+WJjei/m1xuICAgICAgICAgICAgICAgIHNlbGYuX3BsYXllclRhbmtDdHJsLnRhbmtNb3ZlU3RhcnQoYW5nbGUpO1xuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIC8v5YGc5q2i5YmN6L+bXG4gICAgICAgICAgICAgICAgc2VsZi5fcGxheWVyVGFua0N0cmwudGFua01vdmVTdG9wKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG4gICAgICAgIC8v5oyJ6ZSu5oyJ5LiLXG4gICAgICAgIGNjLnN5c3RlbUV2ZW50Lm9uKGNjLlN5c3RlbUV2ZW50LkV2ZW50VHlwZS5LRVlfRE9XTiwgXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChldmVudC5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgY2MubWFjcm8uS0VZLnc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IDkwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgY2MubWFjcm8uS0VZLnM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IDI3MDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGNjLm1hY3JvLktFWS5hOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSAxODA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBjYy5tYWNyby5LRVkuZDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihldmVudC5rZXlDb2RlID09IGNjLm1hY3JvLktFWS5rKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJlQnRuQ2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3BsYXllclRhbmtDdHJsLnRhbmtNb3ZlU3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhbmdsZSE9bnVsbCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5byA5aeL5YmN6L+bXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3BsYXllclRhbmtDdHJsLnRhbmtNb3ZlU3RhcnQoYW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAvL+aMiemUruaKrOi1t1xuICAgICAgICBjYy5zeXN0ZW1FdmVudC5vbihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX1VQLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChldmVudCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lgZzmraLliY3ov5tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihldmVudC5rZXlDb2RlICE9IGNjLm1hY3JvLktFWS5rKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheWVyVGFua0N0cmwudGFua01vdmVTdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcyk7XG5cbiAgICB9LFxuXG4gICAgLy/norDmkp7mo4DmtYtcbiAgICBjb2xsaXNpb25UZXN0OiBmdW5jdGlvbihyZWN0LCBidWxsZXQpe1xuICAgICAgICAvL+WIpOaWreaYr+WQpueisOWIsOWcsOWbvui+ueeVjFxuICAgICAgICBpZiAocmVjdC54TWluIDw9IC10aGlzLl9jdXJNYXBTaXplLngvMiB8fCByZWN0LnhNYXggPj0gdGhpcy5fY3VyTWFwU2l6ZS54LzIgfHxcblx0XHQgICAgcmVjdC55TWluIDw9IC10aGlzLl9jdXJNYXBTaXplLnkvMiB8fCByZWN0LnlNYXggPj0gdGhpcy5fY3VyTWFwU2l6ZS55LzIpe1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy/liKTmlq3mmK/lkKbmkp7loplcbiAgICAgICAgLy/lsIblnZDmoIfovazmjaLkuLrlnLDlm77lnZDmoIfns7tcbiAgICAgICAgdmFyIE1pblkgPSB0aGlzLl9jdXJNYXBTaXplLnkvMiAtIHJlY3QueU1pbjtcblx0ICAgIHZhciBNYXhZID0gdGhpcy5fY3VyTWFwU2l6ZS55LzIgLSByZWN0LnlNYXg7XG4gICAgICAgIHZhciBNaW5YID0gdGhpcy5fY3VyTWFwU2l6ZS54LzIgKyByZWN0LnhNaW47XG4gICAgICAgIHZhciBNYXhYID0gdGhpcy5fY3VyTWFwU2l6ZS54LzIgKyByZWN0LnhNYXg7XG5cbiAgICAgICAgLy/ojrflj5blm5vkuKrop5LnmoTpobbngrlcbiAgICAgICAgdmFyIExlZnREb3duID0gY2MudjIoTWluWCwgTWluWSk7XG4gICAgICAgIHZhciBSaWdodERvd24gPSBjYy52MihNYXhYLCBNaW5ZKTtcbiAgICAgICAgdmFyIExlZnRVcCA9IGNjLnYyKE1pblgsIE1heFkpO1xuICAgICAgICB2YXIgUmlnaHRVcCA9IGNjLnYyKE1heFgsIE1heFkpO1xuXG4gICAgICAgIC8v6I635Y+W5Zub5p2h6L6555qE5Lit5b+D54K5XG4gICAgICAgIHZhciBNaWREb3duID0gY2MudjIoTWluWCsoTWF4WC1NaW5YKS8yLCBNaW5ZKTtcbiAgICAgICAgdmFyIE1pZFVwID0gY2MudjIoTWluWCsoTWF4WC1NaW5YKS8yLCBNYXhZKTtcbiAgICAgICAgdmFyIE1pZExlZnQgPSBjYy52MihNaW5YLCBNaW5ZKyhNYXhZLU1pblkpLzIpO1xuICAgICAgICB2YXIgTWlkUmlnaHQ9IGNjLnYyKE1heFgsIE1pblkrKE1heFktTWluWSkvMik7XG5cbiAgICAgICAgLy/mo4DmtYvnorDmkp5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbGxpc2lvblRlc3QoW0xlZnREb3duLFJpZ2h0RG93bixMZWZ0VXAsUmlnaHRVcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1pZERvd24sTWlkVXAsTWlkTGVmdCxNaWRSaWdodF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQpO1xuICAgIH0sXG5cbiAgICAvL+WGhemDqOeisOaSnuajgOa1i+aWueazlVxuICAgIF9jb2xsaXNpb25UZXN0OiBmdW5jdGlvbihwb2ludHMsIGJ1bGxldCl7XG4gICAgICAgIHZhciBwb2ludCA9IHBvaW50cy5zaGlmdCgpXG4gICAgICAgIHZhciBnaWQgPSB0aGlzLm1hcExheWVyMC5nZXRUaWxlR0lEQXQoY2MudjIocGFyc2VJbnQocG9pbnQueCAvIHRoaXMuX2N1ck1hcFRpbGVTaXplLndpZHRoKSxwYXJzZUludChwb2ludC55IC8gdGhpcy5fY3VyTWFwVGlsZVNpemUuaGVpZ2h0KSkpO1xuXG4gICAgICAgIGlmICh0aGlzLl90aWxlZE1hcERhdGEuZ2lkVG9UaWxlVHlwZVtnaWRdICE9IHRoaXMuX3RpbGVkTWFwRGF0YS50aWxlVHlwZS50aWxlTm9uZSAmJiBcbiAgICAgICAgICAgIHRoaXMuX3RpbGVkTWFwRGF0YS5naWRUb1RpbGVUeXBlW2dpZF0gIT0gdGhpcy5fdGlsZWRNYXBEYXRhLnRpbGVUeXBlLnRpbGVHcmFzcyl7XG4gICAgICAgICAgICBpZihidWxsZXQgJiYgdGhpcy5fdGlsZWRNYXBEYXRhLmdpZFRvVGlsZVR5cGVbZ2lkXSA9PSB0aGlzLl90aWxlZE1hcERhdGEudGlsZVR5cGUudGlsZVdhbGwpe1xuICAgICAgICAgICAgICAgIHRoaXMubWFwTGF5ZXIwLnNldFRpbGVHSURBdCgwLCBwYXJzZUludChwb2ludC54IC8gdGhpcy5fY3VyTWFwVGlsZVNpemUud2lkdGgpLHBhcnNlSW50KHBvaW50LnkgLyB0aGlzLl9jdXJNYXBUaWxlU2l6ZS5oZWlnaHQpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYoYnVsbGV0ICYmIHRoaXMuX3RpbGVkTWFwRGF0YS5naWRUb1RpbGVUeXBlW2dpZF0gPT0gdGhpcy5fdGlsZWRNYXBEYXRhLnRpbGVUeXBlLnRpbGVLaW5nKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLm1hcExheWVyMC5zZXRUaWxlR0lEQXQoMCwgMTIsIDI1LCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcExheWVyMC5zZXRUaWxlR0lEQXQoMCwgMTIsIDI0LCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcExheWVyMC5zZXRUaWxlR0lEQXQoMCwgMTMsIDI1LCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcExheWVyMC5zZXRUaWxlR0lEQXQoMCwgMTMsIDI0LCAxKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmKHBvaW50cy5sZW5ndGg+MCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29sbGlzaW9uVGVzdChwb2ludHMsIGJ1bGxldCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGdhbWVPdmVyOiBmdW5jdGlvbigpe1xuXG4gICAgICAgIGZvcih2YXIgaT0wOyBpPGNjLmdhbWVEYXRhLnRhbmtMaXN0Lmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIHZhciB0YW5rID0gY2MuZ2FtZURhdGEudGFua0xpc3RbaV1cbiAgICAgICAgICAgIHZhciB0YW5rQ3RybCA9IHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKTtcbiAgICAgICAgICAgIHRhbmtDdHJsLnRhbmtTdG9wKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvL+W8ueeql+iwg+eUqFxuICAgICAgICBhbGVydC5zaG93LmNhbGwodGhpcywgXCLmuLjmiI/nu5PmnZ9cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiU3RhcnRTY2VuZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8v5Yqg5YWl546p5a625Z2m5YWLXG4gICAgYWRkUGxheWVyVGFuazogZnVuY3Rpb24odGVhbSkge1xuICAgICAgICBpZih0aGlzLnRhbmtQb29sLnNpemUoKT4wKXtcbiAgICAgICAgICAgIHZhciB0YW5rID0gdGhpcy50YW5rUG9vbC5nZXQoKTtcbiAgICAgICAgICAgIHRhbmsuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLnNwcml0ZUZyYW1lc1t0aGlzLnNwcml0ZUZyYW1lcy5sZW5ndGgtMV07XG4gICAgICAgICAgICB0YW5rLnBvc2l0aW9uID0gdGhpcy5ib3JuUG9zZXNbdGhpcy5ib3JuUG9zZXMubGVuZ3RoLTFdO1xuICAgICAgICAgICAgLy/ojrflj5blnablhYvmjqfliLbnu4Tku7ZcbiAgICAgICAgICAgIHZhciB0YW5rQ3RybCA9IHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKTtcbiAgICAgICAgICAgIC8v6K6+572u5Z2m5YWL5bGe5oCnXG4gICAgICAgICAgICB0YW5rQ3RybC50YW5rVHlwZSA9IFRhbmtUeXBlLlBsYXllcjtcbiAgICAgICAgICAgIHRhbmtDdHJsLnNwZWVkID0gdGhpcy50YW5rU3BlZWRzW3RoaXMudGFua1NwZWVkcy5sZW5ndGgtMV07XG4gICAgICAgICAgICB0YW5rQ3RybC5maXJlVGltZSA9IHRoaXMudGFua0ZpcmVUaW1lc1t0aGlzLnRhbmtGaXJlVGltZXMubGVuZ3RoLTFdO1xuICAgICAgICAgICAgLy90YW5rQ3RybC5ibG9vZCA9IHRoaXMudGFua0Jsb29kc1t0aGlzLnRhbmtCbG9vZHMubGVuZ3RoLTFdO1xuICAgICAgICAgICAgLy90YW5rQ3RybC5ibG9vZCA9IHRoaXMubGlmZSA7XG4gICAgICAgICAgICB0YW5rQ3RybC5ibG9vZCA9IDE7XG4gICAgICAgICAgICB0YW5rQ3RybC5kaWUgPSBmYWxzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoIXRlYW0pe1xuICAgICAgICAgICAgICAgIGlmKGNjLmdhbWVEYXRhLnNpbmdsZSl7XG4gICAgICAgICAgICAgICAgICAgIC8v5Y2V5py654mIXG4gICAgICAgICAgICAgICAgICAgIHRhbmtDdHJsLnRlYW0gPSAwO1xuICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy/lpKfkubHmlpdcbiAgICAgICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9ICsrY2MuZ2FtZURhdGEudGVhbUlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAvL+e7hOmYn1xuICAgICAgICAgICAgICAgIHRhbmtDdHJsLnRlYW0gPSB0ZWFtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0YW5rLnBhcmVudCA9IHRoaXMudGFua05vZGU7XG4gICAgICAgICAgICAvL+WKoOWIsOWIl+ihqFxuICAgICAgICAgICAgY2MuZ2FtZURhdGEudGFua0xpc3QucHVzaCh0YW5rKTtcbiAgICAgICAgICAgIHJldHVybiB0YW5rO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvL+WKoOWFpUFJXG4gICAgYWRkQUlUYW5rOiBmdW5jdGlvbihkdCwgdGVhbSkge1xuICAgICAgICBpZih0aGlzLnRhbmtQb29sLnNpemUoKT4wICYmIHRoaXMubWF4Q291bnQgPiAwKXtcbiAgICAgICAgICAgIHZhciB0YW5rID0gdGhpcy50YW5rUG9vbC5nZXQoKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlSW50KE1hdGgucmFuZG9tKCkqMywgMTApO1xuICAgICAgICAgICAgLy/ojrflj5blnablhYvmjqfliLbnu4Tku7ZcbiAgICAgICAgICAgIHZhciB0YW5rQ3RybCA9IHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKTtcbiAgICAgICAgICAgIC8v6K6+572u5Z2m5YWL5bGe5oCnXG4gICAgICAgICAgICB0YW5rLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gdGhpcy5zcHJpdGVGcmFtZXNbaW5kZXhdO1xuICAgICAgICAgICAgdGFuay5wb3NpdGlvbiA9IHRoaXMuYm9yblBvc2VzW2luZGV4XTtcblxuICAgICAgICAgICAgdGFua0N0cmwudGFua1R5cGUgPSBpbmRleDtcbiAgICAgICAgICAgIHRhbmtDdHJsLnNwZWVkID0gdGhpcy50YW5rU3BlZWRzW2luZGV4XTtcbiAgICAgICAgICAgIHRhbmtDdHJsLmZpcmVUaW1lID0gdGhpcy50YW5rRmlyZVRpbWVzW2luZGV4XTtcbiAgICAgICAgICAgIHRhbmtDdHJsLmJsb29kID0gdGhpcy50YW5rQmxvb2RzW2luZGV4XTtcbiAgICAgICAgICAgIHRhbmtDdHJsLmRpZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZighdGVhbSl7XG4gICAgICAgICAgICAgICAgaWYoY2MuZ2FtZURhdGEuc2luZ2xlKXtcbiAgICAgICAgICAgICAgICAgICAgLy/ljZXmnLrniYhcbiAgICAgICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9IDE7XG4gICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL+Wkp+S5seaWl1xuICAgICAgICAgICAgICAgICAgICB0YW5rQ3RybC50ZWFtID0gKytjYy5nYW1lRGF0YS50ZWFtSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIC8v57uE6ZifXG4gICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9IHRlYW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGluZGV4ID09IDApe1xuICAgICAgICAgICAgICAgIHRhbmsuYW5nbGUgPSA5MDtcbiAgICAgICAgICAgIH1lbHNlIGlmKGluZGV4ID09IDEpe1xuICAgICAgICAgICAgICAgIHRhbmsuYW5nbGUgPSAxODA7XG4gICAgICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSAyKXtcbiAgICAgICAgICAgICAgICB0YW5rLmFuZ2xlID0gMjcwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodGFua0N0cmwuY29sbGlzaW9uVGFuayh0YW5rLmdldEJvdW5kaW5nQm94KCkpKXtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmJvcm5Qb3Nlcy5sZW5ndGgtMTsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgdGFuay5wb3NpdGlvbiA9IHRoaXMuYm9yblBvc2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZighdGFua0N0cmwuY29sbGlzaW9uVGFuayh0YW5rLmdldEJvdW5kaW5nQm94KCkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0YW5rLnBhcmVudCA9IHRoaXMudGFua05vZGU7XG4gICAgICAgICAgICAvL+WKoOWIsOWIl+ihqFxuICAgICAgICAgICAgY2MuZ2FtZURhdGEudGFua0xpc3QucHVzaCh0YW5rKTtcbiAgICAgICAgICAgIHRoaXMubWF4Q291bnQgLS07XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdGFua0Jvb206IGZ1bmN0aW9uKHRhbmspIHtcbiAgICAgICAgdGFuay5wYXJlbnQgPSBudWxsO1xuICAgICAgICB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIikuZGllID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50YW5rUG9vbC5wdXQodGFuayk7XG4gICAgICAgIGlmKGNjLmdhbWVEYXRhLnNpbmdsZSAmJiB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIikudGVhbSA9PSAwKXtcbiAgICAgICAgICAgIC8vY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiU3RhcnRTY2VuZVwiKTtcbiAgICAgICAgICAgIHRoaXMubGlmZSAtLTtcbiAgICAgICAgICAgIHRoaXMubGlmZU51bS5zdHJpbmcgPSB0aGlzLmxpZmUgKyBcIlwiO1xuXG4gICAgICAgICAgICBpZih0aGlzLmxpZmUgPiAwKXtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFBsYXllclRhbmsoKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhpcy5lbmVteU51bS5zdHJpbmcgPSBOdW1iZXIodGhpcy5lbmVteU51bS5zdHJpbmcpIC0gMSArIFwiXCI7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy/lvIDngavmjInpkq7ngrnlh7tcbiAgICBmaXJlQnRuQ2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKHRoaXMuX3BsYXllclRhbmtDdHJsLnN0YXJ0RmlyZSh0aGlzLmJ1bGxldFBvb2wpKXtcbiAgICAgICAgICAgIC8v5pKt5pS+5bCE5Ye76Z+z5pWIXG4gICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5wbGF5KHRoaXMuX3BsYXllclRhbmtDdHJsLnNob290QXVkaW8sIGZhbHNlLCAxKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvL+mUgOavgeaXtuiwg+eUqFxuICAgIG9uRGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnVuc2NoZWR1bGUodGhpcy5hZGRBSVRhbmssdGhpcyk7XG4gICAgfSxcbn0pO1xuIl19