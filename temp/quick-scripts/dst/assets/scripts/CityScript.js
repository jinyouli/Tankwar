
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/CityScript.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7f0b08Dcw5F7oWFl36ggKRC', 'CityScript');
// scripts/CityScript.js

"use strict";

var TankType = require("TankData").tankType;

var alert = require('Alert');

cc.Class({
  "extends": cc.Component,
  properties: {
    //地图
    curMap: cc.TiledMap,
    //摇杆
    yaogan: cc.Node,
    //子弹预制体
    bullet: cc.Prefab,
    //坦克预制体
    tank: {
      "default": null,
      type: cc.Prefab
    },
    //最大数量
    maxCount: 10,
    life: 3,
    //出生地
    bornPoses: {
      "default": [],
      type: cc.Vec2
    },
    //坦克皮肤
    spriteFrames: {
      "default": [],
      type: cc.SpriteFrame
    },
    //坦克移动速度
    tankSpeeds: {
      "default": [],
      type: cc.Float
    },
    //坦克子弹发射间隔时间
    tankFireTimes: {
      "default": [],
      type: cc.Float
    },
    //坦克血量
    tankBloods: {
      "default": [],
      type: cc.Integer
    },
    enemyNum: {
      type: cc.Label,
      "default": null
    },
    lifeNum: {
      type: cc.Label,
      "default": null
    },
    doubleFire: false,
    doubleFireBtn: {
      "default": null,
      type: cc.Node
    },
    doubleFireFrames: {
      "default": [],
      type: cc.SpriteFrame
    }
  },
  // use this for initialization
  onLoad: function onLoad() {
    // cc.director.setDisplayStats(true);
    //获取摇杆控制组件
    this._joystickCtrl = this.yaogan.getComponent("JoystickCtrl"); //获取地图 TiledMap 组件

    this._tiledMap = this.curMap.getComponent('cc.TiledMap');
    this.enemyNum.string = this.maxCount + "";
    this.lifeNum.string = this.life + "";
  },
  start: function start(err) {
    if (err) {
      return;
    } // alert.show.call(this, "关卡" + cc.gameData.curLevel, function () {
    // });
    //默认角度


    this.curAngle = null;
    var self = this; //注册监听事件

    this.registerInputEvent(); //引入地图数据

    this._tiledMapData = require("TiledMapData"); //获取地图尺寸

    this._curMapTileSize = this._tiledMap.getTileSize();
    this._curMapSize = cc.v2(this._tiledMap.node.width, this._tiledMap.node.height);
    cc.log("this._curMapTileSize =" + this._curMapTileSize);
    cc.log("this._curMapSize =" + this._curMapSize); //地图墙层

    this.mapLayer0 = this._tiledMap.getLayer("layer0"); //初始化对象池(参数必须为对应脚本的文件名)

    this.bulletPool = new cc.NodePool("BulletScript");
    var initBulletCount = 20;

    for (var i = 0; i < initBulletCount; ++i) {
      var bullet = cc.instantiate(this.bullet);
      this.bulletPool.put(bullet);
    }

    this.tankPool = new cc.NodePool("TankScript");

    for (var i = 0; i < this.maxCount; ++i) {
      var tank = cc.instantiate(this.tank);
      this.tankPool.put(tank);
    }

    if (!cc.gameData) {
      cc.gameData = {};
    } //初始化


    cc.gameData.teamId = 0; //临时

    cc.gameData.single = true; //地图内坦克列表

    cc.gameData.tankList = []; //地图内子弹列表

    cc.gameData.bulletList = []; //获取组件
    //this.tankNode = cc.find("/Canvas/Map/tank");

    this.tankNode = cc.find("/Canvas/map1/layer0"); //加入player

    this.player = this.addPlayerTank(); //获取坦克控制组件

    this._playerTankCtrl = this.player.getComponent("TankScript"); //启动定时器，添加坦克

    this.schedule(this.addAITank, 3, cc.macro.REPEAT_FOREVER, 1);
  },
  // called every frame, uncomment this function to activate update callback
  update: function update(dt) {
    if (this.doubleFire) {
      if (this._playerTankCtrl.startFire(this.bulletPool)) {//播放射击音效
        //cc.audioEngine.play(this._playerTankCtrl.shootAudio, false, 1);
      }
    }
  },
  setDoubleFire: function setDoubleFire() {
    this.doubleFire = !this.doubleFire;

    if (this.doubleFire) {
      this.doubleFireBtn.getComponent(cc.Sprite).spriteFrame = this.doubleFireFrames[1];
    } else {
      this.doubleFireBtn.getComponent(cc.Sprite).spriteFrame = this.doubleFireFrames[0];
    }
  },
  //注册输入事件
  registerInputEvent: function registerInputEvent() {
    var self = this;

    this._joystickCtrl.addJoyStickTouchChangeListener(function (angle) {
      if (angle == self.curAngle && !self._playerTankCtrl.stopMove) {
        return;
      }

      self.curAngle = angle;

      if (angle != null) {
        //开始前进
        self._playerTankCtrl.tankMoveStart(angle);
      } else {
        //停止前进
        self._playerTankCtrl.tankMoveStop();
      }
    }); //按键按下


    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, function (event) {
      var angle = null;

      switch (event.keyCode) {
        case cc.macro.KEY.w:
          angle = 90;
          break;

        case cc.macro.KEY.s:
          angle = 270;
          break;

        case cc.macro.KEY.a:
          angle = 180;
          break;

        case cc.macro.KEY.d:
          angle = 0;
          break;
      }

      if (event.keyCode == cc.macro.KEY.k) {
        this.fireBtnClick();
      } else {
        self._playerTankCtrl.tankMoveStop();
      }

      if (angle != null) {
        //开始前进
        self._playerTankCtrl.tankMoveStart(angle);
      }
    }, this); //按键抬起

    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, function (event) {
      //停止前进
      if (event.keyCode != cc.macro.KEY.k) {
        self._playerTankCtrl.tankMoveStop();
      }
    }, this);
  },
  //碰撞检测
  collisionTest: function collisionTest(rect, bullet) {
    //判断是否碰到地图边界
    if (rect.xMin <= -this._curMapSize.x / 2 || rect.xMax >= this._curMapSize.x / 2 || rect.yMin <= -this._curMapSize.y / 2 || rect.yMax >= this._curMapSize.y / 2) {
      return true;
    } //判断是否撞墙
    //将坐标转换为地图坐标系


    var MinY = this._curMapSize.y / 2 - rect.yMin;
    var MaxY = this._curMapSize.y / 2 - rect.yMax;
    var MinX = this._curMapSize.x / 2 + rect.xMin;
    var MaxX = this._curMapSize.x / 2 + rect.xMax; //获取四个角的顶点

    var LeftDown = cc.v2(MinX, MinY);
    var RightDown = cc.v2(MaxX, MinY);
    var LeftUp = cc.v2(MinX, MaxY);
    var RightUp = cc.v2(MaxX, MaxY); //获取四条边的中心点

    var MidDown = cc.v2(MinX + (MaxX - MinX) / 2, MinY);
    var MidUp = cc.v2(MinX + (MaxX - MinX) / 2, MaxY);
    var MidLeft = cc.v2(MinX, MinY + (MaxY - MinY) / 2);
    var MidRight = cc.v2(MaxX, MinY + (MaxY - MinY) / 2); //检测碰撞

    return this._collisionTest([LeftDown, RightDown, LeftUp, RightUp, MidDown, MidUp, MidLeft, MidRight], bullet);
  },
  //内部碰撞检测方法
  _collisionTest: function _collisionTest(points, bullet) {
    var point = points.shift();
    var gid = this.mapLayer0.getTileGIDAt(cc.v2(parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height)));

    if (this._tiledMapData.gidToTileType[gid] != this._tiledMapData.tileType.tileNone && this._tiledMapData.gidToTileType[gid] != this._tiledMapData.tileType.tileGrass) {
      if (bullet && this._tiledMapData.gidToTileType[gid] == this._tiledMapData.tileType.tileWall) {
        this.mapLayer0.setTileGIDAt(0, parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height), 1);
      } else if (bullet && this._tiledMapData.gidToTileType[gid] == this._tiledMapData.tileType.tileKing) {
        this.mapLayer0.setTileGIDAt(0, 12, 25, 1);
        this.mapLayer0.setTileGIDAt(0, 12, 24, 1);
        this.mapLayer0.setTileGIDAt(0, 13, 25, 1);
        this.mapLayer0.setTileGIDAt(0, 13, 24, 1);
        this.gameOver();
      }

      return true;
    }

    if (points.length > 0) {
      return this._collisionTest(points, bullet);
    } else {
      return false;
    }
  },
  gameOver: function gameOver() {
    this.doubleFire = false;

    for (var i = 0; i < cc.gameData.tankList.length; i++) {
      var tank = cc.gameData.tankList[i];
      var tankCtrl = tank.getComponent("TankScript");
      tankCtrl.tankStop();
    } //弹窗调用


    alert.show.call(this, "游戏结束", function () {
      cc.director.loadScene("StartScene");
    });
  },
  //加入玩家坦克
  addPlayerTank: function addPlayerTank(team) {
    if (this.tankPool.size() > 0) {
      var tank = this.tankPool.get();
      tank.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[this.spriteFrames.length - 1];
      tank.position = this.bornPoses[this.bornPoses.length - 1]; //获取坦克控制组件

      var tankCtrl = tank.getComponent("TankScript"); //设置坦克属性

      tankCtrl.tankType = TankType.Player;
      tankCtrl.speed = this.tankSpeeds[this.tankSpeeds.length - 1];
      tankCtrl.fireTime = this.tankFireTimes[this.tankFireTimes.length - 1]; //tankCtrl.blood = this.tankBloods[this.tankBloods.length-1];
      //tankCtrl.blood = this.life ;

      tankCtrl.blood = 1;
      tankCtrl.die = false;

      if (!team) {
        if (cc.gameData.single) {
          //单机版
          tankCtrl.team = 0;
        } else {
          //大乱斗
          tankCtrl.team = ++cc.gameData.teamId;
        }
      } else {
        //组队
        tankCtrl.team = team;
      }

      tank.parent = this.tankNode; //加到列表

      cc.gameData.tankList.push(tank);
      return tank;
    }

    return null;
  },
  //加入AI
  addAITank: function addAITank(dt, team) {
    if (this.tankPool.size() > 0 && this.maxCount > 0) {
      var tank = this.tankPool.get();
      var index = parseInt(Math.random() * 3, 10); //获取坦克控制组件

      var tankCtrl = tank.getComponent("TankScript"); //设置坦克属性

      tank.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[index];
      tank.position = this.bornPoses[index];
      tankCtrl.tankType = index;
      tankCtrl.speed = this.tankSpeeds[index];
      tankCtrl.fireTime = this.tankFireTimes[index];
      tankCtrl.blood = this.tankBloods[index];
      tankCtrl.die = false;

      if (!team) {
        if (cc.gameData.single) {
          //单机版
          tankCtrl.team = 1;
        } else {
          //大乱斗
          tankCtrl.team = ++cc.gameData.teamId;
        }
      } else {
        //组队
        tankCtrl.team = team;
      }

      if (index == 0) {
        tank.angle = 90;
      } else if (index == 1) {
        tank.angle = 180;
      } else if (index == 2) {
        tank.angle = 270;
      }

      if (tankCtrl.collisionTank(tank.getBoundingBox())) {
        for (var i = 0; i < this.bornPoses.length - 1; i++) {
          tank.position = this.bornPoses[i];

          if (!tankCtrl.collisionTank(tank.getBoundingBox())) {
            break;
          }
        }
      }

      tank.parent = this.tankNode; //加到列表

      cc.gameData.tankList.push(tank);
      this.maxCount--;
    }
  },
  tankBoom: function tankBoom(tank) {
    tank.parent = null;
    tank.getComponent("TankScript").die = true;
    this.tankPool.put(tank);

    if (cc.gameData.single && tank.getComponent("TankScript").team == 0) {
      this.life--;
      this.lifeNum.string = this.life + "";

      if (this.life > 0) {
        this.addPlayerTank();
      } else {
        this.gameOver();
      } // tank.getComponent("TankScript").blood = 1;

    } else {
      // tank.parent = null;
      // tank.getComponent("TankScript").die = true;
      // this.tankPool.put(tank);
      var tankNum = Number(this.enemyNum.string) - 1;
      this.enemyNum.string = tankNum + ""; // if(tankNum == 0){
      //     if(cc.gameData.curLevel < 10){
      //         ++cc.gameData.curLevel;
      //         cc.director.loadScene("CityScene"+ cc.gameData.curLevel);
      //     }
      //     else{
      //         this.doubleFire = false;
      //         alert.show.call(this, "你赢了", function () {
      //             cc.director.loadScene("StartScene");
      //         });
      //     }
      // }
    }
  },
  //开火按钮点击
  fireBtnClick: function fireBtnClick() {
    if (this._playerTankCtrl.startFire(this.bulletPool)) {
      //播放射击音效
      cc.audioEngine.play(this._playerTankCtrl.shootAudio, false, 1);
    }
  },
  //销毁时调用
  onDestroy: function onDestroy() {
    this.unschedule(this.addAITank, this);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL0NpdHlTY3JpcHQuanMiXSwibmFtZXMiOlsiVGFua1R5cGUiLCJyZXF1aXJlIiwidGFua1R5cGUiLCJhbGVydCIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiY3VyTWFwIiwiVGlsZWRNYXAiLCJ5YW9nYW4iLCJOb2RlIiwiYnVsbGV0IiwiUHJlZmFiIiwidGFuayIsInR5cGUiLCJtYXhDb3VudCIsImxpZmUiLCJib3JuUG9zZXMiLCJWZWMyIiwic3ByaXRlRnJhbWVzIiwiU3ByaXRlRnJhbWUiLCJ0YW5rU3BlZWRzIiwiRmxvYXQiLCJ0YW5rRmlyZVRpbWVzIiwidGFua0Jsb29kcyIsIkludGVnZXIiLCJlbmVteU51bSIsIkxhYmVsIiwibGlmZU51bSIsImRvdWJsZUZpcmUiLCJkb3VibGVGaXJlQnRuIiwiZG91YmxlRmlyZUZyYW1lcyIsIm9uTG9hZCIsIl9qb3lzdGlja0N0cmwiLCJnZXRDb21wb25lbnQiLCJfdGlsZWRNYXAiLCJzdHJpbmciLCJzdGFydCIsImVyciIsImN1ckFuZ2xlIiwic2VsZiIsInJlZ2lzdGVySW5wdXRFdmVudCIsIl90aWxlZE1hcERhdGEiLCJfY3VyTWFwVGlsZVNpemUiLCJnZXRUaWxlU2l6ZSIsIl9jdXJNYXBTaXplIiwidjIiLCJub2RlIiwid2lkdGgiLCJoZWlnaHQiLCJsb2ciLCJtYXBMYXllcjAiLCJnZXRMYXllciIsImJ1bGxldFBvb2wiLCJOb2RlUG9vbCIsImluaXRCdWxsZXRDb3VudCIsImkiLCJpbnN0YW50aWF0ZSIsInB1dCIsInRhbmtQb29sIiwiZ2FtZURhdGEiLCJ0ZWFtSWQiLCJzaW5nbGUiLCJ0YW5rTGlzdCIsImJ1bGxldExpc3QiLCJ0YW5rTm9kZSIsImZpbmQiLCJwbGF5ZXIiLCJhZGRQbGF5ZXJUYW5rIiwiX3BsYXllclRhbmtDdHJsIiwic2NoZWR1bGUiLCJhZGRBSVRhbmsiLCJtYWNybyIsIlJFUEVBVF9GT1JFVkVSIiwidXBkYXRlIiwiZHQiLCJzdGFydEZpcmUiLCJzZXREb3VibGVGaXJlIiwiU3ByaXRlIiwic3ByaXRlRnJhbWUiLCJhZGRKb3lTdGlja1RvdWNoQ2hhbmdlTGlzdGVuZXIiLCJhbmdsZSIsInN0b3BNb3ZlIiwidGFua01vdmVTdGFydCIsInRhbmtNb3ZlU3RvcCIsInN5c3RlbUV2ZW50Iiwib24iLCJTeXN0ZW1FdmVudCIsIkV2ZW50VHlwZSIsIktFWV9ET1dOIiwiZXZlbnQiLCJrZXlDb2RlIiwiS0VZIiwidyIsInMiLCJhIiwiZCIsImsiLCJmaXJlQnRuQ2xpY2siLCJLRVlfVVAiLCJjb2xsaXNpb25UZXN0IiwicmVjdCIsInhNaW4iLCJ4IiwieE1heCIsInlNaW4iLCJ5IiwieU1heCIsIk1pblkiLCJNYXhZIiwiTWluWCIsIk1heFgiLCJMZWZ0RG93biIsIlJpZ2h0RG93biIsIkxlZnRVcCIsIlJpZ2h0VXAiLCJNaWREb3duIiwiTWlkVXAiLCJNaWRMZWZ0IiwiTWlkUmlnaHQiLCJfY29sbGlzaW9uVGVzdCIsInBvaW50cyIsInBvaW50Iiwic2hpZnQiLCJnaWQiLCJnZXRUaWxlR0lEQXQiLCJwYXJzZUludCIsImdpZFRvVGlsZVR5cGUiLCJ0aWxlVHlwZSIsInRpbGVOb25lIiwidGlsZUdyYXNzIiwidGlsZVdhbGwiLCJzZXRUaWxlR0lEQXQiLCJ0aWxlS2luZyIsImdhbWVPdmVyIiwibGVuZ3RoIiwidGFua0N0cmwiLCJ0YW5rU3RvcCIsInNob3ciLCJjYWxsIiwiZGlyZWN0b3IiLCJsb2FkU2NlbmUiLCJ0ZWFtIiwic2l6ZSIsImdldCIsInBvc2l0aW9uIiwiUGxheWVyIiwic3BlZWQiLCJmaXJlVGltZSIsImJsb29kIiwiZGllIiwicGFyZW50IiwicHVzaCIsImluZGV4IiwiTWF0aCIsInJhbmRvbSIsImNvbGxpc2lvblRhbmsiLCJnZXRCb3VuZGluZ0JveCIsInRhbmtCb29tIiwidGFua051bSIsIk51bWJlciIsImF1ZGlvRW5naW5lIiwicGxheSIsInNob290QXVkaW8iLCJvbkRlc3Ryb3kiLCJ1bnNjaGVkdWxl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WSxFQUFsQzs7QUFFQSxVQUFHLEtBQUtBLElBQUwsR0FBWSxDQUFmLEVBQWlCO0FBQ2IsYUFBS29ELGFBQUw7QUFDSCxPQUZELE1BRUs7QUFDRCxhQUFLa0UsUUFBTDtBQUNILE9BUjhELENBU2hFOztBQUNGLEtBVkQsTUFXSTtBQUNBO0FBQ0E7QUFDQTtBQUVBLFVBQUl5QixPQUFPLEdBQUdDLE1BQU0sQ0FBQyxLQUFLdEksUUFBTCxDQUFjVSxNQUFmLENBQU4sR0FBK0IsQ0FBN0M7QUFDQSxXQUFLVixRQUFMLENBQWNVLE1BQWQsR0FBdUIySCxPQUFPLEdBQUcsRUFBakMsQ0FOQSxDQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0osR0EzYUk7QUE2YUw7QUFDQTdELEVBQUFBLFlBQVksRUFBRSx3QkFBVTtBQUNwQixRQUFHLEtBQUs3QixlQUFMLENBQXFCTyxTQUFyQixDQUErQixLQUFLdkIsVUFBcEMsQ0FBSCxFQUFtRDtBQUMvQztBQUNBbEQsTUFBQUEsRUFBRSxDQUFDOEosV0FBSCxDQUFlQyxJQUFmLENBQW9CLEtBQUs3RixlQUFMLENBQXFCOEYsVUFBekMsRUFBcUQsS0FBckQsRUFBNEQsQ0FBNUQ7QUFDSDtBQUNKLEdBbmJJO0FBcWJMO0FBQ0FDLEVBQUFBLFNBQVMsRUFBRSxxQkFBWTtBQUNuQixTQUFLQyxVQUFMLENBQWdCLEtBQUs5RixTQUFyQixFQUErQixJQUEvQjtBQUNIO0FBeGJJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBUYW5rVHlwZSA9IHJlcXVpcmUoXCJUYW5rRGF0YVwiKS50YW5rVHlwZTtcbmxldCBhbGVydCA9IHJlcXVpcmUoJ0FsZXJ0Jyk7XG5cblxuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcblxuICAgICAgICAvL+WcsOWbvlxuICAgICAgICBjdXJNYXA6IGNjLlRpbGVkTWFwLFxuICAgICAgICAvL+aRh+adhlxuICAgICAgICB5YW9nYW46IGNjLk5vZGUsXG5cbiAgICAgICAgLy/lrZDlvLnpooTliLbkvZNcbiAgICAgICAgYnVsbGV0OiBjYy5QcmVmYWIsXG4gICAgICAgIC8v5Z2m5YWL6aKE5Yi25L2TXG4gICAgICAgIHRhbms6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5QcmVmYWIsXG4gICAgICAgIH0sXG4gICAgICAgIC8v5pyA5aSn5pWw6YePXG4gICAgICAgIG1heENvdW50OiAxMCxcbiAgICAgICAgbGlmZTogMyxcbiAgICAgICAgLy/lh7rnlJ/lnLBcbiAgICAgICAgYm9yblBvc2VzOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcbiAgICAgICAgICAgIHR5cGU6IGNjLlZlYzIsXG4gICAgICAgIH0sXG4gICAgICAgIC8v5Z2m5YWL55qu6IKkXG4gICAgICAgIHNwcml0ZUZyYW1lczoge1xuICAgICAgICAgICAgZGVmYXVsdDogW10sXG4gICAgICAgICAgICB0eXBlOiBjYy5TcHJpdGVGcmFtZSxcbiAgICAgICAgfSxcbiAgICAgICAgLy/lnablhYvnp7vliqjpgJ/luqZcbiAgICAgICAgdGFua1NwZWVkczoge1xuICAgICAgICAgICAgZGVmYXVsdDogW10sXG4gICAgICAgICAgICB0eXBlOiBjYy5GbG9hdCxcbiAgICAgICAgfSxcbiAgICAgICAgLy/lnablhYvlrZDlvLnlj5HlsITpl7TpmpTml7bpl7RcbiAgICAgICAgdGFua0ZpcmVUaW1lczoge1xuICAgICAgICAgICAgZGVmYXVsdDogW10sXG4gICAgICAgICAgICB0eXBlOiBjYy5GbG9hdCxcbiAgICAgICAgfSxcblxuICAgICAgICAvL+WdpuWFi+ihgOmHj1xuICAgICAgICB0YW5rQmxvb2RzOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcbiAgICAgICAgICAgIHR5cGU6IGNjLkludGVnZXIsXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBlbmVteU51bToge1xuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICB9LFxuICAgICAgICBsaWZlTnVtOiB7XG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbCxcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgIH0sXG4gICAgICAgIGRvdWJsZUZpcmU6IGZhbHNlLFxuICAgICAgICBkb3VibGVGaXJlQnRuOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBkb3VibGVGaXJlRnJhbWVzOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcbiAgICAgICAgICAgIHR5cGU6IGNjLlNwcml0ZUZyYW1lLFxuICAgICAgICB9LFxuXG4gICAgfSxcblxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBjYy5kaXJlY3Rvci5zZXREaXNwbGF5U3RhdHModHJ1ZSk7XG4gICAgICAgIC8v6I635Y+W5pGH5p2G5o6n5Yi257uE5Lu2XG4gICAgICAgIHRoaXMuX2pveXN0aWNrQ3RybCA9IHRoaXMueWFvZ2FuLmdldENvbXBvbmVudChcIkpveXN0aWNrQ3RybFwiKTtcbiAgICAgICAgLy/ojrflj5blnLDlm74gVGlsZWRNYXAg57uE5Lu2XG4gICAgICAgIHRoaXMuX3RpbGVkTWFwID0gdGhpcy5jdXJNYXAuZ2V0Q29tcG9uZW50KCdjYy5UaWxlZE1hcCcpO1xuICAgICAgICB0aGlzLmVuZW15TnVtLnN0cmluZyA9IHRoaXMubWF4Q291bnQgKyBcIlwiO1xuICAgICAgICB0aGlzLmxpZmVOdW0uc3RyaW5nID0gdGhpcy5saWZlICsgXCJcIjtcbiAgICB9LFxuXG4gICAgc3RhcnQ6IGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGlmKGVycil7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhbGVydC5zaG93LmNhbGwodGhpcywgXCLlhbPljaFcIiArIGNjLmdhbWVEYXRhLmN1ckxldmVsLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgLy/pu5jorqTop5LluqZcbiAgICAgICAgdGhpcy5jdXJBbmdsZSA9IG51bGw7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAvL+azqOWGjOebkeWQrOS6i+S7tlxuICAgICAgICB0aGlzLnJlZ2lzdGVySW5wdXRFdmVudCgpO1xuICAgICAgICAvL+W8leWFpeWcsOWbvuaVsOaNrlxuICAgICAgICB0aGlzLl90aWxlZE1hcERhdGEgPSByZXF1aXJlKFwiVGlsZWRNYXBEYXRhXCIpO1xuXG4gICAgICAgIC8v6I635Y+W5Zyw5Zu+5bC65a+4XG4gICAgICAgIHRoaXMuX2N1ck1hcFRpbGVTaXplID0gdGhpcy5fdGlsZWRNYXAuZ2V0VGlsZVNpemUoKTtcbiAgICAgICAgdGhpcy5fY3VyTWFwU2l6ZSA9IGNjLnYyKHRoaXMuX3RpbGVkTWFwLm5vZGUud2lkdGgsdGhpcy5fdGlsZWRNYXAubm9kZS5oZWlnaHQpO1xuICAgICAgICBjYy5sb2coXCJ0aGlzLl9jdXJNYXBUaWxlU2l6ZSA9XCIgKyB0aGlzLl9jdXJNYXBUaWxlU2l6ZSk7XG4gICAgICAgIGNjLmxvZyhcInRoaXMuX2N1ck1hcFNpemUgPVwiICsgdGhpcy5fY3VyTWFwU2l6ZSk7XG4gICAgICAgIFxuICAgICAgICAvL+WcsOWbvuWimeWxglxuICAgICAgICB0aGlzLm1hcExheWVyMCA9IHRoaXMuX3RpbGVkTWFwLmdldExheWVyKFwibGF5ZXIwXCIpO1xuXG4gICAgICAgIC8v5Yid5aeL5YyW5a+56LGh5rGgKOWPguaVsOW/hemhu+S4uuWvueW6lOiEmuacrOeahOaWh+S7tuWQjSlcbiAgICAgICAgdGhpcy5idWxsZXRQb29sID0gbmV3IGNjLk5vZGVQb29sKFwiQnVsbGV0U2NyaXB0XCIpO1xuICAgICAgICB2YXIgaW5pdEJ1bGxldENvdW50ID0gMjA7XG4gICAgICAgIGZvcih2YXIgaT0wOyBpPGluaXRCdWxsZXRDb3VudDsgKytpKXtcbiAgICAgICAgICAgIHZhciBidWxsZXQgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmJ1bGxldCk7XG4gICAgICAgICAgICB0aGlzLmJ1bGxldFBvb2wucHV0KGJ1bGxldCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YW5rUG9vbCA9IG5ldyBjYy5Ob2RlUG9vbChcIlRhbmtTY3JpcHRcIik7XG4gICAgICAgIGZvcih2YXIgaT0wOyBpPHRoaXMubWF4Q291bnQ7ICsraSl7XG4gICAgICAgICAgICB2YXIgdGFuayA9IGNjLmluc3RhbnRpYXRlKHRoaXMudGFuayk7XG4gICAgICAgICAgICB0aGlzLnRhbmtQb29sLnB1dCh0YW5rKTtcbiAgICAgICAgfVxuICAgICAgICBpZighY2MuZ2FtZURhdGEpe1xuICAgICAgICAgICAgY2MuZ2FtZURhdGEgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICAvL+WIneWni+WMllxuICAgICAgICBjYy5nYW1lRGF0YS50ZWFtSWQgPSAwO1xuICAgICAgICAvL+S4tOaXtlxuICAgICAgICBjYy5nYW1lRGF0YS5zaW5nbGUgPSB0cnVlO1xuXG4gICAgICAgIC8v5Zyw5Zu+5YaF5Z2m5YWL5YiX6KGoXG4gICAgICAgIGNjLmdhbWVEYXRhLnRhbmtMaXN0ID0gW107XG4gICAgICAgIC8v5Zyw5Zu+5YaF5a2Q5by55YiX6KGoXG4gICAgICAgIGNjLmdhbWVEYXRhLmJ1bGxldExpc3QgPSBbXTtcblxuICAgICAgICAvL+iOt+WPlue7hOS7tlxuICAgICAgICAvL3RoaXMudGFua05vZGUgPSBjYy5maW5kKFwiL0NhbnZhcy9NYXAvdGFua1wiKTtcbiAgICAgICAgdGhpcy50YW5rTm9kZSA9IGNjLmZpbmQoXCIvQ2FudmFzL21hcDEvbGF5ZXIwXCIpO1xuICAgICAgICAvL+WKoOWFpXBsYXllclxuICAgICAgICB0aGlzLnBsYXllciA9IHRoaXMuYWRkUGxheWVyVGFuaygpO1xuICAgICAgICAvL+iOt+WPluWdpuWFi+aOp+WItue7hOS7tlxuICAgICAgICB0aGlzLl9wbGF5ZXJUYW5rQ3RybCA9IHRoaXMucGxheWVyLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIik7IFxuXG4gICAgICAgIC8v5ZCv5Yqo5a6a5pe25Zmo77yM5re75Yqg5Z2m5YWLXG4gICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy5hZGRBSVRhbmssMyxjYy5tYWNyby5SRVBFQVRfRk9SRVZFUiwxKTtcbiAgICAgICAgXG4gICAgfSxcblxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcbiAgICAgICAgaWYodGhpcy5kb3VibGVGaXJlKXtcbiAgICAgICAgICAgIGlmKHRoaXMuX3BsYXllclRhbmtDdHJsLnN0YXJ0RmlyZSh0aGlzLmJ1bGxldFBvb2wpKXtcbiAgICAgICAgICAgICAgICAvL+aSreaUvuWwhOWHu+mfs+aViFxuICAgICAgICAgICAgICAgIC8vY2MuYXVkaW9FbmdpbmUucGxheSh0aGlzLl9wbGF5ZXJUYW5rQ3RybC5zaG9vdEF1ZGlvLCBmYWxzZSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0RG91YmxlRmlyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRvdWJsZUZpcmUgPSAhdGhpcy5kb3VibGVGaXJlO1xuICAgICAgICBcbiAgICAgICAgaWYodGhpcy5kb3VibGVGaXJlKXtcbiAgICAgICAgICAgIHRoaXMuZG91YmxlRmlyZUJ0bi5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuZG91YmxlRmlyZUZyYW1lc1sxXTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLmRvdWJsZUZpcmVCdG4uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmRvdWJsZUZpcmVGcmFtZXNbMF07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfSxcblxuICAgIC8v5rOo5YaM6L6T5YWl5LqL5Lu2XG4gICAgcmVnaXN0ZXJJbnB1dEV2ZW50OiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX2pveXN0aWNrQ3RybC5hZGRKb3lTdGlja1RvdWNoQ2hhbmdlTGlzdGVuZXIoZnVuY3Rpb24gKGFuZ2xlKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGFuZ2xlID09IHNlbGYuY3VyQW5nbGUgJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5fcGxheWVyVGFua0N0cmwuc3RvcE1vdmUgKXtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmN1ckFuZ2xlID0gYW5nbGU7XG5cbiAgICAgICAgICAgIGlmKGFuZ2xlIT1udWxsKXtcbiAgICAgICAgICAgICAgICAvL+W8gOWni+WJjei/m1xuICAgICAgICAgICAgICAgIHNlbGYuX3BsYXllclRhbmtDdHJsLnRhbmtNb3ZlU3RhcnQoYW5nbGUpO1xuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIC8v5YGc5q2i5YmN6L+bXG4gICAgICAgICAgICAgICAgc2VsZi5fcGxheWVyVGFua0N0cmwudGFua01vdmVTdG9wKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG4gICAgICAgIC8v5oyJ6ZSu5oyJ5LiLXG4gICAgICAgIGNjLnN5c3RlbUV2ZW50Lm9uKGNjLlN5c3RlbUV2ZW50LkV2ZW50VHlwZS5LRVlfRE9XTiwgXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChldmVudC5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgY2MubWFjcm8uS0VZLnc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IDkwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgY2MubWFjcm8uS0VZLnM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IDI3MDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGNjLm1hY3JvLktFWS5hOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSAxODA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBjYy5tYWNyby5LRVkuZDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihldmVudC5rZXlDb2RlID09IGNjLm1hY3JvLktFWS5rKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJlQnRuQ2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3BsYXllclRhbmtDdHJsLnRhbmtNb3ZlU3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhbmdsZSE9bnVsbCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5byA5aeL5YmN6L+bXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3BsYXllclRhbmtDdHJsLnRhbmtNb3ZlU3RhcnQoYW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAvL+aMiemUruaKrOi1t1xuICAgICAgICBjYy5zeXN0ZW1FdmVudC5vbihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX1VQLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChldmVudCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lgZzmraLliY3ov5tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihldmVudC5rZXlDb2RlICE9IGNjLm1hY3JvLktFWS5rKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheWVyVGFua0N0cmwudGFua01vdmVTdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcyk7XG5cbiAgICB9LFxuXG4gICAgLy/norDmkp7mo4DmtYtcbiAgICBjb2xsaXNpb25UZXN0OiBmdW5jdGlvbihyZWN0LCBidWxsZXQpe1xuICAgICAgICAvL+WIpOaWreaYr+WQpueisOWIsOWcsOWbvui+ueeVjFxuICAgICAgICBpZiAocmVjdC54TWluIDw9IC10aGlzLl9jdXJNYXBTaXplLngvMiB8fCByZWN0LnhNYXggPj0gdGhpcy5fY3VyTWFwU2l6ZS54LzIgfHxcblx0XHQgICAgcmVjdC55TWluIDw9IC10aGlzLl9jdXJNYXBTaXplLnkvMiB8fCByZWN0LnlNYXggPj0gdGhpcy5fY3VyTWFwU2l6ZS55LzIpe1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy/liKTmlq3mmK/lkKbmkp7loplcbiAgICAgICAgLy/lsIblnZDmoIfovazmjaLkuLrlnLDlm77lnZDmoIfns7tcbiAgICAgICAgdmFyIE1pblkgPSB0aGlzLl9jdXJNYXBTaXplLnkvMiAtIHJlY3QueU1pbjtcblx0ICAgIHZhciBNYXhZID0gdGhpcy5fY3VyTWFwU2l6ZS55LzIgLSByZWN0LnlNYXg7XG4gICAgICAgIHZhciBNaW5YID0gdGhpcy5fY3VyTWFwU2l6ZS54LzIgKyByZWN0LnhNaW47XG4gICAgICAgIHZhciBNYXhYID0gdGhpcy5fY3VyTWFwU2l6ZS54LzIgKyByZWN0LnhNYXg7XG5cbiAgICAgICAgLy/ojrflj5blm5vkuKrop5LnmoTpobbngrlcbiAgICAgICAgdmFyIExlZnREb3duID0gY2MudjIoTWluWCwgTWluWSk7XG4gICAgICAgIHZhciBSaWdodERvd24gPSBjYy52MihNYXhYLCBNaW5ZKTtcbiAgICAgICAgdmFyIExlZnRVcCA9IGNjLnYyKE1pblgsIE1heFkpO1xuICAgICAgICB2YXIgUmlnaHRVcCA9IGNjLnYyKE1heFgsIE1heFkpO1xuXG4gICAgICAgIC8v6I635Y+W5Zub5p2h6L6555qE5Lit5b+D54K5XG4gICAgICAgIHZhciBNaWREb3duID0gY2MudjIoTWluWCsoTWF4WC1NaW5YKS8yLCBNaW5ZKTtcbiAgICAgICAgdmFyIE1pZFVwID0gY2MudjIoTWluWCsoTWF4WC1NaW5YKS8yLCBNYXhZKTtcbiAgICAgICAgdmFyIE1pZExlZnQgPSBjYy52MihNaW5YLCBNaW5ZKyhNYXhZLU1pblkpLzIpO1xuICAgICAgICB2YXIgTWlkUmlnaHQ9IGNjLnYyKE1heFgsIE1pblkrKE1heFktTWluWSkvMik7XG5cbiAgICAgICAgLy/mo4DmtYvnorDmkp5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbGxpc2lvblRlc3QoW0xlZnREb3duLFJpZ2h0RG93bixMZWZ0VXAsUmlnaHRVcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1pZERvd24sTWlkVXAsTWlkTGVmdCxNaWRSaWdodF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQpO1xuICAgIH0sXG5cbiAgICAvL+WGhemDqOeisOaSnuajgOa1i+aWueazlVxuICAgIF9jb2xsaXNpb25UZXN0OiBmdW5jdGlvbihwb2ludHMsIGJ1bGxldCl7XG4gICAgICAgIHZhciBwb2ludCA9IHBvaW50cy5zaGlmdCgpXG4gICAgICAgIHZhciBnaWQgPSB0aGlzLm1hcExheWVyMC5nZXRUaWxlR0lEQXQoY2MudjIocGFyc2VJbnQocG9pbnQueCAvIHRoaXMuX2N1ck1hcFRpbGVTaXplLndpZHRoKSxwYXJzZUludChwb2ludC55IC8gdGhpcy5fY3VyTWFwVGlsZVNpemUuaGVpZ2h0KSkpO1xuXG4gICAgICAgIGlmICh0aGlzLl90aWxlZE1hcERhdGEuZ2lkVG9UaWxlVHlwZVtnaWRdICE9IHRoaXMuX3RpbGVkTWFwRGF0YS50aWxlVHlwZS50aWxlTm9uZSAmJiBcbiAgICAgICAgICAgIHRoaXMuX3RpbGVkTWFwRGF0YS5naWRUb1RpbGVUeXBlW2dpZF0gIT0gdGhpcy5fdGlsZWRNYXBEYXRhLnRpbGVUeXBlLnRpbGVHcmFzcyl7XG4gICAgICAgICAgICBpZihidWxsZXQgJiYgdGhpcy5fdGlsZWRNYXBEYXRhLmdpZFRvVGlsZVR5cGVbZ2lkXSA9PSB0aGlzLl90aWxlZE1hcERhdGEudGlsZVR5cGUudGlsZVdhbGwpe1xuICAgICAgICAgICAgICAgIHRoaXMubWFwTGF5ZXIwLnNldFRpbGVHSURBdCgwLCBwYXJzZUludChwb2ludC54IC8gdGhpcy5fY3VyTWFwVGlsZVNpemUud2lkdGgpLHBhcnNlSW50KHBvaW50LnkgLyB0aGlzLl9jdXJNYXBUaWxlU2l6ZS5oZWlnaHQpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYoYnVsbGV0ICYmIHRoaXMuX3RpbGVkTWFwRGF0YS5naWRUb1RpbGVUeXBlW2dpZF0gPT0gdGhpcy5fdGlsZWRNYXBEYXRhLnRpbGVUeXBlLnRpbGVLaW5nKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLm1hcExheWVyMC5zZXRUaWxlR0lEQXQoMCwgMTIsIDI1LCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcExheWVyMC5zZXRUaWxlR0lEQXQoMCwgMTIsIDI0LCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcExheWVyMC5zZXRUaWxlR0lEQXQoMCwgMTMsIDI1LCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcExheWVyMC5zZXRUaWxlR0lEQXQoMCwgMTMsIDI0LCAxKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmKHBvaW50cy5sZW5ndGg+MCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29sbGlzaW9uVGVzdChwb2ludHMsIGJ1bGxldCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGdhbWVPdmVyOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLmRvdWJsZUZpcmUgPSBmYWxzZTtcbiAgICAgICAgZm9yKHZhciBpPTA7IGk8Y2MuZ2FtZURhdGEudGFua0xpc3QubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgdmFyIHRhbmsgPSBjYy5nYW1lRGF0YS50YW5rTGlzdFtpXVxuICAgICAgICAgICAgdmFyIHRhbmtDdHJsID0gdGFuay5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpO1xuICAgICAgICAgICAgdGFua0N0cmwudGFua1N0b3AoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8v5by556qX6LCD55SoXG4gICAgICAgIGFsZXJ0LnNob3cuY2FsbCh0aGlzLCBcIua4uOaIj+e7k+adn1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoXCJTdGFydFNjZW5lXCIpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy/liqDlhaXnjqnlrrblnablhYtcbiAgICBhZGRQbGF5ZXJUYW5rOiBmdW5jdGlvbih0ZWFtKSB7XG4gICAgICAgIGlmKHRoaXMudGFua1Bvb2wuc2l6ZSgpPjApe1xuICAgICAgICAgICAgdmFyIHRhbmsgPSB0aGlzLnRhbmtQb29sLmdldCgpO1xuICAgICAgICAgICAgdGFuay5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuc3ByaXRlRnJhbWVzW3RoaXMuc3ByaXRlRnJhbWVzLmxlbmd0aC0xXTtcbiAgICAgICAgICAgIHRhbmsucG9zaXRpb24gPSB0aGlzLmJvcm5Qb3Nlc1t0aGlzLmJvcm5Qb3Nlcy5sZW5ndGgtMV07XG4gICAgICAgICAgICAvL+iOt+WPluWdpuWFi+aOp+WItue7hOS7tlxuICAgICAgICAgICAgdmFyIHRhbmtDdHJsID0gdGFuay5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpO1xuICAgICAgICAgICAgLy/orr7nva7lnablhYvlsZ7mgKdcbiAgICAgICAgICAgIHRhbmtDdHJsLnRhbmtUeXBlID0gVGFua1R5cGUuUGxheWVyO1xuICAgICAgICAgICAgdGFua0N0cmwuc3BlZWQgPSB0aGlzLnRhbmtTcGVlZHNbdGhpcy50YW5rU3BlZWRzLmxlbmd0aC0xXTtcbiAgICAgICAgICAgIHRhbmtDdHJsLmZpcmVUaW1lID0gdGhpcy50YW5rRmlyZVRpbWVzW3RoaXMudGFua0ZpcmVUaW1lcy5sZW5ndGgtMV07XG4gICAgICAgICAgICAvL3RhbmtDdHJsLmJsb29kID0gdGhpcy50YW5rQmxvb2RzW3RoaXMudGFua0Jsb29kcy5sZW5ndGgtMV07XG4gICAgICAgICAgICAvL3RhbmtDdHJsLmJsb29kID0gdGhpcy5saWZlIDtcbiAgICAgICAgICAgIHRhbmtDdHJsLmJsb29kID0gMTtcbiAgICAgICAgICAgIHRhbmtDdHJsLmRpZSA9IGZhbHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZighdGVhbSl7XG4gICAgICAgICAgICAgICAgaWYoY2MuZ2FtZURhdGEuc2luZ2xlKXtcbiAgICAgICAgICAgICAgICAgICAgLy/ljZXmnLrniYhcbiAgICAgICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9IDA7XG4gICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL+Wkp+S5seaWl1xuICAgICAgICAgICAgICAgICAgICB0YW5rQ3RybC50ZWFtID0gKytjYy5nYW1lRGF0YS50ZWFtSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIC8v57uE6ZifXG4gICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9IHRlYW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRhbmsucGFyZW50ID0gdGhpcy50YW5rTm9kZTtcbiAgICAgICAgICAgIC8v5Yqg5Yiw5YiX6KGoXG4gICAgICAgICAgICBjYy5nYW1lRGF0YS50YW5rTGlzdC5wdXNoKHRhbmspO1xuICAgICAgICAgICAgcmV0dXJuIHRhbms7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8v5Yqg5YWlQUlcbiAgICBhZGRBSVRhbms6IGZ1bmN0aW9uKGR0LCB0ZWFtKSB7XG4gICAgICAgIGlmKHRoaXMudGFua1Bvb2wuc2l6ZSgpPjAgJiYgdGhpcy5tYXhDb3VudCA+IDApe1xuICAgICAgICAgICAgdmFyIHRhbmsgPSB0aGlzLnRhbmtQb29sLmdldCgpO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VJbnQoTWF0aC5yYW5kb20oKSozLCAxMCk7XG4gICAgICAgICAgICAvL+iOt+WPluWdpuWFi+aOp+WItue7hOS7tlxuICAgICAgICAgICAgdmFyIHRhbmtDdHJsID0gdGFuay5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpO1xuICAgICAgICAgICAgLy/orr7nva7lnablhYvlsZ7mgKdcbiAgICAgICAgICAgIHRhbmsuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLnNwcml0ZUZyYW1lc1tpbmRleF07XG4gICAgICAgICAgICB0YW5rLnBvc2l0aW9uID0gdGhpcy5ib3JuUG9zZXNbaW5kZXhdO1xuXG4gICAgICAgICAgICB0YW5rQ3RybC50YW5rVHlwZSA9IGluZGV4O1xuICAgICAgICAgICAgdGFua0N0cmwuc3BlZWQgPSB0aGlzLnRhbmtTcGVlZHNbaW5kZXhdO1xuICAgICAgICAgICAgdGFua0N0cmwuZmlyZVRpbWUgPSB0aGlzLnRhbmtGaXJlVGltZXNbaW5kZXhdO1xuICAgICAgICAgICAgdGFua0N0cmwuYmxvb2QgPSB0aGlzLnRhbmtCbG9vZHNbaW5kZXhdO1xuICAgICAgICAgICAgdGFua0N0cmwuZGllID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmKCF0ZWFtKXtcbiAgICAgICAgICAgICAgICBpZihjYy5nYW1lRGF0YS5zaW5nbGUpe1xuICAgICAgICAgICAgICAgICAgICAvL+WNleacuueJiFxuICAgICAgICAgICAgICAgICAgICB0YW5rQ3RybC50ZWFtID0gMTtcbiAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8v5aSn5Lmx5paXXG4gICAgICAgICAgICAgICAgICAgIHRhbmtDdHJsLnRlYW0gPSArK2NjLmdhbWVEYXRhLnRlYW1JZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgLy/nu4TpmJ9cbiAgICAgICAgICAgICAgICB0YW5rQ3RybC50ZWFtID0gdGVhbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoaW5kZXggPT0gMCl7XG4gICAgICAgICAgICAgICAgdGFuay5hbmdsZSA9IDkwO1xuICAgICAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gMSl7XG4gICAgICAgICAgICAgICAgdGFuay5hbmdsZSA9IDE4MDtcbiAgICAgICAgICAgIH1lbHNlIGlmKGluZGV4ID09IDIpe1xuICAgICAgICAgICAgICAgIHRhbmsuYW5nbGUgPSAyNzA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih0YW5rQ3RybC5jb2xsaXNpb25UYW5rKHRhbmsuZ2V0Qm91bmRpbmdCb3goKSkpe1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuYm9yblBvc2VzLmxlbmd0aC0xOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICB0YW5rLnBvc2l0aW9uID0gdGhpcy5ib3JuUG9zZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmKCF0YW5rQ3RybC5jb2xsaXNpb25UYW5rKHRhbmsuZ2V0Qm91bmRpbmdCb3goKSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRhbmsucGFyZW50ID0gdGhpcy50YW5rTm9kZTtcbiAgICAgICAgICAgIC8v5Yqg5Yiw5YiX6KGoXG4gICAgICAgICAgICBjYy5nYW1lRGF0YS50YW5rTGlzdC5wdXNoKHRhbmspO1xuICAgICAgICAgICAgdGhpcy5tYXhDb3VudCAtLTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB0YW5rQm9vbTogZnVuY3Rpb24odGFuaykge1xuICAgICAgICB0YW5rLnBhcmVudCA9IG51bGw7XG4gICAgICAgIHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKS5kaWUgPSB0cnVlO1xuICAgICAgICB0aGlzLnRhbmtQb29sLnB1dCh0YW5rKTtcbiAgICAgICAgaWYoY2MuZ2FtZURhdGEuc2luZ2xlICYmIHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKS50ZWFtID09IDApe1xuICAgICAgICAgICAgdGhpcy5saWZlIC0tO1xuICAgICAgICAgICAgdGhpcy5saWZlTnVtLnN0cmluZyA9IHRoaXMubGlmZSArIFwiXCI7XG5cbiAgICAgICAgICAgIGlmKHRoaXMubGlmZSA+IDApe1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkUGxheWVyVGFuaygpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lT3ZlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAvLyB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIikuYmxvb2QgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICAvLyB0YW5rLnBhcmVudCA9IG51bGw7XG4gICAgICAgICAgICAvLyB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIikuZGllID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIHRoaXMudGFua1Bvb2wucHV0KHRhbmspO1xuXG4gICAgICAgICAgICB2YXIgdGFua051bSA9IE51bWJlcih0aGlzLmVuZW15TnVtLnN0cmluZykgLSAxO1xuICAgICAgICAgICAgdGhpcy5lbmVteU51bS5zdHJpbmcgPSB0YW5rTnVtICsgXCJcIjtcbiAgICAgICAgICAgIC8vIGlmKHRhbmtOdW0gPT0gMCl7XG4gICAgICAgICAgICAvLyAgICAgaWYoY2MuZ2FtZURhdGEuY3VyTGV2ZWwgPCAxMCl7XG4gICAgICAgICAgICAvLyAgICAgICAgICsrY2MuZ2FtZURhdGEuY3VyTGV2ZWw7XG4gICAgICAgICAgICAvLyAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShcIkNpdHlTY2VuZVwiKyBjYy5nYW1lRGF0YS5jdXJMZXZlbCk7XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gICAgIGVsc2V7XG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMuZG91YmxlRmlyZSA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gICAgICAgICBhbGVydC5zaG93LmNhbGwodGhpcywgXCLkvaDotaLkuoZcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiU3RhcnRTY2VuZVwiKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8v5byA54Gr5oyJ6ZKu54K55Ye7XG4gICAgZmlyZUJ0bkNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICBpZih0aGlzLl9wbGF5ZXJUYW5rQ3RybC5zdGFydEZpcmUodGhpcy5idWxsZXRQb29sKSl7XG4gICAgICAgICAgICAvL+aSreaUvuWwhOWHu+mfs+aViFxuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGxheSh0aGlzLl9wbGF5ZXJUYW5rQ3RybC5zaG9vdEF1ZGlvLCBmYWxzZSwgMSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy/plIDmr4Hml7bosIPnlKhcbiAgICBvbkRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMuYWRkQUlUYW5rLHRoaXMpO1xuICAgIH0sXG59KTtcbiJdfQ==