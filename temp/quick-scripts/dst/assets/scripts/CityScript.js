
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/CityScript.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7f0b08Dcw5F7oWFl36ggKRC', 'CityScript');
// scripts/CityScript.js

"use strict";

var TankType = require("TankData").tankType;

var alert = require('Alert');

cc.Class({
  "extends": cc.Component,
  properties: {
    //地图
    curMap: cc.TiledMap,
    //摇杆
    yaogan: cc.Node,
    //子弹预制体
    bullet: cc.Prefab,
    //坦克预制体
    tank: {
      "default": null,
      type: cc.Prefab
    },
    //最大数量
    maxCount: 10,
    life: 3,
    //出生地
    bornPoses: {
      "default": [],
      type: cc.Vec2
    },
    //坦克皮肤
    spriteFrames: {
      "default": [],
      type: cc.SpriteFrame
    },
    //坦克移动速度
    tankSpeeds: {
      "default": [],
      type: cc.Float
    },
    //坦克子弹发射间隔时间
    tankFireTimes: {
      "default": [],
      type: cc.Float
    },
    //坦克血量
    tankBloods: {
      "default": [],
      type: cc.Integer
    },
    enemyNum: {
      type: cc.Label,
      "default": null
    },
    lifeNum: {
      type: cc.Label,
      "default": null
    },
    doubleFire: false,
    doubleFireBtn: {
      "default": null,
      type: cc.Node
    },
    doubleFireFrames: {
      "default": [],
      type: cc.SpriteFrame
    }
  },
  // use this for initialization
  onLoad: function onLoad() {
    // cc.director.setDisplayStats(true);
    //获取摇杆控制组件
    this._joystickCtrl = this.yaogan.getComponent("JoystickCtrl"); //获取地图 TiledMap 组件

    this._tiledMap = this.curMap.getComponent('cc.TiledMap');
    this.enemyNum.string = this.maxCount + "";
    this.lifeNum.string = this.life + "";
  },
  start: function start(err) {
    if (err) {
      return;
    } // alert.show.call(this, "关卡" + cc.gameData.curLevel, function () {
    // });
    //默认角度


    this.curAngle = null;
    var self = this; //注册监听事件

    this.registerInputEvent(); //引入地图数据

    this._tiledMapData = require("TiledMapData"); //获取地图尺寸

    this._curMapTileSize = this._tiledMap.getTileSize();
    this._curMapSize = cc.v2(this._tiledMap.node.width, this._tiledMap.node.height);
    cc.log("this._curMapTileSize =" + this._curMapTileSize);
    cc.log("this._curMapSize =" + this._curMapSize); //地图墙层

    this.mapLayer0 = this._tiledMap.getLayer("layer_0"); //初始化对象池(参数必须为对应脚本的文件名)

    this.bulletPool = new cc.NodePool("BulletScript");
    var initBulletCount = 20;

    for (var i = 0; i < initBulletCount; ++i) {
      var bullet = cc.instantiate(this.bullet);
      this.bulletPool.put(bullet);
    }

    this.tankPool = new cc.NodePool("TankScript");

    for (var i = 0; i < this.maxCount; ++i) {
      var tank = cc.instantiate(this.tank);
      this.tankPool.put(tank);
    }

    if (!cc.gameData) {
      cc.gameData = {};
    } //初始化


    cc.gameData.teamId = 0; //临时

    cc.gameData.single = true; //地图内坦克列表

    cc.gameData.tankList = []; //地图内子弹列表

    cc.gameData.bulletList = []; //获取组件

    this.tankNode = cc.find("/Canvas/Map/layer_0"); //this.tankNode = cc.find("/Canvas/map1/layer0");
    //加入player

    this.player = this.addPlayerTank(); //获取坦克控制组件

    this._playerTankCtrl = this.player.getComponent("TankScript"); //启动定时器，添加坦克

    this.schedule(this.addAITank, 3, cc.macro.REPEAT_FOREVER, 1);
  },
  // called every frame, uncomment this function to activate update callback
  update: function update(dt) {
    if (this.doubleFire) {
      if (this._playerTankCtrl.startFire(this.bulletPool)) {//播放射击音效
        //cc.audioEngine.play(this._playerTankCtrl.shootAudio, false, 1);
      }
    }
  },
  setDoubleFire: function setDoubleFire() {
    this.doubleFire = !this.doubleFire;

    if (this.doubleFire) {
      this.doubleFireBtn.getComponent(cc.Sprite).spriteFrame = this.doubleFireFrames[1];
    } else {
      this.doubleFireBtn.getComponent(cc.Sprite).spriteFrame = this.doubleFireFrames[0];
    }
  },
  //注册输入事件
  registerInputEvent: function registerInputEvent() {
    var self = this;

    this._joystickCtrl.addJoyStickTouchChangeListener(function (angle) {
      if (angle == self.curAngle && !self._playerTankCtrl.stopMove) {
        return;
      }

      self.curAngle = angle;

      if (angle != null) {
        //开始前进
        self._playerTankCtrl.tankMoveStart(angle);
      } else {
        //停止前进
        self._playerTankCtrl.tankMoveStop();
      }
    }); //按键按下


    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, function (event) {
      var angle = null;

      switch (event.keyCode) {
        case cc.macro.KEY.w:
          angle = 90;
          break;

        case cc.macro.KEY.s:
          angle = 270;
          break;

        case cc.macro.KEY.a:
          angle = 180;
          break;

        case cc.macro.KEY.d:
          angle = 0;
          break;
      }

      if (event.keyCode == cc.macro.KEY.k) {
        this.fireBtnClick();
      } else {
        self._playerTankCtrl.tankMoveStop();
      }

      if (angle != null) {
        //开始前进
        self._playerTankCtrl.tankMoveStart(angle);
      }
    }, this); //按键抬起

    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, function (event) {
      //停止前进
      if (event.keyCode != cc.macro.KEY.k) {
        self._playerTankCtrl.tankMoveStop();
      }
    }, this);
  },
  //碰撞检测
  collisionTest: function collisionTest(rect, bullet) {
    //判断是否碰到地图边界
    if (rect.xMin <= -this._curMapSize.x / 2 || rect.xMax >= this._curMapSize.x / 2 || rect.yMin <= -this._curMapSize.y / 2 || rect.yMax >= this._curMapSize.y / 2) {
      return true;
    } //判断是否撞墙
    //将坐标转换为地图坐标系


    var MinY = this._curMapSize.y / 2 - rect.yMin;
    var MaxY = this._curMapSize.y / 2 - rect.yMax;
    var MinX = this._curMapSize.x / 2 + rect.xMin;
    var MaxX = this._curMapSize.x / 2 + rect.xMax; //获取四个角的顶点

    var LeftDown = cc.v2(MinX, MinY);
    var RightDown = cc.v2(MaxX, MinY);
    var LeftUp = cc.v2(MinX, MaxY);
    var RightUp = cc.v2(MaxX, MaxY); //获取四条边的中心点

    var MidDown = cc.v2(MinX + (MaxX - MinX) / 2, MinY);
    var MidUp = cc.v2(MinX + (MaxX - MinX) / 2, MaxY);
    var MidLeft = cc.v2(MinX, MinY + (MaxY - MinY) / 2);
    var MidRight = cc.v2(MaxX, MinY + (MaxY - MinY) / 2); //检测碰撞

    return this._collisionTest([LeftDown, RightDown, LeftUp, RightUp, MidDown, MidUp, MidLeft, MidRight], bullet);
  },
  //内部碰撞检测方法
  _collisionTest: function _collisionTest(points, bullet) {
    var point = points.shift();
    var gid = this.mapLayer0.getTileGIDAt(cc.v2(parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height)));

    if (this._tiledMapData.gidToTileType[gid] != this._tiledMapData.tileType.tileNone && this._tiledMapData.gidToTileType[gid] != this._tiledMapData.tileType.tileGrass) {
      if (bullet && this._tiledMapData.gidToTileType[gid] == this._tiledMapData.tileType.tileWall) {
        this.mapLayer0.setTileGIDAt(0, parseInt(point.x / this._curMapTileSize.width), parseInt(point.y / this._curMapTileSize.height), 1);
      } else if (bullet && this._tiledMapData.gidToTileType[gid] == this._tiledMapData.tileType.tileKing) {
        this.mapLayer0.setTileGIDAt(0, 12, 25, 1);
        this.mapLayer0.setTileGIDAt(0, 12, 24, 1);
        this.mapLayer0.setTileGIDAt(0, 13, 25, 1);
        this.mapLayer0.setTileGIDAt(0, 13, 24, 1);
        this.gameOver();
      }

      return true;
    }

    if (points.length > 0) {
      return this._collisionTest(points, bullet);
    } else {
      return false;
    }
  },
  gameOver: function gameOver() {
    this.doubleFire = false;

    for (var i = 0; i < cc.gameData.tankList.length; i++) {
      var tank = cc.gameData.tankList[i];
      var tankCtrl = tank.getComponent("TankScript");
      tankCtrl.tankStop();
    } //弹窗调用


    alert.show.call(this, "游戏结束", function () {
      cc.director.loadScene("StartScene");
    });
  },
  //加入玩家坦克
  addPlayerTank: function addPlayerTank(team) {
    if (this.tankPool.size() > 0) {
      var tank = this.tankPool.get();
      tank.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[this.spriteFrames.length - 1];
      tank.position = this.bornPoses[this.bornPoses.length - 1]; //获取坦克控制组件

      var tankCtrl = tank.getComponent("TankScript"); //设置坦克属性

      tankCtrl.tankType = TankType.Player;
      tankCtrl.speed = this.tankSpeeds[this.tankSpeeds.length - 1];
      tankCtrl.fireTime = this.tankFireTimes[this.tankFireTimes.length - 1]; //tankCtrl.blood = this.tankBloods[this.tankBloods.length-1];
      //tankCtrl.blood = this.life ;

      tankCtrl.blood = 1;
      tankCtrl.die = false;

      if (!team) {
        if (cc.gameData.single) {
          //单机版
          tankCtrl.team = 0;
        } else {
          //大乱斗
          tankCtrl.team = ++cc.gameData.teamId;
        }
      } else {
        //组队
        tankCtrl.team = team;
      }

      tank.parent = this.tankNode; //加到列表

      cc.gameData.tankList.push(tank);
      return tank;
    }

    return null;
  },
  //加入AI
  addAITank: function addAITank(dt, team) {
    if (this.tankPool.size() > 0 && this.maxCount > 0) {
      var tank = this.tankPool.get();
      var index = parseInt(Math.random() * 3, 10); //获取坦克控制组件

      var tankCtrl = tank.getComponent("TankScript"); //设置坦克属性

      tank.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[index];
      tank.position = this.bornPoses[index];
      tankCtrl.tankType = index;
      tankCtrl.speed = this.tankSpeeds[index];
      tankCtrl.fireTime = this.tankFireTimes[index];
      tankCtrl.blood = this.tankBloods[index];
      tankCtrl.die = false;

      if (!team) {
        if (cc.gameData.single) {
          //单机版
          tankCtrl.team = 1;
        } else {
          //大乱斗
          tankCtrl.team = ++cc.gameData.teamId;
        }
      } else {
        //组队
        tankCtrl.team = team;
      }

      if (index == 0) {
        tank.angle = 90;
      } else if (index == 1) {
        tank.angle = 180;
      } else if (index == 2) {
        tank.angle = 270;
      }

      if (tankCtrl.collisionTank(tank.getBoundingBox())) {
        for (var i = 0; i < this.bornPoses.length - 1; i++) {
          tank.position = this.bornPoses[i];

          if (!tankCtrl.collisionTank(tank.getBoundingBox())) {
            break;
          }
        }
      }

      tank.parent = this.tankNode; //加到列表

      cc.gameData.tankList.push(tank);
      this.maxCount--;
    }
  },
  tankBoom: function tankBoom(tank) {
    // tank.parent = null;
    // tank.getComponent("TankScript").die = true;
    // this.tankPool.put(tank);
    if (cc.gameData.single && tank.getComponent("TankScript").team == 0) {
      this.life--;
      this.lifeNum.string = this.life + "";

      if (this.life > 0) {
        this.addPlayerTank();
      } else {
        this.gameOver();
      }

      tank.getComponent("TankScript").blood = 1;
    } else {
      tank.parent = null;
      tank.getComponent("TankScript").die = true;
      this.tankPool.put(tank);
      var tankNum = Number(this.enemyNum.string) - 1;
      this.enemyNum.string = tankNum + "";

      if (tankNum == 0) {
        if (cc.gameData.curLevel < 10) {
          ++cc.gameData.curLevel;
          cc.director.loadScene("CityScene" + cc.gameData.curLevel);
        } else {
          this.doubleFire = false;
          alert.show.call(this, "你赢了", function () {
            cc.director.loadScene("StartScene");
          });
        }
      }
    }
  },
  //开火按钮点击
  fireBtnClick: function fireBtnClick() {
    if (this._playerTankCtrl.startFire(this.bulletPool)) {
      //播放射击音效
      cc.audioEngine.play(this._playerTankCtrl.shootAudio, false, 1);
    }
  },
  //销毁时调用
  onDestroy: function onDestroy() {
    this.unschedule(this.addAITank, this);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcQ2l0eVNjcmlwdC5qcyJdLCJuYW1lcyI6WyJUYW5rVHlwZSIsInJlcXVpcmUiLCJ0YW5rVHlwZSIsImFsZXJ0IiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJjdXJNYXAiLCJUaWxlZE1hcCIsInlhb2dhbiIsIk5vZGUiLCJidWxsZXQiLCJQcmVmYWIiLCJ0YW5rIiwidHlwZSIsIm1heENvdW50IiwibGlmZSIsImJvcm5Qb3NlcyIsIlZlYzIiLCJzcHJpdGVGcmFtZXMiLCJTcHJpdGVGcmFtZSIsInRhbmtTcGVlZHMiLCJGbG9hdCIsInRhbmtGaXJlVGltZXMiLCJ0YW5rQmxvb2RzIiwiSW50ZWdlciIsImVuZW15TnVtIiwiTGFiZWwiLCJsaWZlTnVtIiwiZG91YmxlRmlyZSIsImRvdWJsZUZpcmVCdG4iLCJkb3VibGVGaXJlRnJhbWVzIiwib25Mb2FkIiwiX2pveXN0aWNrQ3RybCIsImdldENvbXBvbmVudCIsIl90aWxlZE1hcCIsInN0cmluZyIsInN0YXJ0IiwiZXJyIiwiY3VyQW5nbGUiLCJzZWxmIiwicmVnaXN0ZXJJbnB1dEV2ZW50IiwiX3RpbGVkTWFwRGF0YSIsIl9jdXJNYXBUaWxlU2l6ZSIsImdldFRpbGVTaXplIiwiX2N1ck1hcFNpemUiLCJ2MiIsIm5vZGUiLCJ3aWR0aCIsImhlaWdodCIsImxvZyIsIm1hcExheWVyMCIsImdldExheWVyIiwiYnVsbGV0UG9vbCIsIk5vZGVQb29sIiwiaW5pdEJ1bGxldENvdW50IiwiaSIsImluc3RhbnRpYXRlIiwicHV0IiwidGFua1Bvb2wiLCJnYW1lRGF0YSIsInRlYW1JZCIsInNpbmdsZSIsInRhbmtMaXN0IiwiYnVsbGV0TGlzdCIsInRhbmtOb2RlIiwiZmluZCIsInBsYXllciIsImFkZFBsYXllclRhbmsiLCJfcGxheWVyVGFua0N0cmwiLCJzY2hlZHVsZSIsImFkZEFJVGFuayIsIm1hY3JvIiwiUkVQRUFUX0ZPUkVWRVIiLCJ1cGRhdGUiLCJkdCIsInN0YXJ0RmlyZSIsInNldERvdWJsZUZpcmUiLCJTcHJpdGUiLCJzcHJpdGVGcmFtZSIsImFkZEpveVN0aWNrVG91Y2hDaGFuZ2VMaXN0ZW5lciIsImFuZ2xlIiwic3RvcE1vdmUiLCJ0YW5rTW92ZVN0YXJ0IiwidGFua01vdmVTdG9wIiwic3lzdGVtRXZlbnQiLCJvbiIsIlN5c3RlbUV2ZW50IiwiRXZlbnRUeXBlIiwiS0VZX0RPV04iLCJldmVudCIsImtleUNvZGUiLCJLRVkiLCJ3IiwicyIsImEiLCJkIiwiayIsImZpcmVCdG5DbGljayIsIktFWV9VUCIsImNvbGxpc2lvblRlc3QiLCJyZWN0IiwieE1pbiIsIngiLCJ4TWF4IiwieU1pbiIsInkiLCJ5TWF4IiwiTWluWSIsIk1heFkiLCJNaW5YIiwiTWF4WCIsIkxlZnREb3duIiwiUmlnaHREb3duIiwiTGVmdFVwIiwiUmlnaHRVcCIsIk1pZERvd24iLCJNaWRVcCIsIk1pZExlZnQiLCJNaWRSaWdodCIsIl9jb2xsaXNpb25UZXN0IiwicG9pbnRzIiwicG9pbnQiLCJzaGlmdCIsImdpZCIsImdldFRpbGVHSURBdCIsInBhcnNlSW50IiwiZ2lkVG9UaWxlVHlwZSIsInRpbGVUeXBlIiwidGlsZU5vbmUiLCJ0aWxlR3Jhc3MiLCJ0aWxlV2FsbCIsInNldFRpbGVHSURBdCIsInRpbGVLaW5nIiwiZ2FtZU92ZXIiLCJsZW5ndGgiLCJ0YW5rQ3RybCIsInRhbmtTdG9wIiwic2hvdyIsImNhbGwiLCJkaXJlY3RvciIsImxvYWRTY2VuZSIsInRlYW0iLCJzaXplIiwiZ2V0IiwicG9zaXRpb24iLCJQbGF5ZXIiLCJzcGVlZCIsImZpcmVUaW1lIiwiYmxvb2QiLCJkaWUiLCJwYXJlbnQiLCJwdXNoIiwiaW5kZXgiLCJNYXRoIiwicmFuZG9tIiwiY29sbGlzaW9uVGFuayIsImdldEJvdW5kaW5nQm94IiwidGFua0Jvb20iLCJ0YW5rTnVtIiwiTnVtYmVyIiwiY3VyTGV2ZWwiLCJhdWRpb0VuZ2luZSIsInBsYXkiLCJzaG9vdEF1ZGlvIiwib25EZXN0cm95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LENBQWVDLElBQWYsQ0FBb0IsS0FBSzlGLGVBQUwsQ0FBcUIrRixVQUF6QyxFQUFxRCxLQUFyRCxFQUE0RCxDQUE1RDtBQUNIO0FBQ0osR0FuYkk7QUFxYkw7QUFDQUMsRUFBQUEsU0FBUyxFQUFFLHFCQUFZO0FBQ25CLFNBQUtDLFVBQUwsQ0FBZ0IsS0FBSy9GLFNBQXJCLEVBQStCLElBQS9CO0FBQ0g7QUF4YkksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFRhbmtUeXBlID0gcmVxdWlyZShcIlRhbmtEYXRhXCIpLnRhbmtUeXBlO1xyXG5sZXQgYWxlcnQgPSByZXF1aXJlKCdBbGVydCcpO1xyXG5cclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcblxyXG4gICAgICAgIC8v5Zyw5Zu+XHJcbiAgICAgICAgY3VyTWFwOiBjYy5UaWxlZE1hcCxcclxuICAgICAgICAvL+aRh+adhlxyXG4gICAgICAgIHlhb2dhbjogY2MuTm9kZSxcclxuXHJcbiAgICAgICAgLy/lrZDlvLnpooTliLbkvZNcclxuICAgICAgICBidWxsZXQ6IGNjLlByZWZhYixcclxuICAgICAgICAvL+WdpuWFi+mihOWItuS9k1xyXG4gICAgICAgIHRhbms6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuUHJlZmFiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy/mnIDlpKfmlbDph49cclxuICAgICAgICBtYXhDb3VudDogMTAsXHJcbiAgICAgICAgbGlmZTogMyxcclxuICAgICAgICAvL+WHuueUn+WcsFxyXG4gICAgICAgIGJvcm5Qb3Nlczoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuVmVjMixcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8v5Z2m5YWL55qu6IKkXHJcbiAgICAgICAgc3ByaXRlRnJhbWVzOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5TcHJpdGVGcmFtZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8v5Z2m5YWL56e75Yqo6YCf5bqmXHJcbiAgICAgICAgdGFua1NwZWVkczoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuRmxvYXQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAvL+WdpuWFi+WtkOW8ueWPkeWwhOmXtOmalOaXtumXtFxyXG4gICAgICAgIHRhbmtGaXJlVGltZXM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkZsb2F0LFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8v5Z2m5YWL6KGA6YePXHJcbiAgICAgICAgdGFua0Jsb29kczoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuSW50ZWdlcixcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIGVuZW15TnVtOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGlmZU51bToge1xyXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbCxcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRvdWJsZUZpcmU6IGZhbHNlLFxyXG4gICAgICAgIGRvdWJsZUZpcmVCdG46IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZG91YmxlRmlyZUZyYW1lczoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gY2MuZGlyZWN0b3Iuc2V0RGlzcGxheVN0YXRzKHRydWUpO1xyXG4gICAgICAgIC8v6I635Y+W5pGH5p2G5o6n5Yi257uE5Lu2XHJcbiAgICAgICAgdGhpcy5fam95c3RpY2tDdHJsID0gdGhpcy55YW9nYW4uZ2V0Q29tcG9uZW50KFwiSm95c3RpY2tDdHJsXCIpO1xyXG4gICAgICAgIC8v6I635Y+W5Zyw5Zu+IFRpbGVkTWFwIOe7hOS7tlxyXG4gICAgICAgIHRoaXMuX3RpbGVkTWFwID0gdGhpcy5jdXJNYXAuZ2V0Q29tcG9uZW50KCdjYy5UaWxlZE1hcCcpO1xyXG4gICAgICAgIHRoaXMuZW5lbXlOdW0uc3RyaW5nID0gdGhpcy5tYXhDb3VudCArIFwiXCI7XHJcbiAgICAgICAgdGhpcy5saWZlTnVtLnN0cmluZyA9IHRoaXMubGlmZSArIFwiXCI7XHJcbiAgICB9LFxyXG5cclxuICAgIHN0YXJ0OiBmdW5jdGlvbihlcnIpe1xyXG4gICAgICAgIGlmKGVycil7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFsZXJ0LnNob3cuY2FsbCh0aGlzLCBcIuWFs+WNoVwiICsgY2MuZ2FtZURhdGEuY3VyTGV2ZWwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgIC8v6buY6K6k6KeS5bqmXHJcbiAgICAgICAgdGhpcy5jdXJBbmdsZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAvL+azqOWGjOebkeWQrOS6i+S7tlxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJJbnB1dEV2ZW50KCk7XHJcbiAgICAgICAgLy/lvJXlhaXlnLDlm77mlbDmja5cclxuICAgICAgICB0aGlzLl90aWxlZE1hcERhdGEgPSByZXF1aXJlKFwiVGlsZWRNYXBEYXRhXCIpO1xyXG5cclxuICAgICAgICAvL+iOt+WPluWcsOWbvuWwuuWvuFxyXG4gICAgICAgIHRoaXMuX2N1ck1hcFRpbGVTaXplID0gdGhpcy5fdGlsZWRNYXAuZ2V0VGlsZVNpemUoKTtcclxuICAgICAgICB0aGlzLl9jdXJNYXBTaXplID0gY2MudjIodGhpcy5fdGlsZWRNYXAubm9kZS53aWR0aCx0aGlzLl90aWxlZE1hcC5ub2RlLmhlaWdodCk7XHJcbiAgICAgICAgY2MubG9nKFwidGhpcy5fY3VyTWFwVGlsZVNpemUgPVwiICsgdGhpcy5fY3VyTWFwVGlsZVNpemUpO1xyXG4gICAgICAgIGNjLmxvZyhcInRoaXMuX2N1ck1hcFNpemUgPVwiICsgdGhpcy5fY3VyTWFwU2l6ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy/lnLDlm77lopnlsYJcclxuICAgICAgICB0aGlzLm1hcExheWVyMCA9IHRoaXMuX3RpbGVkTWFwLmdldExheWVyKFwibGF5ZXJfMFwiKTtcclxuXHJcbiAgICAgICAgLy/liJ3lp4vljJblr7nosaHmsaAo5Y+C5pWw5b+F6aG75Li65a+55bqU6ISa5pys55qE5paH5Lu25ZCNKVxyXG4gICAgICAgIHRoaXMuYnVsbGV0UG9vbCA9IG5ldyBjYy5Ob2RlUG9vbChcIkJ1bGxldFNjcmlwdFwiKTtcclxuICAgICAgICB2YXIgaW5pdEJ1bGxldENvdW50ID0gMjA7XHJcbiAgICAgICAgZm9yKHZhciBpPTA7IGk8aW5pdEJ1bGxldENvdW50OyArK2kpe1xyXG4gICAgICAgICAgICB2YXIgYnVsbGV0ID0gY2MuaW5zdGFudGlhdGUodGhpcy5idWxsZXQpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1bGxldFBvb2wucHV0KGJ1bGxldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFua1Bvb2wgPSBuZXcgY2MuTm9kZVBvb2woXCJUYW5rU2NyaXB0XCIpO1xyXG4gICAgICAgIGZvcih2YXIgaT0wOyBpPHRoaXMubWF4Q291bnQ7ICsraSl7XHJcbiAgICAgICAgICAgIHZhciB0YW5rID0gY2MuaW5zdGFudGlhdGUodGhpcy50YW5rKTtcclxuICAgICAgICAgICAgdGhpcy50YW5rUG9vbC5wdXQodGFuayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCFjYy5nYW1lRGF0YSl7XHJcbiAgICAgICAgICAgIGNjLmdhbWVEYXRhID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5Yid5aeL5YyWXHJcbiAgICAgICAgY2MuZ2FtZURhdGEudGVhbUlkID0gMDtcclxuICAgICAgICAvL+S4tOaXtlxyXG4gICAgICAgIGNjLmdhbWVEYXRhLnNpbmdsZSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8v5Zyw5Zu+5YaF5Z2m5YWL5YiX6KGoXHJcbiAgICAgICAgY2MuZ2FtZURhdGEudGFua0xpc3QgPSBbXTtcclxuICAgICAgICAvL+WcsOWbvuWGheWtkOW8ueWIl+ihqFxyXG4gICAgICAgIGNjLmdhbWVEYXRhLmJ1bGxldExpc3QgPSBbXTtcclxuXHJcbiAgICAgICAgLy/ojrflj5bnu4Tku7ZcclxuICAgICAgICB0aGlzLnRhbmtOb2RlID0gY2MuZmluZChcIi9DYW52YXMvTWFwL2xheWVyXzBcIik7XHJcbiAgICAgICAgLy90aGlzLnRhbmtOb2RlID0gY2MuZmluZChcIi9DYW52YXMvbWFwMS9sYXllcjBcIik7XHJcbiAgICAgICAgLy/liqDlhaVwbGF5ZXJcclxuICAgICAgICB0aGlzLnBsYXllciA9IHRoaXMuYWRkUGxheWVyVGFuaygpO1xyXG4gICAgICAgIC8v6I635Y+W5Z2m5YWL5o6n5Yi257uE5Lu2XHJcbiAgICAgICAgdGhpcy5fcGxheWVyVGFua0N0cmwgPSB0aGlzLnBsYXllci5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpOyBcclxuXHJcbiAgICAgICAgLy/lkK/liqjlrprml7blmajvvIzmt7vliqDlnablhYtcclxuICAgICAgICB0aGlzLnNjaGVkdWxlKHRoaXMuYWRkQUlUYW5rLDMsY2MubWFjcm8uUkVQRUFUX0ZPUkVWRVIsMSk7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG4gICAgICAgIGlmKHRoaXMuZG91YmxlRmlyZSl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX3BsYXllclRhbmtDdHJsLnN0YXJ0RmlyZSh0aGlzLmJ1bGxldFBvb2wpKXtcclxuICAgICAgICAgICAgICAgIC8v5pKt5pS+5bCE5Ye76Z+z5pWIXHJcbiAgICAgICAgICAgICAgICAvL2NjLmF1ZGlvRW5naW5lLnBsYXkodGhpcy5fcGxheWVyVGFua0N0cmwuc2hvb3RBdWRpbywgZmFsc2UsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzZXREb3VibGVGaXJlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5kb3VibGVGaXJlID0gIXRoaXMuZG91YmxlRmlyZTtcclxuICAgICAgICBcclxuICAgICAgICBpZih0aGlzLmRvdWJsZUZpcmUpe1xyXG4gICAgICAgICAgICB0aGlzLmRvdWJsZUZpcmVCdG4uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmRvdWJsZUZpcmVGcmFtZXNbMV07XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuZG91YmxlRmlyZUJ0bi5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuZG91YmxlRmlyZUZyYW1lc1swXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5rOo5YaM6L6T5YWl5LqL5Lu2XHJcbiAgICByZWdpc3RlcklucHV0RXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLl9qb3lzdGlja0N0cmwuYWRkSm95U3RpY2tUb3VjaENoYW5nZUxpc3RlbmVyKGZ1bmN0aW9uIChhbmdsZSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoYW5nbGUgPT0gc2VsZi5jdXJBbmdsZSAmJlxyXG4gICAgICAgICAgICAgICAgIXNlbGYuX3BsYXllclRhbmtDdHJsLnN0b3BNb3ZlICl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5jdXJBbmdsZSA9IGFuZ2xlO1xyXG5cclxuICAgICAgICAgICAgaWYoYW5nbGUhPW51bGwpe1xyXG4gICAgICAgICAgICAgICAgLy/lvIDlp4vliY3ov5tcclxuICAgICAgICAgICAgICAgIHNlbGYuX3BsYXllclRhbmtDdHJsLnRhbmtNb3ZlU3RhcnQoYW5nbGUpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL+WBnOatouWJjei/m1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fcGxheWVyVGFua0N0cmwudGFua01vdmVTdG9wKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/mjInplK7mjInkuItcclxuICAgICAgICBjYy5zeXN0ZW1FdmVudC5vbihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX0RPV04sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgY2MubWFjcm8uS0VZLnc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gOTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgY2MubWFjcm8uS0VZLnM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gMjcwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGNjLm1hY3JvLktFWS5hOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IDE4MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBjYy5tYWNyby5LRVkuZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGV2ZW50LmtleUNvZGUgPT0gY2MubWFjcm8uS0VZLmspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyZUJ0bkNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheWVyVGFua0N0cmwudGFua01vdmVTdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhbmdsZSE9bnVsbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lvIDlp4vliY3ov5tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wbGF5ZXJUYW5rQ3RybC50YW5rTW92ZVN0YXJ0KGFuZ2xlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgLy/mjInplK7miqzotbdcclxuICAgICAgICBjYy5zeXN0ZW1FdmVudC5vbihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX1VQLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5YGc5q2i5YmN6L+bXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihldmVudC5rZXlDb2RlICE9IGNjLm1hY3JvLktFWS5rKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wbGF5ZXJUYW5rQ3RybC50YW5rTW92ZVN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcyk7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvL+eisOaSnuajgOa1i1xyXG4gICAgY29sbGlzaW9uVGVzdDogZnVuY3Rpb24ocmVjdCwgYnVsbGV0KXtcclxuICAgICAgICAvL+WIpOaWreaYr+WQpueisOWIsOWcsOWbvui+ueeVjFxyXG4gICAgICAgIGlmIChyZWN0LnhNaW4gPD0gLXRoaXMuX2N1ck1hcFNpemUueC8yIHx8IHJlY3QueE1heCA+PSB0aGlzLl9jdXJNYXBTaXplLngvMiB8fFxyXG5cdFx0ICAgIHJlY3QueU1pbiA8PSAtdGhpcy5fY3VyTWFwU2l6ZS55LzIgfHwgcmVjdC55TWF4ID49IHRoaXMuX2N1ck1hcFNpemUueS8yKXtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/liKTmlq3mmK/lkKbmkp7loplcclxuICAgICAgICAvL+WwhuWdkOagh+i9rOaNouS4uuWcsOWbvuWdkOagh+ezu1xyXG4gICAgICAgIHZhciBNaW5ZID0gdGhpcy5fY3VyTWFwU2l6ZS55LzIgLSByZWN0LnlNaW47XHJcblx0ICAgIHZhciBNYXhZID0gdGhpcy5fY3VyTWFwU2l6ZS55LzIgLSByZWN0LnlNYXg7XHJcbiAgICAgICAgdmFyIE1pblggPSB0aGlzLl9jdXJNYXBTaXplLngvMiArIHJlY3QueE1pbjtcclxuICAgICAgICB2YXIgTWF4WCA9IHRoaXMuX2N1ck1hcFNpemUueC8yICsgcmVjdC54TWF4O1xyXG5cclxuICAgICAgICAvL+iOt+WPluWbm+S4quinkueahOmhtueCuVxyXG4gICAgICAgIHZhciBMZWZ0RG93biA9IGNjLnYyKE1pblgsIE1pblkpO1xyXG4gICAgICAgIHZhciBSaWdodERvd24gPSBjYy52MihNYXhYLCBNaW5ZKTtcclxuICAgICAgICB2YXIgTGVmdFVwID0gY2MudjIoTWluWCwgTWF4WSk7XHJcbiAgICAgICAgdmFyIFJpZ2h0VXAgPSBjYy52MihNYXhYLCBNYXhZKTtcclxuXHJcbiAgICAgICAgLy/ojrflj5blm5vmnaHovrnnmoTkuK3lv4PngrlcclxuICAgICAgICB2YXIgTWlkRG93biA9IGNjLnYyKE1pblgrKE1heFgtTWluWCkvMiwgTWluWSk7XHJcbiAgICAgICAgdmFyIE1pZFVwID0gY2MudjIoTWluWCsoTWF4WC1NaW5YKS8yLCBNYXhZKTtcclxuICAgICAgICB2YXIgTWlkTGVmdCA9IGNjLnYyKE1pblgsIE1pblkrKE1heFktTWluWSkvMik7XHJcbiAgICAgICAgdmFyIE1pZFJpZ2h0PSBjYy52MihNYXhYLCBNaW5ZKyhNYXhZLU1pblkpLzIpO1xyXG5cclxuICAgICAgICAvL+ajgOa1i+eisOaSnlxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb2xsaXNpb25UZXN0KFtMZWZ0RG93bixSaWdodERvd24sTGVmdFVwLFJpZ2h0VXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1pZERvd24sTWlkVXAsTWlkTGVmdCxNaWRSaWdodF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5YaF6YOo56Kw5pKe5qOA5rWL5pa55rOVXHJcbiAgICBfY29sbGlzaW9uVGVzdDogZnVuY3Rpb24ocG9pbnRzLCBidWxsZXQpe1xyXG4gICAgICAgIHZhciBwb2ludCA9IHBvaW50cy5zaGlmdCgpXHJcbiAgICAgICAgdmFyIGdpZCA9IHRoaXMubWFwTGF5ZXIwLmdldFRpbGVHSURBdChjYy52MihwYXJzZUludChwb2ludC54IC8gdGhpcy5fY3VyTWFwVGlsZVNpemUud2lkdGgpLHBhcnNlSW50KHBvaW50LnkgLyB0aGlzLl9jdXJNYXBUaWxlU2l6ZS5oZWlnaHQpKSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl90aWxlZE1hcERhdGEuZ2lkVG9UaWxlVHlwZVtnaWRdICE9IHRoaXMuX3RpbGVkTWFwRGF0YS50aWxlVHlwZS50aWxlTm9uZSAmJiBcclxuICAgICAgICAgICAgdGhpcy5fdGlsZWRNYXBEYXRhLmdpZFRvVGlsZVR5cGVbZ2lkXSAhPSB0aGlzLl90aWxlZE1hcERhdGEudGlsZVR5cGUudGlsZUdyYXNzKXtcclxuICAgICAgICAgICAgaWYoYnVsbGV0ICYmIHRoaXMuX3RpbGVkTWFwRGF0YS5naWRUb1RpbGVUeXBlW2dpZF0gPT0gdGhpcy5fdGlsZWRNYXBEYXRhLnRpbGVUeXBlLnRpbGVXYWxsKXtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFwTGF5ZXIwLnNldFRpbGVHSURBdCgwLCBwYXJzZUludChwb2ludC54IC8gdGhpcy5fY3VyTWFwVGlsZVNpemUud2lkdGgpLHBhcnNlSW50KHBvaW50LnkgLyB0aGlzLl9jdXJNYXBUaWxlU2l6ZS5oZWlnaHQpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGJ1bGxldCAmJiB0aGlzLl90aWxlZE1hcERhdGEuZ2lkVG9UaWxlVHlwZVtnaWRdID09IHRoaXMuX3RpbGVkTWFwRGF0YS50aWxlVHlwZS50aWxlS2luZyl7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMubWFwTGF5ZXIwLnNldFRpbGVHSURBdCgwLCAxMiwgMjUsIDEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXBMYXllcjAuc2V0VGlsZUdJREF0KDAsIDEyLCAyNCwgMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcExheWVyMC5zZXRUaWxlR0lEQXQoMCwgMTMsIDI1LCAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFwTGF5ZXIwLnNldFRpbGVHSURBdCgwLCAxMywgMjQsIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocG9pbnRzLmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbGxpc2lvblRlc3QocG9pbnRzLCBidWxsZXQpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBnYW1lT3ZlcjogZnVuY3Rpb24oKXtcclxuICAgICAgICB0aGlzLmRvdWJsZUZpcmUgPSBmYWxzZTtcclxuICAgICAgICBmb3IodmFyIGk9MDsgaTxjYy5nYW1lRGF0YS50YW5rTGlzdC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIHZhciB0YW5rID0gY2MuZ2FtZURhdGEudGFua0xpc3RbaV1cclxuICAgICAgICAgICAgdmFyIHRhbmtDdHJsID0gdGFuay5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpO1xyXG4gICAgICAgICAgICB0YW5rQ3RybC50YW5rU3RvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/lvLnnqpfosIPnlKhcclxuICAgICAgICBhbGVydC5zaG93LmNhbGwodGhpcywgXCLmuLjmiI/nu5PmnZ9cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoXCJTdGFydFNjZW5lXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+WKoOWFpeeOqeWutuWdpuWFi1xyXG4gICAgYWRkUGxheWVyVGFuazogZnVuY3Rpb24odGVhbSkge1xyXG4gICAgICAgIGlmKHRoaXMudGFua1Bvb2wuc2l6ZSgpPjApe1xyXG4gICAgICAgICAgICB2YXIgdGFuayA9IHRoaXMudGFua1Bvb2wuZ2V0KCk7XHJcbiAgICAgICAgICAgIHRhbmsuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLnNwcml0ZUZyYW1lc1t0aGlzLnNwcml0ZUZyYW1lcy5sZW5ndGgtMV07XHJcbiAgICAgICAgICAgIHRhbmsucG9zaXRpb24gPSB0aGlzLmJvcm5Qb3Nlc1t0aGlzLmJvcm5Qb3Nlcy5sZW5ndGgtMV07XHJcbiAgICAgICAgICAgIC8v6I635Y+W5Z2m5YWL5o6n5Yi257uE5Lu2XHJcbiAgICAgICAgICAgIHZhciB0YW5rQ3RybCA9IHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKTtcclxuICAgICAgICAgICAgLy/orr7nva7lnablhYvlsZ7mgKdcclxuICAgICAgICAgICAgdGFua0N0cmwudGFua1R5cGUgPSBUYW5rVHlwZS5QbGF5ZXI7XHJcbiAgICAgICAgICAgIHRhbmtDdHJsLnNwZWVkID0gdGhpcy50YW5rU3BlZWRzW3RoaXMudGFua1NwZWVkcy5sZW5ndGgtMV07XHJcbiAgICAgICAgICAgIHRhbmtDdHJsLmZpcmVUaW1lID0gdGhpcy50YW5rRmlyZVRpbWVzW3RoaXMudGFua0ZpcmVUaW1lcy5sZW5ndGgtMV07XHJcbiAgICAgICAgICAgIC8vdGFua0N0cmwuYmxvb2QgPSB0aGlzLnRhbmtCbG9vZHNbdGhpcy50YW5rQmxvb2RzLmxlbmd0aC0xXTtcclxuICAgICAgICAgICAgLy90YW5rQ3RybC5ibG9vZCA9IHRoaXMubGlmZSA7XHJcbiAgICAgICAgICAgIHRhbmtDdHJsLmJsb29kID0gMTtcclxuICAgICAgICAgICAgdGFua0N0cmwuZGllID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZighdGVhbSl7XHJcbiAgICAgICAgICAgICAgICBpZihjYy5nYW1lRGF0YS5zaW5nbGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5Y2V5py654mIXHJcbiAgICAgICAgICAgICAgICAgICAgdGFua0N0cmwudGVhbSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lpKfkubHmlpdcclxuICAgICAgICAgICAgICAgICAgICB0YW5rQ3RybC50ZWFtID0gKytjYy5nYW1lRGF0YS50ZWFtSWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy/nu4TpmJ9cclxuICAgICAgICAgICAgICAgIHRhbmtDdHJsLnRlYW0gPSB0ZWFtO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0YW5rLnBhcmVudCA9IHRoaXMudGFua05vZGU7XHJcbiAgICAgICAgICAgIC8v5Yqg5Yiw5YiX6KGoXHJcbiAgICAgICAgICAgIGNjLmdhbWVEYXRhLnRhbmtMaXN0LnB1c2godGFuayk7XHJcbiAgICAgICAgICAgIHJldHVybiB0YW5rO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH0sXHJcblxyXG4gICAgLy/liqDlhaVBSVxyXG4gICAgYWRkQUlUYW5rOiBmdW5jdGlvbihkdCwgdGVhbSkge1xyXG4gICAgICAgIGlmKHRoaXMudGFua1Bvb2wuc2l6ZSgpPjAgJiYgdGhpcy5tYXhDb3VudCA+IDApe1xyXG4gICAgICAgICAgICB2YXIgdGFuayA9IHRoaXMudGFua1Bvb2wuZ2V0KCk7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlSW50KE1hdGgucmFuZG9tKCkqMywgMTApO1xyXG4gICAgICAgICAgICAvL+iOt+WPluWdpuWFi+aOp+WItue7hOS7tlxyXG4gICAgICAgICAgICB2YXIgdGFua0N0cmwgPSB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIik7XHJcbiAgICAgICAgICAgIC8v6K6+572u5Z2m5YWL5bGe5oCnXHJcbiAgICAgICAgICAgIHRhbmsuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLnNwcml0ZUZyYW1lc1tpbmRleF07XHJcbiAgICAgICAgICAgIHRhbmsucG9zaXRpb24gPSB0aGlzLmJvcm5Qb3Nlc1tpbmRleF07XHJcblxyXG4gICAgICAgICAgICB0YW5rQ3RybC50YW5rVHlwZSA9IGluZGV4O1xyXG4gICAgICAgICAgICB0YW5rQ3RybC5zcGVlZCA9IHRoaXMudGFua1NwZWVkc1tpbmRleF07XHJcbiAgICAgICAgICAgIHRhbmtDdHJsLmZpcmVUaW1lID0gdGhpcy50YW5rRmlyZVRpbWVzW2luZGV4XTtcclxuICAgICAgICAgICAgdGFua0N0cmwuYmxvb2QgPSB0aGlzLnRhbmtCbG9vZHNbaW5kZXhdO1xyXG4gICAgICAgICAgICB0YW5rQ3RybC5kaWUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmKCF0ZWFtKXtcclxuICAgICAgICAgICAgICAgIGlmKGNjLmdhbWVEYXRhLnNpbmdsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/ljZXmnLrniYhcclxuICAgICAgICAgICAgICAgICAgICB0YW5rQ3RybC50ZWFtID0gMTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+Wkp+S5seaWl1xyXG4gICAgICAgICAgICAgICAgICAgIHRhbmtDdHJsLnRlYW0gPSArK2NjLmdhbWVEYXRhLnRlYW1JZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy/nu4TpmJ9cclxuICAgICAgICAgICAgICAgIHRhbmtDdHJsLnRlYW0gPSB0ZWFtO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihpbmRleCA9PSAwKXtcclxuICAgICAgICAgICAgICAgIHRhbmsuYW5nbGUgPSA5MDtcclxuICAgICAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICB0YW5rLmFuZ2xlID0gMTgwO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSAyKXtcclxuICAgICAgICAgICAgICAgIHRhbmsuYW5nbGUgPSAyNzA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodGFua0N0cmwuY29sbGlzaW9uVGFuayh0YW5rLmdldEJvdW5kaW5nQm94KCkpKXtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuYm9yblBvc2VzLmxlbmd0aC0xOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIHRhbmsucG9zaXRpb24gPSB0aGlzLmJvcm5Qb3Nlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZighdGFua0N0cmwuY29sbGlzaW9uVGFuayh0YW5rLmdldEJvdW5kaW5nQm94KCkpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0YW5rLnBhcmVudCA9IHRoaXMudGFua05vZGU7XHJcbiAgICAgICAgICAgIC8v5Yqg5Yiw5YiX6KGoXHJcbiAgICAgICAgICAgIGNjLmdhbWVEYXRhLnRhbmtMaXN0LnB1c2godGFuayk7XHJcbiAgICAgICAgICAgIHRoaXMubWF4Q291bnQgLS07XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICB0YW5rQm9vbTogZnVuY3Rpb24odGFuaykge1xyXG4gICAgICAgIC8vIHRhbmsucGFyZW50ID0gbnVsbDtcclxuICAgICAgICAvLyB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIikuZGllID0gdHJ1ZTtcclxuICAgICAgICAvLyB0aGlzLnRhbmtQb29sLnB1dCh0YW5rKTtcclxuICAgICAgICBpZihjYy5nYW1lRGF0YS5zaW5nbGUgJiYgdGFuay5nZXRDb21wb25lbnQoXCJUYW5rU2NyaXB0XCIpLnRlYW0gPT0gMCl7XHJcbiAgICAgICAgICAgIHRoaXMubGlmZSAtLTtcclxuICAgICAgICAgICAgdGhpcy5saWZlTnVtLnN0cmluZyA9IHRoaXMubGlmZSArIFwiXCI7XHJcblxyXG4gICAgICAgICAgICBpZih0aGlzLmxpZmUgPiAwKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkUGxheWVyVGFuaygpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YW5rLmdldENvbXBvbmVudChcIlRhbmtTY3JpcHRcIikuYmxvb2QgPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0YW5rLnBhcmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRhbmsuZ2V0Q29tcG9uZW50KFwiVGFua1NjcmlwdFwiKS5kaWUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnRhbmtQb29sLnB1dCh0YW5rKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0YW5rTnVtID0gTnVtYmVyKHRoaXMuZW5lbXlOdW0uc3RyaW5nKSAtIDE7XHJcbiAgICAgICAgICAgIHRoaXMuZW5lbXlOdW0uc3RyaW5nID0gdGFua051bSArIFwiXCI7XHJcbiAgICAgICAgICAgIGlmKHRhbmtOdW0gPT0gMCl7XHJcbiAgICAgICAgICAgICAgICBpZihjYy5nYW1lRGF0YS5jdXJMZXZlbCA8IDEwKXtcclxuICAgICAgICAgICAgICAgICAgICArK2NjLmdhbWVEYXRhLmN1ckxldmVsO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShcIkNpdHlTY2VuZVwiKyBjYy5nYW1lRGF0YS5jdXJMZXZlbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG91YmxlRmlyZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0LnNob3cuY2FsbCh0aGlzLCBcIuS9oOi1ouS6hlwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShcIlN0YXJ0U2NlbmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5byA54Gr5oyJ6ZKu54K55Ye7XHJcbiAgICBmaXJlQnRuQ2xpY2s6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYodGhpcy5fcGxheWVyVGFua0N0cmwuc3RhcnRGaXJlKHRoaXMuYnVsbGV0UG9vbCkpe1xyXG4gICAgICAgICAgICAvL+aSreaUvuWwhOWHu+mfs+aViFxyXG4gICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5wbGF5KHRoaXMuX3BsYXllclRhbmtDdHJsLnNob290QXVkaW8sIGZhbHNlLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6ZSA5q+B5pe26LCD55SoXHJcbiAgICBvbkRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnVuc2NoZWR1bGUodGhpcy5hZGRBSVRhbmssdGhpcyk7XHJcbiAgICB9LFxyXG59KTtcclxuIl19